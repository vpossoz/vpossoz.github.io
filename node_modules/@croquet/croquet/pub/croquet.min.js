/**
 * Copyright Croquet Corporation 2022
 * Bundle of @croquet/croquet
 * Date: 2022-12-19
 * Version: 1.1.0-15
 */

var Croquet=function(e){"use strict";if(void 0===globalThis.TextEncoder){globalThis.TextEncoder=function(){},TextEncoder.prototype.encode=function(e){for(var t=e.length,n=-1,r="undefined"==typeof Uint8Array?new Array(1.5*t):new Uint8Array(3*t),i=0,o=0,s=0;s!==t;){if(i=e.charCodeAt(s),s+=1,i>=55296&&i<=56319){if(s===t){r[n+=1]=239,r[n+=1]=191,r[n+=1]=189;break}if(!((o=e.charCodeAt(s))>=56320&&o<=57343)){r[n+=1]=239,r[n+=1]=191,r[n+=1]=189;continue}if(s+=1,(i=1024*(i-55296)+o-56320+65536)>65535){r[n+=1]=240|i>>>18,r[n+=1]=128|i>>>12&63,r[n+=1]=128|i>>>6&63,r[n+=1]=128|63&i;continue}}i<=127?r[n+=1]=0|i:i<=2047?(r[n+=1]=192|i>>>6,r[n+=1]=128|63&i):(r[n+=1]=224|i>>>12,r[n+=1]=128|i>>>6&63,r[n+=1]=128|63&i)}return"undefined"!=typeof Uint8Array?r.subarray(0,n+1):(r.length=n+1,r)},TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(e){TextEncoder.prototype.encoding="utf-8"}"undefined"!=typeof Symbol&&(TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){i(s,r,o,a,c,"next",e)}function c(e){i(s,r,o,a,c,"throw",e)}a(void 0)}))}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t,n){return m=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i},m.apply(null,arguments)}function p(e){var t="function"==typeof Map?new Map:void 0;return p=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return m(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)},p(e)}function y(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function b(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){var t=f();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Z.apply(this,arguments)}function X(e,t){return x(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||k(e,t)||W()}function w(e){return x(e)||G(e)||k(e)||W()}function L(e){return function(e){if(Array.isArray(e))return S(e)}(e)||G(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){if(Array.isArray(e))return e}function G(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function k(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}var T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(e){var t=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,o=Object.create(i.prototype),s=new C(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===m)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return Y()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=k(s,n);if(a){if(a===y)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=m;var c=d(e,t,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",m="executing",p="completed",y={};function b(){}function v(){}function g(){}var Z={};l(Z,s,(function(){return this}));var X=Object.getPrototypeOf,w=X&&X(X(T([])));w&&w!==n&&i.call(w,s)&&(Z=w);var L=g.prototype=b.prototype=Object.create(Z);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function G(e,t){function n(o,s,a,c){var l=d(e[o],e,s);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===r(h)&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=d(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function W(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(e){if(e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:Y}}function Y(){return{value:t,done:!0}}return v.prototype=g,l(L,"constructor",g),l(g,"constructor",v),v.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(L),e},e.awrap=function(e){return{__await:e}},x(G.prototype),l(G.prototype,a,(function(){return this})),e.AsyncIterator=G,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new G(u(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(L),l(L,c,"Generator"),l(L,s,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(W),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),W(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;W(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{globalThis.regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}({exports:{}});const Y={COLOR:"1",CROQUET_VERSION:"1.1.0-15",EDITOR:"nano",HOME:"/Users/vanessa",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",HOMEBREW_PREFIX:"/opt/homebrew",HOMEBREW_REPOSITORY:"/opt/homebrew",INFOPATH:"/opt/homebrew/share/info:",INIT_CWD:"/Users/vanessa/wonderland/croquet/libraries/packages/croquet",LANG:"en_US.UTF-8",LESS:"-R",LOGNAME:"vanessa",LSCOLORS:"Gxfxcxdxbxegedabagacad",MANPATH:"/Users/vanessa/.nvm/versions/node/v16.18.0/share/man:/opt/homebrew/share/man::",NODE:"/Users/vanessa/.nvm/versions/node/v16.18.0/bin/node",NODE_ENV:"production",NVM_BIN:"/Users/vanessa/.nvm/versions/node/v16.18.0/bin",NVM_CD_FLAGS:"-q",NVM_DIR:"/Users/vanessa/.nvm",NVM_INC:"/Users/vanessa/.nvm/versions/node/v16.18.0/include/node",P9K_SSH:"0",P9K_TTY:"old",PAGER:"less",PATH:"/Users/vanessa/wonderland/croquet/libraries/packages/croquet/node_modules/.bin:/Users/vanessa/wonderland/croquet/libraries/packages/node_modules/.bin:/Users/vanessa/wonderland/croquet/libraries/node_modules/.bin:/Users/vanessa/wonderland/croquet/node_modules/.bin:/Users/vanessa/wonderland/node_modules/.bin:/Users/vanessa/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/vanessa/.nvm/versions/node/v16.18.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/vanessa/wonderland/docker/scripts:/Users/vanessa/.nvm/versions/node/v16.18.0/bin:/Users/vanessa/google-cloud-sdk/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin",PWD:"/Users/vanessa/wonderland/croquet/libraries/packages/croquet",SHELL:"/bin/zsh",SHLVL:"3",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.0s2LoQcSkQ/Listeners",TERM:"xterm-256color",TERM_PROGRAM:"Apple_Terminal",TERM_PROGRAM_VERSION:"445",TERM_SESSION_ID:"C3735642-A37D-4429-AB5A-ABC1054D4DD3",TMPDIR:"/var/folders/vt/36w8wg916qvblvg2k_y9dtvm0000gn/T/",USER:"vanessa",XPC_FLAGS:"0x0",XPC_SERVICE_NAME:"0",ZSH:"/Users/vanessa/.oh-my-zsh"};var R=window.location.hostname.endsWith("croquet.studio"),P="",V="",K=function(){function e(){s(this,e),this.getSession(),I(this,window.location.search.slice(1)),I(this,R?window.location.hash.slice(1):V),window.location.pathname.indexOf("/ar.html")>=0&&(this.ar=!0)}return c(e,[{key:"has",value:function(e,t,n){"boolean"!=typeof n&&(n=this.isHost(n));var r=this[e];if("string"!=typeof r)return n;var i=r.split(",");return!0===n&&(t="no".concat(t)),t.endsWith("s")&&(t=t.slice(0,-1)),i.includes(t)||i.includes("".concat(t,"s"))?!n:n}},{key:"getSession",value:function(){if(R){var e=window.location.pathname.match(/^\/([^/]+)\/(.*)$/);if(e)return P=e[1],e[2]}else{var t=window.location.hash.match(/^#([^&]+)&?(.*)$/);if(t)return t[1].includes("=")?(V="".concat(t[1],"&").concat(t[2]),""):(V=t[2],t[1])}return"string"==typeof this.session?(V=window.location.hash.slice(1),this.session):""}},{key:"setSession",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==R&&this.getSession();var n=window.location,r=n.search,i=n.hash,o=R?"/".concat(P,"/").concat(e).concat(r).concat(i):"#".concat(e).concat(V?"&"+V:"");t?window.history.replaceState({},"",o):window.history.pushState({},"",o)}},{key:"isHost",value:function(e){var t=window.location.hostname;if(t===e)return!0;if("localhost"!==e)return!1;if(t.endsWith(".ngrok.io"))return!0;if("croquet.io"===t&&window.location.pathname.match(/^\/(dev|files)\//))return!0;return["127.0.0.1","[::1]"].includes(t)}},{key:"isLocalhost",value:function(){return this.isHost("localhost")}}]),e}();function I(e,t){if(t){var n,r=C(t.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value.split("="),o=i[0],s=!0;if(i.length>1&&(s=decodeURIComponent(i.slice(1).join("="))).match(/^(true|false|null|[0-9.]*|["[{].*)$/))try{s=JSON.parse(s)}catch(e){"["===s[0]&&(s=s.slice(1,-1).split(","))}e[o]=s}}catch(e){r.e(e)}finally{r.f()}}}var M,N,H,F=new K,z={exports:{}};N=T,H=function(e){var t=function e(t){return new e.lib.init(t)};function n(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:t.offset[e]+"px":"0px"}function i(e,t){return!(!e||"string"!=typeof t||!(e.className&&e.className.trim().split(/\s+/gi).indexOf(t)>-1))}return t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,style:{background:""}},t.lib=t.prototype={toastify:"1.11.2",constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=0===e.duration?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity="bottom"===e.gravity?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=void 0===e.stopOnFocus?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=void 0!==e.escapeMarkup?e.escapeMarkup:t.defaults.escapeMarkup,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");for(var t in e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)e.style[t]=this.options.style[t];if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){var i=document.createElement("img");i.src=this.options.avatar,i.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?e.appendChild(i):e.insertAdjacentElement("afterbegin",i)}if(!0===this.options.close){var o=document.createElement("span");o.innerHTML="&#10006;",o.className="toast-close",o.addEventListener("click",function(e){e.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var s=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&s>360?e.insertAdjacentElement("afterbegin",o):e.appendChild(o)}if(this.options.stopOnFocus&&this.options.duration>0){var a=this;e.addEventListener("mouseover",(function(t){window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(function(){e.timeOutValue=window.setTimeout((function(){a.removeElement(e)}),a.options.duration)}))}if(void 0!==this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),this.options.onClick()}.bind(this)),"object"===r(this.options.offset)){var c=n("x",this.options),l=n("y",this.options),u="left"==this.options.position?c:"-"+c,d="toastify-top"==this.options.gravity?l:"-"+l;e.style.transform="translate("+u+","+d+")"}return e},showToast:function(){var e;if(this.toastElement=this.buildToast(),!(e="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var n=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,n),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}.bind(this),400)}},t.reposition=function(){for(var e,t={top:15,bottom:15},n={top:15,bottom:15},r={top:15,bottom:15},o=document.getElementsByClassName("toastify"),s=0;s<o.length;s++){e=!0===i(o[s],"toastify-top")?"toastify-top":"toastify-bottom";var a=o[s].offsetHeight;e=e.substr(9,e.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(o[s].style[e]=r[e]+"px",r[e]+=a+15):!0===i(o[s],"toastify-left")?(o[s].style[e]=t[e]+"px",t[e]+=a+15):(o[s].style[e]=n[e]+"px",n[e]+=a+15)}return this},t.lib.init.prototype=t.lib,t},(M=z).exports?M.exports=H():N.Toastify=H();var E=z.exports,_={exports:{}};!function(e){!function(t,n,i){var o,s=256,a=i.pow(s,6),c=i.pow(2,52),l=2*c,u=255;function d(e,r,u){var d=[],b=p(m((r=1==r?{entropy:!0}:r||{}).entropy?[e,y(n)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(s):(e=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(e)),y(e)}catch(e){var r=t.navigator,i=r&&r.plugins;return[+new Date,t,i,t.screen,y(n)]}}():e,3),d),v=new h(d),g=function(){for(var e=v.g(6),t=a,n=0;e<c;)e=(e+n)*s,t*=s,n=v.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return g.int32=function(){return 0|v.g(4)},g.quick=function(){return v.g(4)/4294967296},g.double=g,p(y(v.S),n),(r.pass||u||function(e,t,n,r){return r&&(r.S&&f(r,v),e.state=function(){return f(v,{})}),n?(i.random=e,t):e})(g,b,"global"in r?r.global:this==i,r.state)}function h(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<s;)a[i]=i++;for(i=0;i<s;i++)a[i]=a[o=u&o+e[i%n]+(t=a[i])],a[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,a=r.S;e--;)t=a[i=u&i+1],n=n*s+a[u&(a[i]=a[o=u&o+t])+(a[o]=t)];return r.i=i,r.j=o,n})(s)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,i=[],o=r(e);if(t&&"object"==o)for(n in e)try{i.push(m(e[n],t-1))}catch(e){}return i.length?i:"string"==o?e:e+"\0"}function p(e,t){for(var n,r=e+"",i=0;i<r.length;)t[u&i]=u&(n^=19*t[u&i])+r.charCodeAt(i++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(p(i.random(),n),e.exports){e.exports=d;try{o=undefined}catch(e){}}else i.seedrandom=d}("undefined"!=typeof self?self:T,[],Math)}(_);var j,J=_.exports;!function(){function e(e){this.mode=n.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var i=[],o=this.data.charCodeAt(t);o>65536?(i[0]=240|(1835008&o)>>>18,i[1]=128|(258048&o)>>>12,i[2]=128|(4032&o)>>>6,i[3]=128|63&o):o>2048?(i[0]=224|(61440&o)>>>12,i[1]=128|(4032&o)>>>6,i[2]=128|63&o):o>128?(i[0]=192|(1984&o)>>>6,i[1]=128|63&o):i[0]=o,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=h.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,s=0;s<this.modules[i].length;s++){var a=1*s;this.modules[i][s]&&(r.beginFill(0,100),r.moveTo(a,o),r.lineTo(a+1,o),r.lineTo(a+1,o+1),r.lineTo(a,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=h.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)this.modules[r+o][i+s]=-2==o||2==o||-2==s||2==s||0==o&&0==s}},setupTypeNumber:function(e){for(var t=h.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=h.getBCHTypeInfo(n),i=0;i<15;i++){var o=!e&&1==(r>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(i=0;i<15;i++){o=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[r][s-a]){var c=!1;o<e.length&&(c=1==(e[o]>>>i&1)),h.getMask(t,r,s-a)&&(c=!c),this.modules[r][s-a]=c,-1==--i&&(o++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,r){for(var i=y.getRSBlocks(e,n),o=new b,s=0;s<r.length;s++){var a=r[s];o.put(a.mode,4),o.put(a.getLength(),h.getLengthInBits(a.mode,e)),a.write(o)}var c=0;for(s=0;s<i.length;s++)c+=i[s].dataCount;if(o.getLengthInBits()>8*c)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*c+")");for(o.getLengthInBits()+4<=8*c&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*c||(o.put(t.PAD0,8),o.getLengthInBits()>=8*c));)o.put(t.PAD1,8);return t.createBytes(o,i)},t.createBytes=function(e,t){for(var n=0,r=0,i=0,o=new Array(t.length),s=new Array(t.length),a=0;a<t.length;a++){var c=t[a].dataCount,l=t[a].totalCount-c;r=Math.max(r,c),i=Math.max(i,l),o[a]=new Array(c);for(var u=0;u<o[a].length;u++)o[a][u]=255&e.buffer[u+n];n+=c;var d=h.getErrorCorrectPolynomial(l),f=new p(o[a],d.getLength()-1).mod(d);s[a]=new Array(d.getLength()-1);for(u=0;u<s[a].length;u++){var m=u+f.getLength()-s[a].length;s[a][u]=m>=0?f.get(m):0}}var y=0;for(u=0;u<t.length;u++)y+=t[u].totalCount;var b=new Array(y),v=0;for(u=0;u<r;u++)for(a=0;a<t.length;a++)u<o[a].length&&(b[v++]=o[a][u]);for(u=0;u<i;u++)for(a=0;a<t.length;a++)u<s[a].length&&(b[v++]=s[a][u]);return b};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i=0,o=1,s=2,a=3,c=4,l=5,u=6,d=7,h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;h.getBCHDigit(t)-h.getBCHDigit(h.G15)>=0;)t^=h.G15<<h.getBCHDigit(t)-h.getBCHDigit(h.G15);return(e<<10|t)^h.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;h.getBCHDigit(t)-h.getBCHDigit(h.G18)>=0;)t^=h.G18<<h.getBCHDigit(t)-h.getBCHDigit(h.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return h.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case i:return(t+n)%2==0;case o:return t%2==0;case s:return n%3==0;case a:return(t+n)%3==0;case c:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case l:return t*n%2+t*n%3==0;case u:return(t*n%2+t*n%3)%2==0;case d:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new p([1],0),n=0;n<e;n++)t=t.multiply(new p([1,f.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var o=0,s=e.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0||t<=r+a))for(var c=-1;c<=1;c++)i+c<0||t<=i+c||0==a&&0==c||s==e.isDark(r+a,i+c)&&o++;o>5&&(n+=3+o-5)}for(r=0;r<t-1;r++)for(i=0;i<t-1;i++){var l=0;e.isDark(r,i)&&l++,e.isDark(r+1,i)&&l++,e.isDark(r,i+1)&&l++,e.isDark(r+1,i+1)&&l++,0!=l&&4!=l||(n+=3)}for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var u=0;for(i=0;i<t;i++)for(r=0;r<t;r++)e.isDark(r,i)&&u++;return n+=10*(Math.abs(100*u/t/t-50)/5)}},f={glog:function(e){if(e<1)throw new Error("glog("+e+")");return f.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return f.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)f.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)f.EXP_TABLE[m]=f.EXP_TABLE[m-4]^f.EXP_TABLE[m-5]^f.EXP_TABLE[m-6]^f.EXP_TABLE[m-8];for(m=0;m<255;m++)f.LOG_TABLE[f.EXP_TABLE[m]]=m;function p(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function y(e,t){this.totalCount=e,this.dataCount=t}function b(){this.buffer=[],this.length=0}p.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=f.gexp(f.glog(this.get(n))+f.glog(e.get(r)));return new p(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=f.glog(this.get(0))-f.glog(e.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<e.getLength();r++)n[r]^=f.gexp(f.glog(e.get(r))+t);return new p(n,0).mod(e)}},y.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y.getRSBlocks=function(e,t){var n=y.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,i=[],o=0;o<r;o++)for(var s=n[3*o+0],a=n[3*o+1],c=n[3*o+2],l=0;l<s;l++)i.push(new y(a,c));return i},y.getRsBlockTable=function(e,t){switch(t){case r.L:return y.RS_BLOCK_TABLE[4*(e-1)+0];case r.M:return y.RS_BLOCK_TABLE[4*(e-1)+1];case r.Q:return y.RS_BLOCK_TABLE[4*(e-1)+2];case r.H:return y.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},b.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],g=function(){var e=function(e,t){this._bIsPainted=!1,this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return e.prototype.draw=function(e){var t=this._oContext,n=this._htOption,r=e.getModuleCount(),i=n.width/r,o=n.height/r,s=Math.round(i),a=Math.round(o);this.clear();for(var c=0;c<r;c++)for(var l=0;l<r;l++){var u=e.isDark(c,l),d=l*i,h=c*o;t.strokeStyle=u?n.colorDark:n.colorLight,t.lineWidth=1,t.fillStyle=u?n.colorDark:n.colorLight,t.fillRect(d,h,i,o),t.strokeRect(Math.floor(d)+.5,Math.floor(h)+.5,s,a),t.strokeRect(Math.ceil(d)-.5,Math.ceil(h)-.5,s,a)}this._bIsPainted=!0},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},e}();function Z(e,t){for(var n=1,i=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),o=0,s=v.length;o<=s;o++){var a=0;switch(t){case r.L:a=v[o][0];break;case r.M:a=v[o][1];break;case r.Q:a=v[o][2];break;case r.H:a=v[o][3]}if(i<=a)break;n++}if(n>v.length)throw new Error("Too long data");return n}j=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H},"string"==typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];"string"==typeof e&&(e=document.getElementById(e)),this._htOption.useSVG&&(g=svgDrawer),this._el=e,this._oQRCode=null,this._oDrawing=new g(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},j.prototype.makeCode=function(e){this._oQRCode=new t(Z(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode)},j.prototype.clear=function(){this._oDrawing.clear()},j.prototype.getCanvas=function(){for(var e=0;e<this._el.children.length;e++){var t=this._el.children[e];if("CANVAS"===t.tagName)return t}return null},j.CorrectLevel=r}();var U=j,Q=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,i="boolean"==typeof t.cycles&&t.cycles,o=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==r(t))return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=s.push(t)-1,l=Object.keys(t).sort(o&&o(t));for(a="",n=0;n<l.length;n++){var u=l[n],d=e(t[u]);d&&(a&&(a+=","),a+=JSON.stringify(u)+":"+d)}return s.splice(c,1),"{"+a+"}"}}(e)},O={exports:{}},D={exports:{}};!function(e,t){var n;e.exports=(n=n||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==T&&T.crypto&&(n=T.crypto),!n)try{n=require("crypto")}catch(e){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},s=o.lib={},a=s.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new c.init(t,e)}}),l=o.enc={},u=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},h=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},f=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,u=e.min(4*l,o);if(l){for(var d=0;d<l;d+=s)this._doProcessBlock(i,d);n=i.splice(0,l),r.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=f.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}});var m=o.algo={};return o}(Math),n)}(D),function(e,t){var n;e.exports=(n=D.exports,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)};r.prototype=e}}(),n.lib.WordArray)}(O);var B=O.exports,A={exports:{}};!function(e,t){var n;e.exports=(n=D.exports,function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var l=[],u=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],d=n[6],h=n[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var m=l[f-15],p=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,y=l[f-2],b=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=p+l[f-7]+b+l[f-16]}var v=r&i^r&o^i&o,g=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),Z=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+c[f]+l[f];h=d,d=u,u=a,a=s+Z|0,s=o,o=i,i=r,r=Z+(g+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)}(A);var q,$=A.exports,ee=["hashOverride"],te="node"===Y.CROQUET_PLATFORM;function ne(e){for(var t=e.sigBytes,n=e.words,r=new Uint8Array(t),i=0,o=0;i<t;){var s=n[o++];if(r[i++]=(4278190080&s)>>>24,i===t)break;if(r[i++]=(16711680&s)>>>16,i===t)break;if(r[i++]=(65280&s)>>>8,i===t)break;r[i++]=255&s}return r}function re(e){function t(e){var t=e.indexOf("{"),n=e.lastIndexOf("}");if(-1===t||-1===n||n<t)return e;var r=e.slice(0,t).replace(/\s+/g," ").replace(/\s\(/,"("),i=e.slice(t+1,n);return"".concat(r.trim(),"{").concat(i.trim(),"}")}var n=t(""+e);if(!n.startsWith("class")){var r=e.prototype;r&&(n+=Object.getOwnPropertyNames(r).map((function(e){return"".concat(e,":").concat(t(""+r[e]))})).join(""))}return n}function ie(e){return btoa(String.fromCharCode.apply(String,L(new Uint8Array(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oe(e){return se.apply(this,arguments)}function se(){return se=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return","47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU");case 2:return e.next=4,q("SHA-256",t);case 4:return n=e.sent,e.abrupt("return",ie(n));case 6:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function ae(){return F.has("debug","hashing",!1)}q=globalThis.crypto&&globalThis.crypto.subtle&&"function"==typeof globalThis.crypto.subtle.digest?globalThis.crypto.subtle.digest.bind(globalThis.crypto.subtle):function(e,t){if("SHA-256"!==e)throw Error("Croquet: only SHA-256 available");var n=B.create(t);return ne($(n)).buffer};var ce={},le=new TextEncoder;function ue(e){return de.apply(this,arguments)}function de(){return de=o(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=le.encode(t),e.next=3,oe(n);case 3:return r=e.sent,ae()&&(ce[r]={string:t,buffer:n}),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}var he=[],fe={};function me(e,t){return pe.apply(this,arguments)}function pe(){return(pe=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(t+Q(n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ye=new Set;function be(e,t,n,r){return ve.apply(this,arguments)}function ve(){return(ve=o(regeneratorRuntime.mark((function e(t,r,i,o){var s,a,c,l,u,d,h,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=fe[t],l="",!c){e.next=8;break}s=c.codeHashes,a=c.computedCodeHash,l=" (code hashing from cache)",e.next=15;break;case 8:return e.next=10,Promise.all(he);case 10:return s=e.sent,e.next=13,ue([o].concat(L(s)).join("|"));case 13:a=e.sent,fe[t]={codeHashes:s,computedCodeHash:a};case 15:return u=i.hashOverride,d=y(i,ee),h=u||a,e.next=19,ue(t+"|"+r+Q(d)+h);case 19:return f=e.sent,ae()&&!ye.has(f)&&((te?"utf-8":L(document.getElementsByTagName("meta")).find((function(e){return e.getAttribute("charset")})))||console.warn('Croquet: Missing <meta charset="..."> declaration. Croquet model code hashing might differ between browsers.'),ce[a].what="Version ID",ce[t].what="Persistent ID",ce[f].what="Session ID",h!==a&&(s.push(a),ce[a].what="Computed Version ID (replaced by overrideHash)",ce[h]={what:"Version ID (as specified by overrideHash)"}),m=[].concat(L(s),[h,t,f]).map((function(e){return n({hash:e},ce[e])})),console.log("Croquet: Debug Hashing for session ".concat(f).concat(l),m),ye.add(f)),e.abrupt("return",{id:f,persistentId:t,codeHash:h,computedCodeHash:a});case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=Date.now();"undefined"==typeof performance&&(window.performance={now:function(){return Date.now()-ge}});var Ze,Xe,we=["simulate","update","render","snapshot"],Le={total:"black",update:"blue",render:"magenta",simulate:"yellow",snapshot:"green",backlog:"red",network:"lightgray"},xe=null,Ge=null,ke=null,Se=0,We=null,Ce=null;function Te(e){for(xe=e;e.firstChild;)e.removeChild(e.firstChild);e.style.background="#faf0dc",We=document.createElement("canvas"),Ce=We.getContext("2d"),We.id="text_stats",We.width=Math.min(140,window.innerWidth),We.height=36,We.style.width=We.width,We.style.height=We.height,Ce.font="9.5pt sans-serif",e.appendChild(We),e.title=Object.entries(Le).map((function(e){var t=X(e,2),n=t[0],r=t[1];return"".concat(r,": ").concat(n)})).join("\n"),(Ge=document.createElement("canvas")).width=Math.min(125,window.innerWidth),Ge.height=125,Ge.style.width="100%";var t=document.createElement("div");t.id="innerDiv",e.appendChild(t),t.appendChild(Ge),ke=Ge.getContext("2d")}var Ye=[],Re=0,Pe=!1,Ve=He(0),Ke={},Ie=1e3/60;function Me(e){return 20*(1-e/Ie)+60}function Ne(e){Ze=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.style.width="100%",t.style.position="absolute",t.style.left="0px",xe.querySelector("#innerDiv").appendChild(t),t}(e),(Xe=Ze.getContext("2d")).strokeStyle="rgba(255, 255, 255, 0.5)";for(var t=0;t<60;t+=Ie){var n=Me(t);Xe.moveTo(0,n),Xe.lineTo(Ze.width,n),Xe.stroke()}}function He(e){return{start:e,total:0,items:{},users:0,backlog:0,network:0,latency:0,activity:1e3,connected:Pe}}function Fe(e){Ve.total=e-Ve.start;var t=Math.min(120,window.innerWidth);if(Ye.length>=t&&Ye.splice(0,Ye.length-t+1),Ye.push(Ve),!(Ye.length<=1)&&xe&&0!==xe.offsetHeight){var n=Ye.slice(1).filter((function(e){return e.total})),r=n.map((function(e){return e.total})).reduce((function(e,t){return e+t}),0)/n.length,i=Math.max.apply(Math,L(n.map((function(e){return e.total}))));Math.max.apply(Math,L(n.map((function(e){return Math.max(e.backlog,e.network)})))),Re=1e3,function(e,t){Ce.globalCompositeOperation="copy",Ce.fillStyle="rgb(255, 255, 255, 0)",Ce.fillRect(0,0,We.width,We.height),Ce.fillStyle="rgb(0, 0, 0, 1)",Ce.globalCompositeOperation="source-over";var n="".concat(Ve.users," users, ").concat(Math.round(1e3/e)," fps");t>70&&(n+=" ".concat(Math.ceil(t).toLocaleString(),"ms")),Ce.fillText(n,2,15),n=Ve.backlog<100&&Ve.activity<1e3?"latency: ".concat(Ve.latency," ms"):"backlog: ".concat(Ve.backlog<100?"0.0":(Ve.backlog/1e3).toFixed(1)," s"),Ce.fillText(n,2,33)}(r,i),Ze||Ne(Ge),Se===Ge.width?(ke.globalCompositeOperation="copy",ke.drawImage(Ge,1,0,Ge.width-1,Ge.height,0,0,Ge.width-1,Ge.height),ke.globalCompositeOperation="source-over",ke.fillStyle="transparent",ke.fillRect(Ge.width-1,0,1,Ge.height)):Se++;var o=function(e){return Me(e/Re*-2*Ie)+5},s=Ye[Ye.length-1],a=Se-.5,c=Me(0);ke.beginPath(),ke.moveTo(a,c),ke.lineTo(a,Me(s.total)),ke.strokeStyle=Le[s.connected?"total":"network"],ke.stroke(),ke.beginPath(),ke.moveTo(a,c),c=Me(s.total);var l,u=0,d=C(we);try{for(d.s();!(l=d.n()).done;){var h=l.value;s.items[h]&&(c=Me(u+=s.items[h]),ke.lineTo(a,c),ke.strokeStyle=Le[h],ke.stroke(),ke.beginPath(),ke.moveTo(a,c))}}catch(e){d.e(e)}finally{d.f()}s.network&&(ke.beginPath(),ke.moveTo(a,o(0)),ke.lineTo(a,o(s.network)),ke.strokeStyle=Le.network,ke.stroke())}}var ze=[],Ee={animationFrame:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fe(e),Ve=He(e);for(var n=0,r=Object.entries(t);n<r.length;n++){var i=X(r[n],2),o=i[0],s=i[1];this[o](s)}},begin:function(e){var t=performance.now();Ve.items[e]=(Ve.items[e]||0)-t;var n=ze[ze.length-1];return n&&(Ve.items[n]+=t),ze.push(e),t},end:function(e){var t=performance.now();Ve.items[e]+=t;var n=ze.pop();if(n!==e)throw Error('Unmatched stats calls: expected end("'.concat(n,'"), got end("').concat(e,'")'));var r=ze[ze.length-1];return r&&(Ve.items[r]-=t),t},backlog:function(e){Ve.backlog=Math.max(e,Ve.backlog)},network:function(e){Ve.network=e},starvation:function(e){Ve.network=e},latency:function(e){Ve.latency=e},activity:function(e){Ve.activity=e},users:function(e){Ve.users=e},connected:function(e){var t=Pe;Ve.connected=Pe=e,t&&!Pe&&Ze&&(Ze.remove(),Xe=null)},perSecondTally:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.logMessageStats)for(var t=0,n=Object.entries(e);t<n.length;t++){var r=X(n[t],2),i=r[0],o=r[1];Ke[i]=(Ke[i]||0)+o}},stepSession:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Math.floor(Date.now()/1e3);if(!window.logMessageStats)return Ke={second:r},null;var i=null;if(r!==Ke.second){if(Ke.second&&t&&(Ke.requestedMessages||Ke.sentMessagesTotal)){i=n({},Ke);var o=r-Ke.second;1!==o&&(i.sampleSeconds=o),i.sentBundles&&(i.averageDelay=Math.round(10*i.sendDelay/i.sentMessagesTotal)/10,i.averageBundlePayload=Math.round(i.sentBundlePayload/i.sentBundles)),delete i.second,delete i.sendDelay,delete i.sentBundlePayload}Ke={second:r}}return i}},_e="ontouchstart"in document.documentElement,je=window.parent!==window,Je=_e?20:12,Ue=_e?0:15,Qe=!1;function Oe(){if(!Qe){Qe=!0;var e="\n        #croquet_dock { position: fixed; z-index: 2; border: 3px solid white; bottom: 6px; left: 6px; width: 36px; height: 36px; box-sizing: border-box; background: white; opacity: 0.4; transition: all ".concat(.3,"s ease; }\n        #croquet_dock.active { opacity: 0.95; border-radius: 12px; }\n        #croquet_dock.debug { width: 84px; }\n        #croquet_dock_bar { position: absolute; border: 3px solid white; width: 100%; height: 30px; box-sizing: border-box; background: white; }\n\n        #croquet_badge { position: absolute; width: 72px; height: 24px; top: 50%; transform: translate(0px, -50%); cursor: none; }\n        #croquet_dock.active #croquet_badge { left: 2%; }\n        #croquet_dock:not(.debug) #croquet_badge { display: none; }\n\n        .croquet_dock_button { position: absolute; width: ").concat(Je,"%; height: 90%; top: 50%; transform: translate(0px, -50%); border-radius: 20%; }\n        .croquet_dock_button:focus { outline: 0; }\n        .croquet_dock_button canvas { position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; }\n        #croquet_dock:not(.active) .croquet_dock_button { display: none; }\n        #croquet_dock_left { right: ").concat(2+Ue+Je+2,"% }\n        #croquet_dock:not(.debug) #croquet_dock_left { display: none; }\n        #croquet_dock_right { right: ").concat(2+Ue,"%; }\n        #croquet_dock:not(.debug) #croquet_dock_right { display: none; }\n        #croquet_dock_pin { right: ").concat(2,"%; }\n        #croquet_dock_pin.pinned { background: #cce6ff; }\n\n        #croquet_dock_content { position: absolute; left: ").concat(2,"px; top: ").concat(2,"px; right: ").concat(2,"px; bottom: ").concat(2,"px; background: white; overflow: hidden; }\n        #croquet_dock.debug:not(.active) #croquet_dock_content { display: none; }\n        #croquet_dock.debug:not(.active) #croquet_dock_content div { display: none; }\n\n        #croquet_qrcode { position: absolute; width: 100%; height: 100%;box-sizing: border-box; cursor: crosshair; }\n        #croquet_dock.active #croquet_qrcode { border: 6px solid white; }\n        #croquet_dock.debug #croquet_qrcode:not(.active) { display: none; }\n        #croquet_qrcode canvas { image-rendering: pixelated; }\n\n        #croquet_stats { position: absolute; width: 70%; height: 90%; left: 15%; top: 5%; opacity: 0.8; font-family: sans-serif; }\n        #croquet_stats:not(.active) { display: none; }\n"),t=document.createElement("style");t.innerHTML=e,document.head.insertBefore(t,document.head.getElementsByTagName("style")[0])}}var De=!1;var Be,Ae=!1;function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&mt.showMessage(e,n(n({},t),{},{level:"warning"}))}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&mt.showMessage(e,n(n({},t),{},{level:"status"}))}function et(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";console.error("Error during ".concat(e),t);var r=(t.stack||"").split("\n").filter((function(e){return!e.match(/croquet-.*\.min.js/)})).join("\n");mt.showMessage("Error during ".concat(e,": ").concat(t.message,"\n\n").concat(r),{level:n,duration:"error"===n?1e4:void 0,stopOnFocus:!0})}function tt(e,t){var r=ht(mt.root,(function(){return document.body}));if(!1===r)return null;!function(){if(!Ae){Ae=!0;var e=document.createElement("style");e.innerHTML="/*!\n        * Toastify js 1.5.0\n        * https://github.com/apvarun/toastify-js\n        * @license MIT licensed\n        *\n        * Copyright (C) 2018 Varun A P\n        */\n        .toastify {\n            padding: 12px 20px;\n            color: #ffffff;\n            display: inline-block;\n            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);\n            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);\n            background: linear-gradient(135deg, #73a5ff, #5477f5);\n            position: fixed;\n            opacity: 0;\n            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n            border-radius: 2px;\n            cursor: pointer;\n            text-decoration: none;\n            max-width: calc(50% - 20px);\n            z-index: 2147483647;\n        }\n        .toastify.on {\n            opacity: 1;\n        }\n        .toast-close {\n            opacity: 0.4;\n            padding: 0 5px;\n        }\n        .toastify-right {\n            right: 15px;\n        }\n        .toastify-left {\n            left: 15px;\n        }\n        .toastify-top {\n            top: -150px;\n        }\n        .toastify-bottom {\n            bottom: -150px;\n        }\n        .toastify-rounded {\n            border-radius: 25px;\n        }\n        .toastify-avatar {\n            width: 1.5em;\n            height: 1.5em;\n            margin: 0 5px;\n            border-radius: 2px;\n        }\n        @media only screen and (max-width: 360px) {\n            .toastify-right, .toastify-left {\n                margin-left: auto;\n                margin-right: auto;\n                left: 0;\n                right: 0;\n                max-width: fit-content;\n            }\n        }\n\n        .toastify {\n            font-family: sans-serif;\n            border-radius: 8px;\n        }\n\n        .toastify-center {\n            margin-left: auto;\n            margin-right: auto;\n            left: 0;\n            right: 0;\n            max-width: fit-content;\n            max-width: -moz-fit-content;\n        }\n",document.head.insertBefore(e,document.head.getElementsByTagName("style")[0])}}();var i,o=n({text:e,duration:3e3,gravity:"bottom",position:"right",stopOnFocus:!0},t);return r instanceof Element&&r!==document.body?(i=r.id)||(r.id=i="_croquetToastParent"):"string"==typeof r&&(i=r),i&&(o.selector=i),E(o).showToast()}try{if((Be=window.localStorage)["croquet-debug-persist-allowed"]="true","true"!==Be["croquet-debug-persist-allowed"])throw Error("localStorage not persisted");delete Be["croquet-debug-persist-allowed"]}catch(Qs){console.warn("localStorage not allowed"),Be={}}var nt,rt,it={get pinned(){return"true"===Be[window.location.pathname+"/croquet-debug-ui-pinned"]},set pinned(e){Be[window.location.pathname+"/croquet-debug-ui-pinned"]=!!e},get activePage(){return Be[window.location.pathname+"/croquet-debug-ui-activePage"]},set activePage(e){Be[window.location.pathname+"/croquet-debug-ui-activePage"]=e}},ot=function(e){e.preventDefault(),e.stopPropagation()};function st(e,t,n){var r=document.createElement("canvas"),i=r.width=40*Je/12,o=r.height=60,s=r.getContext("2d");s.font="36px Arial",s.textAlign="center",s.textBaseline="middle",s.fillStyle="black",s.fillText(e,i/2,.55*o);var a=document.createElement("button");a.id=t,a.className="croquet_dock_button";var c=function(e){e.preventDefault(),e.stopPropagation(),n()};return _e?(a.ontouchstart=c,a.ontouchend=ot,a.onpointerdown=ot,a.onpointerup=ot):(a.onclick=c,a.onpointerdown=ot,a.onpointerup=ot),a.appendChild(r),a}function at(e,t){if(!1!==mt.badge){var n=function(e){for(var t=new J(e),n=["bcdfghjklmnpqrstvwxyz","aeiou"],r="",i=0;i<5;i++)r+=n[i%2][t.quick()*n[i%2].length|0];return r}(t);for(document.title=document.title.replace(/:.*/,""),document.title+=":"+n;e.firstChild;)e.removeChild(e.firstChild);var r=document.createElement("canvas"),i=r.width=120,o=r.height=40;r.style.width="100%",e.appendChild(r);var s=r.getContext("2d"),a=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new J(e),r=[],i=0;i<t;i++)r.push("hsl(".concat(360*n.quick(),", 50%, 70%)"));return r}(t,2);s.fillStyle=a[0],s.beginPath(),s.moveTo(0,0),s.lineTo(0,o),s.lineTo(i,0),s.closePath(),s.fill(),s.fillStyle=a[1],s.beginPath(),s.moveTo(i,o),s.lineTo(i,0),s.lineTo(0,o),s.closePath(),s.fill(),s.font="30px Arial",s.textAlign="center",s.textBaseline="middle",s.fillStyle="black",s.fillText(n,i/2,o/2)}}function ct(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.firstChild;)e.removeChild(e.firstChild);return new U(e,n({text:t,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:U.CorrectLevel.L},r))}function lt(){if(!1!==mt.root&&!1!==mt.qrcode&&!F.noqr){var e=mt.sessionURL;if(e){var t=ht(mt.qrcode);if(t)_e||(t.onclick=function(t){var n;t.preventDefault(),t.stopPropagation(),t.shiftKey?(n=document.getElementById("croquet_dock"))&&n.classList.toggle("debug"):window.open(e)}),ct(t,e).getCanvas().style.width="100%"}else console.warn("App.sessionURL is not set")}}var ut=0;function dt(){!function(){if(!De){De=!0;var e="\n        ".concat(je?"body { min-height: 100vh }":"","\n        #croquet_spinnerOverlay {\n            z-index: 1000;\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color:#333;\n            opacity:0.9;\n            display:flex;\n            align-items:center;\n            justify-content:center;\n            transition: opacity 1.0s ease-out;\n        }\n        /* https://github.com/lukehaas/css-loaders */\n        @keyframes croquet_dots {\n            0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em; }\n            40% { box-shadow: 0 2.5em 0 0; }\n        }\n        #croquet_loader,\n        #croquet_loader::before,\n        #croquet_loader::after {\n          border-radius: 50%;\n          width: 2.5em;\n          height: 2.5em;\n          animation: croquet_dots 1.8s infinite ease-in-out;\n        }\n        #croquet_loader {\n          color: #fff;\n          font-size: 10px;\n          margin: 80px auto;\n          position: relative;\n          text-indent: -9999em;\n          animation-delay: -0.16s;\n        }\n        #croquet_loader::before,\n        #croquet_loader::after {\n          content: '';\n          position: absolute;\n          top: 0;\n        }\n        #croquet_loader::before { left: -3.5em; animation-delay: -0.32s; }\n        #croquet_loader::after { left: 3.5em; }\n        #croquet_spinnerOverlay.croquet_error>*,\n        #croquet_spinnerOverlay.croquet_error>*::before,\n        #croquet_spinnerOverlay.croquet_error>*::after {\n            color: #f00;\n        }\n        #croquet_spinnerOverlay.croquet_fatal>*,\n        #croquet_spinnerOverlay.croquet_fatal>*::before,\n        #croquet_spinnerOverlay.croquet_fatal>*::after {\n            color: #f00;\n            box-shadow: 0 2.5em 0 0 !important;\n            animation: none !important;\n        }\n"),t=document.createElement("style");t.innerHTML=e,document.head.insertBefore(t,document.head.getElementsByTagName("style")[0])}}();var e=document.createElement("div");e.id="croquet_spinnerOverlay";var t=document.createElement("div");return t.id="croquet_loader",t.innerText="Catching up...",e.appendChild(t),e}function ht(e,t){if(!1===e)return!1;if(e instanceof Element)return e;if("string"==typeof e){var n=document.getElementById(e);if(n)return n}return t?t():null}var ft=new Set,mt={sessionURL:function(){var e,t=null,n=C(document.getElementsByTagName("link"));try{for(n.s();!(e=n.n()).done;){var r=e.value;if("canonical"===r.getAttribute("rel")){t=r.getAttribute("href");break}}}catch(e){n.e(e)}finally{n.f()}return t||window.location.href}(),root:null,sync:!0,messages:!1,badge:!1,stats:!1,qrcode:!1,makeWidgetDock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!F.nodock){var t=e.debug||F.debug,n=document.getElementById("croquet_dock");n&&n.parentElement.removeChild(n);var r=ht(mt.root,(function(){return document.body}));if(r){Oe();var i=document.createElement("div");i.id="croquet_dock",t&&i.classList.add("debug"),je&&!e.iframe&&(i.style.display="none"),r.appendChild(i);var o,s=document.createElement("div");s.id="croquet_dock_bar",i.appendChild(s),!1!==e.badge&&((o=document.createElement("div")).id="croquet_badge",s.appendChild(o),mt.badge=o);var a=document.createElement("div");a.id="croquet_dock_content",i.appendChild(a);var c,l,u=[];if(!1!==e.qrcode){var d=mt.sessionURL;d&&((c=document.createElement("div")).id="croquet_qrcode",a.appendChild(c),u.push(c.id),mt.qrcode=c,t||(it.activePage=c.id))}if(!1!==e.stats&&((l=document.createElement("div")).id="croquet_stats",a.appendChild(l),u.push(l.id),mt.stats=l),u.length){var h=function(e){var t,n=u.length,r=0;if(it.activePage){var i=u.indexOf(it.activePage);i>=0?(r=i,t=document.getElementById(it.activePage)):it.activePage=null}var o,s=u[(r+n+e)%n];s===it.activePage?o=t:(t&&t.classList.remove("active"),o=document.getElementById(s)),o&&o.classList.add("active"),it.activePage=s};u.length>1&&(s.appendChild(st("<","croquet_dock_left",(function(){return h(-1)}))),s.appendChild(st(">","croquet_dock_right",(function(){return h(1)})))),h(0)}if(!_e&&!e.alwaysPinned){var f=st("📌","croquet_dock_pin",(function(){it.pinned=!it.pinned,m()})),m=function(){it.pinned?f.classList.add("pinned"):f.classList.remove("pinned")};m(),s.appendChild(f)}var p=200,y=166,b=8,v=function(e){i.style.width="".concat(e,"px");var t=1.18*e;i.style.height="".concat(t,"px");var n=18*e/100;s.style.height="".concat(n,"px"),a.style.top="".concat(n+2,"px"),o&&(o.style.height="".concat(.9*n,"px"),o.style.width="".concat(.9*n*3,"px")),c&&(c.style.border="".concat(b*e/p,"px solid white"))},g=function(){i.style.width=i.style.height="",s.style.height="",a.style.top="",o&&(o.style.height=o.style.width=""),c&&(c.style.border="")},Z=e.fixedSize||p,X=function(){return i.classList.contains("active")},w=function(){i.classList.add("active"),v(Z),setTimeout((function(){return i.style.transition="none"}),300)},L=function(){i.style.transition="",i.classList.remove("active"),g()};if(_e)L(),i.ontouchstart=function(e){e.preventDefault(),e.stopPropagation(),X()?L():w()},i.ontouchend=ot,i.onpointerdown=ot,i.onpointerup=ot;else if(e.alwaysPinned?w():(it.pinned?w():L(),i.onmouseenter=w,i.onmouseleave=function(){it.pinned||L()}),!e.fixedSize){var x=0;i.addEventListener("wheel",(function(e){e.stopPropagation();var t=Date.now();if(!(t-x<100)){x=t;var n=e.deltaY;n=Math.sign(n)*Math.min(5,Math.abs(n));var r=.8*Math.min(window.innerWidth,window.innerHeight);Z=Math.max(y,Math.min(r,i.offsetWidth/Math.pow(1.05,n))),v(Z)}}),{passive:!0})}}}},makeSessionWidgets:function(e){!function(e){if(e&&!1!==mt.root){var t=ht(mt.badge);t&&at(t,e)}}(e),lt(),function(){if(!1!==mt.root&&!F.nostats){var e=ht(mt.stats);e&&Te(e)}}()},makeQRCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!mt.sessionURL)return null;var t=document.createElement("div"),n=ct(t,mt.sessionURL,e);return n&&n.getCanvas()},clearSessionMoniker:function(){!1!==mt.badge&&(document.title=document.title.replace(/:.*/,""))},showSyncWait:function(e){!1===mt.root?e=!1:nt||(nt=dt()),function(e){if(rt!==e&&("string"!=typeof rt||!0!==e))if(!1===mt.sync&&(e=!1),rt=e,e)clearTimeout(ut),ut=setTimeout((function(){rt&&(ht(mt.root,(function(){return document.body})).appendChild(nt),nt.style.opacity=.9,nt.className="error"===rt?"croquet_error":"fatal"===rt?"croquet_fatal":"")}),500);else{if(!nt)return;clearTimeout(ut),nt.style.opacity=0,nt.className="",ut=setTimeout((function(){rt||nt.parentElement&&nt.parentElement.removeChild(nt)}),500)}}(e)},messageFunction:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.level;return"error"===i?(t="orangered,red",console.error(e)):"warning"===i?(t="gold,orange",console.warn(e)):t="silver,gray",tt(e,n({style:{background:"linear-gradient(90deg,".concat(t,")")}},r))},showMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("once"===t.only){if(ft.has(e))return null;ft.add(e)}return"fatal"===t.level&&(t.level="error",t.showSyncWait="fatal"),t.showSyncWait&&("fatal"!==t.showSyncWait||t.duration||(t.duration=-1),mt.showSyncWait(t.showSyncWait)),F.nomessages||!1===mt.root||!1===mt.messages||!mt.messageFunction?("warning"===t.level&&console.warn(e),"error"===t.level&&console.error(e),null):mt.messageFunction(e,t)},isCroquetHost:function(e){return e.endsWith("croquet.io")||["localhost","127.0.0.1","[::1]"].includes(e)||e.endsWith("ngrok.io")},referrerURL:function(){var e=new URL(mt.sessionURL),t=this.isCroquetHost(e.hostname);return"".concat(e.protocol,"//").concat(e.host).concat(e.pathname).concat(t?e.search:"")},autoSession:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"q"};"string"==typeof e&&(e={key:e}),e||(e={});var t=e.key||"q",n=new URL(mt.sessionURL),r="",i=n.search.slice(1).split("&"),o=i.find((function(e){return e.split("=")[0]===t}));if(o?r=o.replace(/[^=]*=/,""):(r=i.find((function(e){return!e.includes("=")})))||(r=n.hash.slice(1))&&(n.hash="",n.search?n.searchParams.set(t,r):n.search=r),r)try{r=decodeURIComponent(r)}catch(e){}else r=Math.floor(Math.random()*Math.pow(36,10)).toString(36),n.searchParams.set(t,r);var s=n.toString("");window.location.href!==s&&(window.history.replaceState({},"",s),mt.sessionURL=s),F.has("debug","session")&&console.log('Croquet.App.autoSession: "'.concat(r,'"'));var a=Promise.resolve(r);return a[Symbol.toPrimitive]=function(){return console.warn("Deprecated: Croquet.App.autoSession() return value used directly. It returns a promise now!"),r},a},autoPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"pw",scrub:!1,keyless:!1},t=e.key||"pw",n=e.scrub&&!F.has("debug","password"),r=e.keyless,i=new URL(mt.sessionURL),o="",s=i.hash.slice(1);if(s){var a=s.split("&"),c=a.find((function(e){return e.split("=")[0]===t}));c?(o=c.replace(/[^=]*=/,""))&&n&&(i.hash=a.filter((function(e){return e.split("=")[0]!==t})).join("&")):r&&(o=a.find((function(e){return!e.includes("=")})))&&n&&(i.hash=a.filter((function(e){return e!==o})).join("&"))}if(!o){var l=new Uint8Array(16);window.crypto.getRandomValues(l),o=ie(l.buffer),i.hash=s?"".concat(s,"&").concat(t,"=").concat(o):r?o:"".concat(t,"=").concat(o),mt.sessionURL=i.href,n&&(i.hash=s)}if(F.has("debug","session")&&console.log("Croquet.App.sessionUrl: ".concat(mt.sessionURL)),window.location.href!==i.href&&window.history.replaceState({},"",i.href),o)try{o=decodeURIComponent(o)}catch(e){}F.has("debug","session")&&console.log('Croquet.App.autoPassword: "'.concat(o,'"'));var u=Promise.resolve(o);return u[Symbol.toPrimitive]=function(){return console.warn("Deprecated: Croquet.App.autoPassword() return value used directly. It returns a promise now!"),o},u}},pt="#__vote",yt=function(){function e(){var t;s(this,e),this.subscriptions={},this.queuedEvents=[],this.perFrameEvents=new Map,this.perSyncedFrameEvents=new Map,this.id=(t=function(){return crypto.getRandomValues(new Uint8Array(1))[0]},([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^t()&15>>e/4).toString(16)}))),this.lastId=0}return c(e,[{key:"register",value:function(e){return"V"+ ++this.lastId}},{key:"deregister",value:function(e){}},{key:"addSubscription",value:function(e,t,n,r,i){if("vote"!==i){var o=e+":"+t,s=r;s.for=n;var a=this.subscriptions[o];if(a||(a=this.subscriptions[o]={immediate:new Set,queued:new Set,oncePerFrame:new Set,oncePerFrameWhileSynced:new Set}),!a[i])throw Error('Unknown subscribe() option: handling="'.concat(i,'"'));a[i].add(s)}else this.addSubscription(e,t+pt,n,r,"immediate")}},{key:"removeSubscription",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e+":"+t,o=this.subscriptions[i];if(o){var s=bt(o,n,r);0===s&&delete this.subscriptions[i]}t.endsWith(pt)||this.removeSubscription(e,t+pt,n)}},{key:"removeAllSubscriptionsFor",value:function(e){for(var t="".concat(e,":"),n=0,r=Object.entries(this.subscriptions);n<r.length;n++){var i=X(r[n],2),o=i[0],s=i[1];if(o.startsWith(t))delete this.subscriptions[o];else 0===bt(s,e)&&delete this.subscriptions[o]}}},{key:"handleEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e()},r=this.subscriptions[e];r&&(r.queued.size>0&&this.queuedEvents.push({topic:e,data:t}),r.oncePerFrame.size>0&&this.perFrameEvents.set(e,t),r.oncePerFrameWhileSynced.size>0&&this.perSyncedFrameEvents.set(e,t),r.immediate.size>0&&n((function(){var n,i=C(r.immediate);try{for(i.s();!(n=i.n()).done;){var o=n.value;try{o(t)}catch(t){console.error(t),console.warn('Croquet: error "'.concat(t.message,'" in "immediate" subscription ').concat(e))}}}catch(e){i.e(e)}finally{i.f()}})))}},{key:"processFrameEvents",value:function(e,t){var n,r=this,i=0,o=function(e,t,n){var o=r.subscriptions[e];if(o){var s,a=C(o[n]);try{for(a.s();!(s=a.n()).done;){var c=s.value;try{c(t)}catch(t){console.error(t),console.warn('Croquet: error "'.concat(t.message,'" in "').concat(n,'" subscription ').concat(e))}i++}}catch(e){a.e(e)}finally{a.f()}}},s=C(this.queuedEvents);try{for(s.s();!(n=s.n()).done;){var a=n.value;o(a.topic,a.data,"queued")}}catch(e){s.e(e)}finally{s.f()}if(this.queuedEvents.length=0,e){var c,l=C(this.perFrameEvents);try{for(l.s();!(c=l.n()).done;){var u=X(c.value,2);o(u[0],u[1],"oncePerFrame")}}catch(e){l.e(e)}finally{l.f()}if(this.perFrameEvents.clear(),t){var d,h=C(this.perSyncedFrameEvents);try{for(h.s();!(d=h.n()).done;){var f=X(d.value,2);o(f[0],f[1],"oncePerFrameWhileSynced")}}catch(e){h.e(e)}finally{h.f()}this.perSyncedFrameEvents.clear()}var m,p=C(this.queuedEvents);try{for(p.s();!(m=p.n()).done;){var y=m.value;o(y.topic,y.data,"queued")}}catch(e){p.e(e)}finally{p.f()}this.queuedEvents.length=0}return i}}]),e}();function bt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function r(e){var r,i=C(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;(null!==n&&o.unbound===n||null===n&&o.for===t)&&e.delete(o)}}catch(e){i.e(e)}finally{i.f()}}return r(e.immediate),r(e.oncePerFrame),r(e.oncePerFrameWhileSynced),r(e.queued),e.immediate.size+e.queued.size+e.oncePerFrame.size+e.oncePerFrameWhileSynced.size}var vt=new yt;var gt={get subscribe(){return(gt={subscribe:F.has("debug","subscribe",!1)}).subscribe}},Zt=function(){function e(t){s(this,e),this.vm=t}return c(e,[{key:"register",value:function(e){return this.vm.registerModel(e)}},{key:"deregister",value:function(e){this.vm.deregisterModel(e.id)}},{key:"publish",value:function(e,t,n){this.vm.publishFromModel(n,e,t)}},{key:"subscribe",value:function(e,t,n,r){return gt.subscribe&&console.log('Model.subscribe("'.concat(t,":").concat(n,'", ').concat(e," ").concat((""+r).replace(/\([\s\S]*/,""),")")),this.vm.addSubscription(e,t,n,r)}},{key:"unsubscribe",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";gt.subscribe&&console.log("Model.unsubscribe(".concat(t,":").concat(n,'", ').concat(e," ").concat((""+r).replace(/\([\s\S]*/,""),")")),this.vm.removeSubscription(e,t,n,r)}},{key:"unsubscribeAll",value:function(e){gt.subscribe&&console.log("Model.unsubscribeAll(".concat(e," ").concat(e.id,")")),this.vm.removeAllSubscriptionsFor(e)}},{key:"future",value:function(e,t,n,r){if(wt&&wt.equal(this))return this.vm.future(e,t,n,r);throw Error("Model.future() called from outside: ".concat(e))}},{key:"random",value:function(){return this.vm.random()}},{key:"now",value:function(){return this.vm.time}},{key:"equal",value:function(t){return t instanceof e&&t.vm===this.vm}},{key:"isViewRealm",value:function(){return!1}}]),e}(),Xt=function(){function e(t){s(this,e),this.vm=t}return c(e,[{key:"register",value:function(e){return vt.register(e)}},{key:"deregister",value:function(e){vt.deregister(e)}},{key:"publish",value:function(e,t,n){this.vm.publishFromView(n,e,t)}},{key:"subscribe",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"queued";gt.subscribe&&console.log('View.subscribe("'.concat(r,":").concat(e,'", ').concat(t," ").concat(n?n.name||(""+n).replace(/\([\s\S]*/,""):""+n," [").concat(i,"])")),vt.addSubscription(r,e,t,n,i)}},{key:"unsubscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;gt.subscribe&&console.log('View.unsubscribe("'.concat(r,":").concat(e,'", ').concat(t," ").concat(n?n.name||(""+n).replace(/\([\s\S]*/,""):"*",")")),vt.removeSubscription(r,e,t,n)}},{key:"unsubscribeAll",value:function(e){gt.subscribe&&console.log("View.unsubscribeAll(".concat(e,")")),vt.removeAllSubscriptionsFor(e)}},{key:"future",value:function(e,t){var n=this.vm;return new Proxy(e,{get:function(r,i){if("function"==typeof e[i])return new Proxy(e[i],{apply:function(r,o,s){setTimeout((function(){e.id&&Gt(n,(function(){return e[i].apply(e,L(s))}),!0)}),t)}});throw Error("Tried to call "+i+"() on future of "+Object.getPrototypeOf(e).constructor.name+" which is not a function")}})}},{key:"random",value:function(){return Math.random()}},{key:"now",value:function(){return this.vm.time}},{key:"externalNow",value:function(){return this.vm.controller.reflectorTime}},{key:"extrapolatedNow",value:function(){return this.vm.controller.extrapolatedTime}},{key:"isSynced",value:function(){return!!this.vm.controller.synced}},{key:"equal",value:function(t){return t instanceof e&&t.vm===this.vm}},{key:"isViewRealm",value:function(){return!0}}]),e}(),wt=null;function Lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tried to execute code that requires realm outside of realm.";if(!wt&&e)throw Error(e);return wt}function xt(e,t){if(null!==wt)throw Error("Can't switch realms from inside realm");try{return wt=new Zt(e),t()}finally{wt=null}}function Gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==wt&&!n)throw Error("Can't switch realms from inside realm");var r=wt;try{return wt=new Xt(e),t()}finally{wt=r}}var kt=function(e){return e!=e},St=Math.sqrt,Wt=.7853981633974483;var Ct=function(e){var t,n;return 0===e?.16666666666666713:((e<0?-e:e)<=1?(t=e*(19.562619833175948+e*(e*(5.444622390564711+e*(.004253011369004428*e-.6019598008014124))-16.262479672107002))-8.198089802484825,n=e*(139.51056146574857+e*(e*(70.49610280856842+e*(1*e-14.740913729888538))-147.1791292232726))-49.18853881490881):(t=.004253011369004428+(e=1/e)*(e*(5.444622390564711+e*(e*(19.562619833175948+-8.198089802484825*e)-16.262479672107002))-.6019598008014124),n=1+e*(e*(70.49610280856842+e*(e*(139.51056146574857+-49.18853881490881*e)-147.1791292232726))-14.740913729888538)),t/n)};var Tt=function(e){var t,n;return 0===e?.08333333333333809:((e<0?-e:e)<=1?(t=28.536655482610616+e*(e*(6.968710824104713+e*(.002967721961301243*e-.5634242780008963))-25.56901049652825),n=342.43986579130785+e*(e*(147.0656354026815+e*(1*e-21.947795316429207))-383.8770957603691)):(t=.002967721961301243+(e=1/e)*(e*(6.968710824104713+e*(28.536655482610616*e-25.56901049652825))-.5634242780008963),n=1+e*(e*(147.0656354026815+e*(342.43986579130785*e-383.8770957603691))-21.947795316429207)),t/n)};var Yt=function(e){var t,n,r,i,o;if(kt(e))return NaN;if(e>0?r=e:(t=!0,r=-e),r>1)return NaN;if(r>.625)i=(n=1-r)*Tt(n),n=St(n+n),o=Wt-n,o-=n=n*i-6123233995736766e-32,o+=Wt;else{if(r<1e-8)return e;o=r*(o=(n=r*r)*Ct(n))+r}return t?-o:o};var Rt=function(e){var t;return kt(e)||e<-1||e>1?NaN:e>.5?2*Yt(St(.5-.5*e)):(t=Wt-Yt(e),t+=6123233995736766e-32,t+=Wt)};var Pt=function(){return"function"==typeof Symbol&&"symbol"===r(Symbol("foo"))}();var Vt=function(){return Pt&&"symbol"===r(Symbol.toStringTag)},Kt=Object.prototype.toString;var It=function(e){return Kt.call(e)},Mt=Object.prototype.hasOwnProperty;var Nt=function(e,t){return null!=e&&Mt.call(e,t)},Ht="function"==typeof Symbol?Symbol.toStringTag:"";var Ft=function(e){var t,n,r;if(null==e)return Kt.call(e);n=e[Ht],t=Nt(e,Ht);try{e[Ht]=void 0}catch(t){return Kt.call(e)}return r=Kt.call(e),t?e[Ht]=n:delete e[Ht],r},zt=Vt()?Ft:It,Et="function"==typeof Uint32Array;var _t=function(e){return Et&&e instanceof Uint32Array||"[object Uint32Array]"===zt(e)},jt=4294967295,Jt="function"==typeof Uint32Array?Uint32Array:null;var Ut=function(){var e,t;if("function"!=typeof Jt)return!1;try{t=new Jt(t=[1,3.14,-3.14,jt+1,jt+2]),e=_t(t)&&1===t[0]&&3===t[1]&&t[2]===jt-2&&0===t[3]&&1===t[4]}catch(t){e=!1}return e},Qt="function"==typeof Uint32Array?Uint32Array:null;var Ot=function(){throw new Error("not implemented")},Dt=Ut()?Qt:Ot,Bt="function"==typeof Float64Array;var At=function(e){return Bt&&e instanceof Float64Array||"[object Float64Array]"===zt(e)},qt="function"==typeof Float64Array?Float64Array:null;var $t=function(){var e,t;if("function"!=typeof qt)return!1;try{t=new qt([1,3.14,-3.14,NaN]),e=At(t)&&1===t[0]&&3.14===t[1]&&-3.14===t[2]&&t[3]!=t[3]}catch(t){e=!1}return e},en="function"==typeof Float64Array?Float64Array:null;var tn=function(){throw new Error("not implemented")},nn=$t()?en:tn,rn="function"==typeof Uint8Array;var on=function(e){return rn&&e instanceof Uint8Array||"[object Uint8Array]"===zt(e)},sn="function"==typeof Uint8Array?Uint8Array:null;var an=function(){var e,t;if("function"!=typeof sn)return!1;try{t=new sn(t=[1,3.14,-3.14,256,257]),e=on(t)&&1===t[0]&&3===t[1]&&253===t[2]&&0===t[3]&&1===t[4]}catch(t){e=!1}return e},cn="function"==typeof Uint8Array?Uint8Array:null;var ln=function(){throw new Error("not implemented")},un=an()?cn:ln,dn="function"==typeof Uint16Array;var hn=function(e){return dn&&e instanceof Uint16Array||"[object Uint16Array]"===zt(e)},fn="function"==typeof Uint16Array?Uint16Array:null;var mn=function(){var e,t;if("function"!=typeof fn)return!1;try{t=new fn(t=[1,3.14,-3.14,65536,65537]),e=hn(t)&&1===t[0]&&3===t[1]&&65533===t[2]&&0===t[3]&&1===t[4]}catch(t){e=!1}return e},pn="function"==typeof Uint16Array?Uint16Array:null;var yn,bn=function(){throw new Error("not implemented")},vn={uint16:mn()?pn:bn,uint8:un};(yn=new vn.uint16(1))[0]=4660;var gn=52===new vn.uint8(yn.buffer)[0],Zn=!0===gn?1:0,Xn=new nn(1),wn=new Dt(Xn.buffer);var Ln=function(e){return Xn[0]=e,wn[Zn]},xn=!0===gn?1:0,Gn=new nn(1),kn=new Dt(Gn.buffer);var Sn=function(e,t){return Gn[0]=e,kn[xn]=t>>>0,Gn[0]},Wn=Sn,Cn=Number.POSITIVE_INFINITY,Tn=Number.NEGATIVE_INFINITY,Yn=1023;var Rn=function(e){return 0===e?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+.14798198605116586*e)))))},Pn=.6931471803691238,Vn=1.9082149292705877e-10;var Kn=function(e){var t,n,r,i,o,s,a,c,l,u;if(e<-1||kt(e))return NaN;if(-1===e)return Tn;if(e===Cn)return e;if(0===e)return e;if(u=1,(r=e<0?-e:e)<.41421356237309503){if(r<1.862645149230957e-9)return r<5551115123125783e-32?e:e-e*e*.5;e>-.2928932188134525&&(u=0,i=e,n=1)}return 0!==u&&(r<9007199254740992?(o=(u=((n=Ln(l=1+e))>>20)-Yn)>0?1-(l-e):e-(l-1),o/=l):(u=((n=Ln(l=e))>>20)-Yn,o=0),(n&=1048575)<434334?l=Wn(l,1072693248|n):(u+=1,l=Wn(l,1071644672|n),n=1048576-n>>2),i=l-1),t=.5*i*i,0===n?0===i?u*Pn+(o+=u*Vn):u*Pn-((c=t*(1-.6666666666666666*i))-(u*Vn+o)-i):(c=(a=(s=i/(2+i))*s)*Rn(a),0===u?i-(t-s*(t+c)):u*Pn-(t-(s*(t+c)+(u*Vn+o))-i))},In=.6931471805599453;var Mn=function(e){return 0===e?.3999999999940942:.3999999999940942+e*(.22222198432149784+.15313837699209373*e)};var Nn=function(e){return 0===e?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+.14798198605116586*e))},Hn=.6931471803691238,Fn=1.9082149292705877e-10,zn=1048575;var En=function(e){var t,n,r,i,o,s,a,c,l,u,d;return 0===e?Tn:kt(e)||e<0?NaN:(i=0,(n=Ln(e))<1048576&&(i-=54,n=Ln(e*=0x40000000000000)),n>=2146435072?e+e:(i+=(n>>20)-Yn|0,i+=(a=(n&=zn)+614244&1048576|0)>>20|0,s=(e=Wn(e,n|1072693248^a))-1,(zn&2+n)<3?0===s?0===i?0:i*Hn+i*Fn:(o=s*s*(.5-.3333333333333333*s),0===i?s-o:i*Hn-(o-i*Fn-s)):(a=n-398458|0,c=440401-n|0,r=(u=(d=(l=s/(2+s))*l)*d)*Mn(u),o=d*Nn(u)+r,(a|=c)>0?(t=.5*s*s,0===i?s-(t-l*(t+o)):i*Hn-(t-(l*(t+o)+i*Fn)-s)):0===i?s-l*(s-o):i*Hn-(l*(s-o)-i*Fn-s))))},_n=En;var jn=function(e){var t;return kt(e)||e<1?NaN:1===e?0:e>=268435456?_n(e)+In:e>2?_n(2*e-1/(e+St(e*e-1))):Kn((t=e-1)+St(2*t+t*t))};var Jn=function(e){return e===Cn||e===Tn};var Un=function(e){var t,n,r;return kt(e)||Jn(e)?e:(e<0&&(e=-e,t=!0),r=e<3.725290298461914e-9?e:e>268435456?_n(e)+In:e>2?_n(2*e+1/(St(e*e+1)+e)):Kn(e+(n=e*e)/(1+St(1+n))),t?-r:r)},Qn=1.5707963267948966;var On=function(e){return 0===e?-64.85021904942025:e*(e*(e*(-.8750608600031904*e-16.157537187333652)-75.00855792314705)-122.88666844901361)-64.85021904942025};var Dn=function(e){return 0===e?194.5506571482614:194.5506571482614+e*(485.3903996359137+e*(432.88106049129027+e*(165.02700983169885+e*(24.858464901423062+1*e))))},Bn=6123233995736766e-32;var An=function(e){var t,n,r,i;return kt(e)||0===e?e:e===Cn?Qn:e===Tn?-Qn:(e<0&&(n=!0,e=-e),t=0,e>2.414213562373095?(r=Qn,t=1,e=-1/e):e<=.66?r=0:(r=Wt,t=2,e=(e-1)/(e+1)),i=e*(i=(i=e*e)*On(i)/Dn(i))+e,2===t?i+=.5*Bn:1===t&&(i+=Bn),r+=i,n?-r:r)};var qn,$n,er=function(e){var t,n;return kt(e)||e<-1||e>1?NaN:1===e?Cn:-1===e?Tn:(e<0&&(t=!0,e=-e),e<3.725290298461914e-9?t?-e:e:(n=e<.5?.5*Kn((n=e+e)+n*e/(1-e)):.5*Kn((e+e)/(1-e)),t?-n:n))};!0===gn?(qn=1,$n=0):(qn=0,$n=1);var tr={HIGH:qn,LOW:$n},nr=new nn(1),rr=new Dt(nr.buffer),ir=tr.HIGH,or=tr.LOW;var sr=function(e,t){return nr[0]=t,e[0]=rr[ir],e[1]=rr[or],e};var ar,cr,lr=function(e,t){return 1===arguments.length?sr([0,0],e):sr(e,t)},ur=lr;!0===gn?(ar=1,cr=0):(ar=0,cr=1);var dr={HIGH:ar,LOW:cr},hr=new nn(1),fr=new Dt(hr.buffer),mr=dr.HIGH,pr=dr.LOW;var yr=function(e,t){return fr[mr]=e,fr[pr]=t,hr[0]},br=yr,vr=[0,0];var gr=function(e,t){var n,r;return ur(vr,e),n=vr[0],n&=2147483647,r=Ln(t),br(n|=r&=2147483648,vr[1])};var Zr=function(e){return!!(Ln(e)>>>31)},Xr=3.141592653589793;var wr=function(e,t){var n;return kt(t)||kt(e)?NaN:Jn(t)?t===Cn?Jn(e)?gr(Xr/4,e):gr(0,e):Jn(e)?gr(3*Xr/4,e):gr(Xr,e):Jn(e)?gr(Xr/2,e):0===e?t>=0&&!Zr(t)?gr(0,e):gr(Xr,e):0===t?gr(Xr/2,e):(n=An(e/t),t<0?n<=0?n+Xr:n-Xr:n)},Lr=wr,xr=22250738585072014e-324;var Gr=function(e){return 0===e?1.87595182427177:1.87595182427177+e*(e*(1.6214297201053545+e*(.14599619288661245*e-.758397934778766))-1.8849797954337717)},kr=2147483647;var Sr=function(e){var t,n,r,i,o;return kt(e)||Jn(e)||0===e?e:(n=-2147483648&(r=Ln(e)),r&=kr,o=0,e<xr?(o=0x40000000000000,t=Ln(o*=e),o=br(n|(t=(t&kr)/3+696219795),0)):o=Wn(o,n|(t=r/3+715094163)),o*=Gr(i=o*o*(o/e)),t=Ln(o),o=br(t+1,0),o+=o*(i=((i=e/(o*o))-o)/(o+o+i)))},Wr=Sr;var Cr=function(e){return 0===e?.0416666666666666:.0416666666666666+e*(2480158728947673e-20*e-.001388888888887411)};var Tr=function(e){return 0===e?-2.7557314351390663e-7:e*(2.087572321298175e-9+-11359647557788195e-27*e)-2.7557314351390663e-7};var Yr=function(e,t){var n,r,i,o;return i=(o=e*e)*o,r=o*Cr(o),r+=i*i*Tr(o),(i=1-(n=.5*o))+(1-i-n+(o*r-e*t))},Rr=-.16666666666666632;var Pr=function(e,t){var n,r,i;return n=.00833333333332249+(i=e*e)*(27557313707070068e-22*i-.0001984126982985795)+i*(i*i)*(1.58969099521155e-10*i-2.5050760253406863e-8),r=i*e,0===t?e+r*(Rr+i*n):e-(i*(.5*t-r*n)-t-r*Rr)},Vr=!0===gn?0:1,Kr=new nn(1),Ir=new Dt(Kr.buffer);var Mr=function(e){return Kr[0]=e,Ir[Vr]},Nr=Math.floor;var Hr=function(e){return e<0?-e:0===e?0:e};var Fr=function(e,t){return kt(t)||Jn(t)?(e[0]=t,e[1]=0,e):0!==t&&Hr(t)<xr?(e[0]=4503599627370496*t,e[1]=-52,e):(e[0]=t,e[1]=0,e)};var zr=function(e,t){return 1===arguments.length?Fr([0,0],e):Fr(e,t)},Er=zr;var _r=function(e){var t=Ln(e);return(t=(2146435072&t)>>>20)-Yn|0},jr=_r,Jr=[0,0],Ur=[0,0];var Qr=function(e,t){var n,r;return 0===e||kt(e)||Jn(e)?e:(Er(Jr,e),t+=Jr[1],(t+=jr(e=Jr[0]))<-1074?gr(0,e):t>1023?e<0?Tn:Cn:(t<=-1023?(t+=52,r=2220446049250313e-31):r=1,ur(Ur,e),n=Ur[0],n&=2148532223,r*br(n|=t+Yn<<20,Ur[1])))},Or=Qr,Dr=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],Br=[1.570796251296997,7.549789415861596e-8,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Ar=16777216,qr=5.960464477539063e-8,$r=ri(new Array(20)),ei=ri(new Array(20)),ti=ri(new Array(20)),ni=ri(new Array(20));function ri(e){var t,n=e.length;for(t=0;t<n;t++)e[t]=0;return e}function ii(e,t,n,r,i,o,s,a,c){var l,u,d,h,f,m,p,y,b;for(h=o,b=r[n],y=n,f=0;y>0;f++)u=qr*b|0,ni[f]=b-Ar*u|0,b=r[y-1]+u,y-=1;if(b=Or(b,i),b-=8*Nr(.125*b),b-=p=0|b,d=0,i>0?(p+=f=ni[n-1]>>24-i,ni[n-1]-=f<<24-i,d=ni[n-1]>>23-i):0===i?d=ni[n-1]>>23:b>=.5&&(d=2),d>0){for(p+=1,l=0,f=0;f<n;f++)y=ni[f],0===l?0!==y&&(l=1,ni[f]=16777216-y):ni[f]=16777215-y;if(i>0)switch(i){case 1:ni[n-1]&=8388607;break;case 2:ni[n-1]&=4194303}2===d&&(b=1-b,0!==l&&(b-=Or(1,i)))}if(0===b){for(y=0,f=n-1;f>=o;f--)y|=ni[f];if(0===y){for(m=1;0===ni[o-m];m++);for(f=n+1;f<=n+m;f++){for(c[a+f]=Dr[s+f],u=0,y=0;y<=a;y++)u+=e[y]*c[a+(f-y)];r[f]=u}return ii(e,t,n+=m,r,i,o,s,a,c)}}if(0===b)for(n-=1,i-=24;0===ni[n];)n-=1,i-=24;else(b=Or(b,-i))>=Ar?(u=qr*b|0,ni[n]=b-Ar*u|0,i+=24,ni[n+=1]=u):ni[n]=0|b;for(u=Or(1,i),f=n;f>=0;f--)r[f]=u*ni[f],u*=qr;for(f=n;f>=0;f--){for(u=0,m=0;m<=h&&m<=n-f;m++)u+=Br[m]*r[f+m];ti[n-f]=u}for(u=0,f=n;f>=0;f--)u+=ti[f];for(t[0]=0===d?u:-u,u=ti[0]-u,f=1;f<=n;f++)u+=ti[f];return t[1]=0===d?u:-u,7&p}var oi=function(e,t,n,r){var i,o,s,a,c,l,u;for(4,(o=(n-3)/24|0)<0&&(o=0),a=n-24*(o+1),l=o-(s=r-1),u=s+4,c=0;c<=u;c++)$r[c]=l<0?0:Dr[l],l+=1;for(c=0;c<=4;c++){for(i=0,l=0;l<=s;l++)i+=e[l]*$r[s+(c-l)];ei[c]=i}return 4,ii(e,t,4,ei,a,4,o,s,$r)},si=Math.round;var ai=function(e,t,n){var r,i,o,s,a;return o=e-1.5707963267341256*(r=si(.6366197723675814*e)),s=6077100506506192e-26*r,a=t>>20|0,n[0]=o-s,a-(Ln(n[0])>>20&2047)>16&&(s=20222662487959506e-37*r-((i=o)-(o=i-(s=6077100506303966e-26*r))-s),n[0]=o-s,a-(Ln(n[0])>>20&2047)>49&&(s=84784276603689e-45*r-((i=o)-(o=i-(s=20222662487111665e-37*r))-s),n[0]=o-s)),n[1]=o-n[0]-s,r},ci=1.5707963267341256,li=6077100506506192e-26,ui=2*li,di=3*li,hi=4*li,fi=new Array(3),mi=new Array(2);var pi=function(e,t){var n,r,i,o,s,a,c;if((i=2147483647&Ln(e)|0)<=1072243195)return t[0]=e,t[1]=0,0;if(i<=1074752122)return 598523==(1048575&i)?ai(e,i,t):i<=1073928572?e>0?(c=e-ci,t[0]=c-li,t[1]=c-t[0]-li,1):(c=e+ci,t[0]=c+li,t[1]=c-t[0]+li,-1):e>0?(c=e-2*ci,t[0]=c-ui,t[1]=c-t[0]-ui,2):(c=e+2*ci,t[0]=c+ui,t[1]=c-t[0]+ui,-2);if(i<=1075594811)return i<=1075183036?1074977148===i?ai(e,i,t):e>0?(c=e-3*ci,t[0]=c-di,t[1]=c-t[0]-di,3):(c=e+3*ci,t[0]=c+di,t[1]=c-t[0]+di,-3):1075388923===i?ai(e,i,t):e>0?(c=e-4*ci,t[0]=c-hi,t[1]=c-t[0]-hi,4):(c=e+4*ci,t[0]=c+hi,t[1]=c-t[0]+hi,-4);if(i<1094263291)return ai(e,i,t);if(i>=2146435072)return t[0]=NaN,t[1]=NaN,0;for(n=Mr(e),c=br(i-((r=(i>>20)-1046)<<20|0),n),s=0;s<2;s++)fi[s]=0|c,c=16777216*(c-fi[s]);for(fi[2]=c,o=3;0===fi[o-1];)o-=1;return a=oi(fi,mi,r,o),e<0?(t[0]=-mi[0],t[1]=-mi[1],-a):(t[0]=mi[0],t[1]=mi[1],a)},yi=pi,bi=[0,0];var vi=function(e){var t;if(t=Ln(e),(t&=2147483647)<=1072243195)return t<1044381696?1:Yr(e,0);if(t>=2146435072)return NaN;switch(3&yi(e,bi)){case 0:return Yr(bi[0],bi[1]);case 1:return-Pr(bi[0],bi[1]);case 2:return-Yr(bi[0],bi[1]);default:return Pr(bi[0],bi[1])}},gi=Math.ceil;var Zi=function(e){return e<0?gi(e):Nr(e)};var Xi=function(e){return 0===e?.16666666666666602:.16666666666666602+e*(e*(6613756321437934e-20+e*(4.1381367970572385e-8*e-16533902205465252e-22))-.0027777777777015593)};var wi=function(e,t,n){var r,i,o;return o=(r=e-t)-(i=r*r)*Xi(i),Or(1-(t-r*o/(2-o)-e),n)},Li=1.4426950408889634,xi=1/(1<<28);var Gi=function(e){var t;return kt(e)||e===Cn?e:e===Tn?0:e>709.782712893384?Cn:e<-745.1332191019411?0:e>-3.725290298461914e-9&&e<xi?1+e:(t=Zi(e<0?Li*e-.5:Li*e+.5),wi(e-.6931471803691238*t,1.9082149292705877e-10*t,t))};var ki=function(e){return kt(e)?e:(e<0&&(e=-e),e>21?Gi(e)/2:(Gi(e)+Gi(-e))/2)};var Si=function(e){return 0===e?-.03333333333333313:e*(.0015873015872548146+e*(e*(4008217827329362e-21+-2.0109921818362437e-7*e)-793650757867488e-19))-.03333333333333313},Wi=.6931471803691238,Ci=1.9082149292705877e-10,Ti=1.4426950408889634;var Yi=function(e){var t,n,r,i,o,s,a,c,l,u,d,h;if(e===Cn||kt(e))return e;if(e===Tn)return-1;if(0===e)return e;if(e<0?(n=!0,a=-e):(n=!1,a=e),a>=38.816242111356935){if(n)return-1;if(a>=709.782712893384)return Cn}if(o=0|Ln(a),a>.34657359027997264)a<1.0397207708399179?n?(r=e+Wi,i=-Ci,h=-1):(r=e-Wi,i=Ci,h=1):(h=n?Ti*e-.5:Ti*e+.5,r=e-(u=h|=0)*Wi,i=u*Ci),l=r-(e=r-i)-i;else{if(o<1016070144)return e;h=0}return d=(c=e*(t=.5*e))*(((s=1+c*Si(c))-(u=3-s*t))/(6-e*u)),0===h?e-(e*d-c):(d=e*(d-l)-l,d-=c,-1===h?.5*(e-d)-.5:1===h?e<-.25?-2*(d-(e+.5)):1+2*(e-d):h<=-2||h>56?(r=Ln(a=1-(d-e))+(h<<20)|0,(a=Wn(a,r))-1):(u=1,h<20?a=(u=Wn(u,r=1072693248-(2097152>>h)|0))-(d-e):(a=e-(d+(u=Wn(u,r=Yn-h<<20|0))),a+=1),r=Ln(a)+(h<<20)|0,Wn(a,r)))},Ri=!0===gn?0:1,Pi=new nn(1),Vi=new Dt(Pi.buffer);var Ki=function(e,t){return Pi[0]=e,Vi[Ri]=t>>>0,Pi[0]},Ii=Ki;var Mi=function(e){return 0===e?.3999999999940942:.3999999999940942+e*(.22222198432149784+.15313837699209373*e)};var Ni=function(e){return 0===e?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+.14798198605116586*e))},Hi=1048575;var Fi=function(e){var t,n,r,i,o,s,a,c,l,u;return r=Ln(e),i=e-1,(Hi&2+r)<3?0===i?0:i*i*(.3333333333333333*i-.5):(l=(r&=Hi)-398458|0,u=440401-r|0,n=(c=(s=(o=i/(2+i))*o)*s)*Mi(c),a=s*Ni(c)+n,(l|=u)>0?o*((t=.5*i*i)+a)-t:o*(a-i))},zi=.4342944818781689;var Ei=function(e){var t,n,r,i,o,s,a;return kt(e)||e<0?NaN:0===e?Tn:(o=0,(n=Ln(e))<1048576&&(o-=54,n=Ln(e*=0x40000000000000)),n>=2146435072?e+e:(o+=(n>>20)-Yn|0,e=Wn(e,(n&=1048575)|1072693248^(i=n+614244&1048576|0)),s=o+=i>>20|0,r=Fi(e),a=3694239077158931e-28*s+25082946711645275e-27*((e-=1)+r),(a+=(e-(t=Ii(e,0))+r)*zi+t*zi)+.30102999566361177*s))},_i=Ei;var ji=function(e){return 0===e?.3999999999940942:.3999999999940942+e*(.22222198432149784+.15313837699209373*e)};var Ji=function(e){return 0===e?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+.14798198605116586*e))},Ui=1048575;var Qi=function(e){var t,n,r,i,o,s,a,c,l,u;return r=Ln(e),i=e-1,(Ui&2+r)<3?0===i?0:i*i*(.3333333333333333*i-.5):(l=(r&=Ui)-398458|0,u=440401-r|0,n=(c=(s=(o=i/(2+i))*o)*s)*ji(c),a=s*Ji(c)+n,(l|=u)>0?o*((t=.5*i*i)+a)-t:o*(a-i))},Oi=1.4426950407214463,Di=[0,0];var Bi=function(e){var t,n,r,i,o;if(kt(e)||e<0)return NaN;if(ur(Di,e),o=0,(n=Di[0])<1048576){if(0==(2147483647&n|Di[1]))return Tn;o-=54,n=Ln(e*=0x40000000000000)}return n>=2146435072?e+e:(o+=(n>>20)-Yn|0,e=Wn(e,(n&=1048575)|1072693248^(i=n+614244&1048576|0)),o+=i>>20|0,r=Qi(e),1.6751713164886512e-10*((e-=1)+r)+(e-(t=Ii(e,0))+r)*Oi+t*Oi+o)},Ai=Bi,qi=[0,0];var $i=function(e){var t;if(t=Ln(e),(t&=2147483647)<=1072243195)return t<1045430272?e:Pr(e,0);if(t>=2146435072)return NaN;switch(3&yi(e,qi)){case 0:return Pr(qi[0],qi[1]);case 1:return Yr(qi[0],qi[1]);case 2:return-Pr(qi[0],qi[1]);default:return-Yr(qi[0],qi[1])}};var eo=function(e){var t,n;return 0===e?.16666666666666666:((e<0?-e:e)<=1?(t=e*(e*(-.789474443963537*e-163.72585752598383)-11561.443576500522)-351754.9648081514,n=e*(36157.827983443196+e*(1*e-277.7110814206028))-2110529.7888489086):(t=(e=1/e)*(e*(-351754.9648081514*e-11561.443576500522)-163.72585752598383)-.789474443963537,n=1+e*(e*(36157.827983443196+-2110529.7888489086*e)-277.7110814206028)),t/n)};var to=function(e){var t;return 0===e?e:(t=Hr(e),e>710.4758600739439||e<-709.089565712824?e>0?Cn:Tn:t>1?t>=709.0895657128241?(t=Gi(.5*t),t*=.5*t,e<0&&(t=-t),t):(t=.5*(t=Gi(t))-.5/t,e<0&&(t=-t),t):e+e*(t*=t)*eo(t))};var no=function(e){return 0===e?.13333333333320124:.13333333333320124+e*(.021869488294859542+e*(.0035920791075913124+e*(.0005880412408202641+e*(7817944429395571e-20+-18558637485527546e-21*e))))};var ro=function(e){return 0===e?.05396825397622605:.05396825397622605+e*(.0088632398235993+e*(.0014562094543252903+e*(.0002464631348184699+e*(7140724913826082e-20+2590730518636337e-20*e))))};var io=function(e,t,n){var r,i,o,s,a,c,l,u,d;return(i=2147483647&(r=Ln(e))|0)>=1072010280&&(e<0&&(e=-e,t=-t),e=(d=.7853981633974483-e)+(u=3061616997868383e-32-t),t=0),s=t+(d=e*e)*((a=d*e)*((s=no(u=d*d))+(l=d*ro(u)))+t),u=e+(s+=.3333333333333341*a),i>=1072010280?(1-(r>>30&2))*((l=n)-2*(e-(u*u/(u+l)-s))):1===n?u:(Ii(d=u,0),l=s-(d-e),Ii(c=o=-1/u,0),c+o*((a=1+c*d)+c*l))},oo=[0,0];var so=function(e){var t,n;return t=Ln(e),(t&=2147483647)<=1072243195?t<1044381696?e:io(e,0,1):t>=2146435072?NaN:(n=yi(e,oo),io(oo[0],oo[1],1-((1&n)<<1)))};var ao=function(e){var t,n;return 0===e?-.3333333333333332:((e<0?-e:e)<=1?(t=e*(e*(0*e-.9643991794250523)-99.28772310019185)-1614.6876844170845,n=4844.063053251255+e*(2235.4883906010045+e*(112.81167849163293+1*e))):(t=0+(e=1/e)*(e*(-1614.6876844170845*e-99.28772310019185)-.9643991794250523),n=1+e*(112.81167849163293+e*(2235.4883906010045+4844.063053251255*e))),t/n)};var co=function(e){var t,n;if((n=Hr(e))>44.014845965556525)return e<0?-1:1;if(n>=.625)n=1-2/((t=Gi(2*n))+1),e<0&&(n=-n);else{if(0===e)return e;n=e+e*(t=e*e)*ao(t)}return n};void 0===globalThis.CroquetMath&&(globalThis.CroquetMath={}),Object.assign(globalThis.CroquetMath,{acos:Rt,acosh:jn,asin:Yt,asinh:Un,atan:An,atanh:er,atan2:Lr,cbrt:Wr,cos:vi,cosh:ki,exp:Gi,expm1:Yi,log:_n,log1p:Kn,log10:_i,log2:Ai,sin:$i,sinh:to,tan:so,tanh:co});var lo=Math.pow;function uo(e){return e===1/0||e===-1/0}globalThis.CroquetMath.pow=function(e,t){if(isNaN(e)||isNaN(t))return NaN;if(uo(e)||uo(t))return lo(e,t);if(0===e||0===t)return lo(e,t);if(e<0&&!function(e){return Number.isInteger(e)}(t))return NaN;if(1===t)return e;if(2===t)return e*e;if(3===t)return e*e*e;if(4===t)return e*e*e*e;var n=1;return e<0&&(e*=-1,n=lo(-1,t)),globalThis.CroquetMath.exp(globalThis.CroquetMath.log(e)*t)*n};var ho=function(e,t){return e<t};function fo(e){if(!(this instanceof fo))return new fo(e);this.array=[],this.size=0,this.compare=e||ho}fo.prototype.clone=function(){var e=new fo(this.compare);return e.size=this.size,e.array=this.array.slice(0,this.size),e},fo.prototype.add=function(e){var t,n,r=this.size;for(this.array[this.size]=e,this.size+=1;r>0&&(t=r-1>>1,n=this.array[t],this.compare(e,n));)this.array[r]=n,r=t;this.array[r]=e},fo.prototype.heapify=function(e){var t;for(this.array=e,this.size=e.length,t=this.size>>1;t>=0;t--)this._percolateDown(t)},fo.prototype._percolateUp=function(e,t){for(var n,r,i=this.array[e];e>0&&(n=e-1>>1,r=this.array[n],t||this.compare(i,r));)this.array[e]=r,e=n;this.array[e]=i},fo.prototype._percolateDown=function(e){for(var t,n,r,i=this.size,o=this.size>>>1,s=this.array[e];e<o&&(n=(t=1+(e<<1))+1,r=this.array[t],n<i&&this.compare(this.array[n],r)&&(t=n,r=this.array[n]),this.compare(r,s));)this.array[e]=r,e=t;this.array[e]=s},fo.prototype._removeAt=function(e){if(!(e>this.size-1||e<0))return this._percolateUp(e,!0),this.poll()},fo.prototype.remove=function(e){for(var t=0;t<this.size;t++)if(!this.compare(this.array[t],e)&&!this.compare(e,this.array[t]))return this._removeAt(t),!0;return!1},fo.prototype.removeOne=function(e){if("function"==typeof e)for(var t=0;t<this.size;t++)if(e(this.array[t]))return this._removeAt(t)},fo.prototype.removeMany=function(e,t){if("function"!=typeof e||this.size<1)return[];t=t?Math.min(t,this.size):this.size;for(var n=0,r=new Array(t),i=0,o=new Array(this.size);n<t&&!this.isEmpty();){var s=this.poll();e(s)?r[n++]=s:o[i++]=s}r.length=n;for(var a=0;a<i;)this.add(o[a++]);return r},fo.prototype.peek=function(){if(0!=this.size)return this.array[0]},fo.prototype.poll=function(){if(0!=this.size){var e=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,e}},fo.prototype.replaceTop=function(e){if(0!=this.size){var t=this.array[0];return this.array[0]=e,this._percolateDown(0),t}},fo.prototype.trim=function(){this.array=this.array.slice(0,this.size)},fo.prototype.isEmpty=function(){return 0===this.size},fo.prototype.forEach=function(e){if(!this.isEmpty()&&"function"==typeof e)for(var t=0,n=this.clone();!n.isEmpty();)e(n.poll(),t++)},fo.prototype.kSmallest=function(e){if(0==this.size)return[];e=Math.min(this.size,e);var t=new fo(this.compare),n=Math.min((e>0?Math.pow(2,e-1):0)+1,this.size);t.size=n,t.array=this.array.slice(0,n);for(var r=new Array(e),i=0;i<e;i++)r[i]=t.poll();return r};var mo=function(e){u(n,e);var t=v(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"poll",value:function(){var e=Z(d(n.prototype),"poll",this).call(this);return this.array[this.size]=null,e}},{key:"asArray",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"asUnsortedArray",value:function(){return this.array.slice(0,this.size)}}]),n}(fo),po={exports:{}};!function(e,t){var n;e.exports=(n=D.exports,function(){var e=n,t=e.lib.WordArray;function r(e,n,r){for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return t.create(i,o)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)}(po);var yo=po.exports,bo={exports:{}};!function(e,t){e.exports=D.exports.enc.Utf8}(bo);var vo=bo.exports,go={exports:{}},Zo={exports:{}};!function(e,t){var n;e.exports=(n=D.exports,function(){var e=n,t=e.lib,r=t.WordArray,i=t.Hasher,o=e.algo,s=[],a=o.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],c=n[4],l=0;l<80;l++){if(l<16)s[l]=0|e[t+l];else{var u=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=u<<1|u>>>31}var d=(r<<5|r>>>27)+c+s[l];d+=l<20?1518500249+(i&o|~i&a):l<40?1859775393+(i^o^a):l<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,c=a,a=o,o=i<<30|i>>>2,i=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a)}(),n.SHA1)}(Zo);var Xo={exports:{}};!function(e,t){var n;e.exports=(n=D.exports,void function(){var e=n,t=e.lib.Base,r=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,c=s.words,l=0;l<n;l++)a[l]^=1549556828,c[l]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())}(Xo),function(e,t){var n;e.exports=(n=D.exports,function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,o=e.algo,s=o.SHA1,a=o.HMAC,c=o.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=a.create(n.hasher,e),o=i.create(),s=i.create([1]),c=o.words,l=s.words,u=n.keySize,d=n.iterations;c.length<u;){var h=r.update(t).finalize(s);r.reset();for(var f=h.words,m=f.length,p=h,y=1;y<d;y++){p=r.finalize(p),r.reset();for(var b=p.words,v=0;v<m;v++)f[v]^=b[v]}o.concat(h),l[0]++}return o.sigBytes=4*u,o}});e.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),n.PBKDF2)}(go);var wo=go.exports,Lo={exports:{}},xo={exports:{}};!function(e,t){var n;e.exports=(n=D.exports,function(e){var t=n,r=t.lib,i=r.WordArray,o=r.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],m=e[t+3],p=e[t+4],y=e[t+5],b=e[t+6],v=e[t+7],g=e[t+8],Z=e[t+9],X=e[t+10],w=e[t+11],L=e[t+12],x=e[t+13],G=e[t+14],k=e[t+15],S=o[0],W=o[1],C=o[2],T=o[3];S=l(S,W,C,T,s,7,a[0]),T=l(T,S,W,C,c,12,a[1]),C=l(C,T,S,W,f,17,a[2]),W=l(W,C,T,S,m,22,a[3]),S=l(S,W,C,T,p,7,a[4]),T=l(T,S,W,C,y,12,a[5]),C=l(C,T,S,W,b,17,a[6]),W=l(W,C,T,S,v,22,a[7]),S=l(S,W,C,T,g,7,a[8]),T=l(T,S,W,C,Z,12,a[9]),C=l(C,T,S,W,X,17,a[10]),W=l(W,C,T,S,w,22,a[11]),S=l(S,W,C,T,L,7,a[12]),T=l(T,S,W,C,x,12,a[13]),C=l(C,T,S,W,G,17,a[14]),S=u(S,W=l(W,C,T,S,k,22,a[15]),C,T,c,5,a[16]),T=u(T,S,W,C,b,9,a[17]),C=u(C,T,S,W,w,14,a[18]),W=u(W,C,T,S,s,20,a[19]),S=u(S,W,C,T,y,5,a[20]),T=u(T,S,W,C,X,9,a[21]),C=u(C,T,S,W,k,14,a[22]),W=u(W,C,T,S,p,20,a[23]),S=u(S,W,C,T,Z,5,a[24]),T=u(T,S,W,C,G,9,a[25]),C=u(C,T,S,W,m,14,a[26]),W=u(W,C,T,S,g,20,a[27]),S=u(S,W,C,T,x,5,a[28]),T=u(T,S,W,C,f,9,a[29]),C=u(C,T,S,W,v,14,a[30]),S=d(S,W=u(W,C,T,S,L,20,a[31]),C,T,y,4,a[32]),T=d(T,S,W,C,g,11,a[33]),C=d(C,T,S,W,w,16,a[34]),W=d(W,C,T,S,G,23,a[35]),S=d(S,W,C,T,c,4,a[36]),T=d(T,S,W,C,p,11,a[37]),C=d(C,T,S,W,v,16,a[38]),W=d(W,C,T,S,X,23,a[39]),S=d(S,W,C,T,x,4,a[40]),T=d(T,S,W,C,s,11,a[41]),C=d(C,T,S,W,m,16,a[42]),W=d(W,C,T,S,b,23,a[43]),S=d(S,W,C,T,Z,4,a[44]),T=d(T,S,W,C,L,11,a[45]),C=d(C,T,S,W,k,16,a[46]),S=h(S,W=d(W,C,T,S,f,23,a[47]),C,T,s,6,a[48]),T=h(T,S,W,C,v,10,a[49]),C=h(C,T,S,W,G,15,a[50]),W=h(W,C,T,S,y,21,a[51]),S=h(S,W,C,T,L,6,a[52]),T=h(T,S,W,C,m,10,a[53]),C=h(C,T,S,W,X,15,a[54]),W=h(W,C,T,S,c,21,a[55]),S=h(S,W,C,T,g,6,a[56]),T=h(T,S,W,C,k,10,a[57]),C=h(C,T,S,W,b,15,a[58]),W=h(W,C,T,S,x,21,a[59]),S=h(S,W,C,T,p,6,a[60]),T=h(T,S,W,C,w,10,a[61]),C=h(C,T,S,W,f,15,a[62]),W=h(W,C,T,S,Z,21,a[63]),o[0]=o[0]+S|0,o[1]=o[1]+W|0,o[2]=o[2]+C|0,o[3]=o[3]+T|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),s=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+i+s;return(a<<o|a>>>32-o)+t}function u(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,r,i,o,s){var a=e+(t^n^r)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+i+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),n.MD5)}(xo);var Go={exports:{}};!function(e,t){var n;e.exports=(n=D.exports,function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,o=e.algo,s=o.MD5,a=o.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,o=r.hasher.create(),s=i.create(),a=s.words,c=r.keySize,l=r.iterations;a.length<c;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var u=1;u<l;u++)n=o.finalize(n),o.reset();s.concat(n)}return s.sigBytes=4*c,s}});e.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)}}(),n.EvpKDF)}(Go);var ko={exports:{}};!function(e,t){var n;e.exports=void((n=D.exports).lib.Cipher||function(e){var t=n,r=t.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=t.enc;a.Utf8;var c=a.Base64,l=t.algo.EvpKDF,u=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?g:b}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=t.mode={},h=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=d.CBC=function(){var t=h.extend();function n(t,n,r){var i,o=this._iv;o?(i=o,this._iv=e):i=this._prevBlock;for(var s=0;s<r;s++)t[n+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=e.slice(t,t+i);r.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=o}}),t}(),m=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,s=[],a=0;a<r;a+=4)s.push(i);var c=o.create(s,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:m}),reset:function(){var e;u.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var p=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),y=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?o.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),p.create({ciphertext:n,salt:t})}},b=r.SerializableCipher=i.extend({cfg:i.extend({format:y}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),s=i.cfg;return p.create({ciphertext:o,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=o.random(8));var i=l.create({keySize:t+n}).compute(e,r),s=o.create(i.words.slice(t),4*n);return i.sigBytes=4*t,p.create({key:i,iv:s,salt:r})}},g=r.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:v}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var o=b.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,b.decrypt.call(this,e,t,i.key,r)}})}())}(ko),function(e,t){var n;e.exports=(n=D.exports,function(){var e=n,t=e.lib.BlockCipher,r=e.algo,i=[],o=[],s=[],a=[],c=[],l=[],u=[],d=[],h=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var m=r^r<<1^r<<2^r<<3^r<<4;m=m>>>8^255&m^99,i[n]=m,o[m]=n;var p=e[n],y=e[p],b=e[y],v=257*e[m]^16843008*m;s[n]=v<<24|v>>>8,a[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,l[n]=v,v=16843009*b^65537*y^257*p^16843008*n,u[m]=v<<24|v>>>8,d[m]=v<<16|v>>>16,h[m]=v<<8|v>>>24,f[m]=v,n?(n=p^e[e[e[b^p]]],r^=e[e[r]]):n=r=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],p=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<r;s++)s<n?o[s]=t[s]:(l=o[s-1],s%n?n>6&&s%n==4&&(l=i[l>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l]):(l=i[(l=l<<8|l>>>24)>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l],l^=m[s/n|0]<<24),o[s]=o[s-n]^l);for(var a=this._invKeySchedule=[],c=0;c<r;c++){if(s=r-c,c%4)var l=o[s];else l=o[s-4];a[c]=c<4||s<=4?l:u[i[l>>>24]]^d[i[l>>>16&255]]^h[i[l>>>8&255]]^f[i[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,l,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,f,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],f=4,m=1;m<c;m++){var p=r[l>>>24]^i[u>>>16&255]^o[d>>>8&255]^s[255&h]^n[f++],y=r[u>>>24]^i[d>>>16&255]^o[h>>>8&255]^s[255&l]^n[f++],b=r[d>>>24]^i[h>>>16&255]^o[l>>>8&255]^s[255&u]^n[f++],v=r[h>>>24]^i[l>>>16&255]^o[u>>>8&255]^s[255&d]^n[f++];l=p,u=y,d=b,h=v}p=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^n[f++],y=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^n[f++],b=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[f++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^n[f++],e[t]=p,e[t+1]=y,e[t+2]=b,e[t+3]=v},keySize:8});e.AES=t._createHelper(p)}(),n.AES)}(Lo);var So=Lo.exports,Wo={exports:{}};!function(e,t){e.exports=D.exports.HmacSHA256}(Wo);var Co=Wo.exports;function To(e){for(var t=e.length;--t>=0;)e[t]=0}var Yo=256,Ro=286,Po=30,Vo=15,Ko=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Io=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Mo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),No=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ho=new Array(576);To(Ho);var Fo=new Array(60);To(Fo);var zo=new Array(512);To(zo);var Eo=new Array(256);To(Eo);var _o=new Array(29);To(_o);var jo,Jo,Uo,Qo=new Array(Po);function Oo(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function Do(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}To(Qo);var Bo=function(e){return e<256?zo[e]:zo[256+(e>>>7)]},Ao=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},qo=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Ao(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},$o=function(e,t,n){qo(e,n[2*t],n[2*t+1])},es=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},ts=function(e,t,n){var r,i,o=new Array(16),s=0;for(r=1;r<=Vo;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=es(o[a]++,a))}},ns=function(e){var t;for(t=0;t<Ro;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Po;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},rs=function(e){e.bi_valid>8?Ao(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},is=function(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},os=function(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&is(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!is(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},ss=function(e,t,n){var r,i,o,s,a=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?$o(e,i,t):(o=Eo[i],$o(e,o+Yo+1,t),0!==(s=Ko[o])&&(i-=_o[o],qo(e,i,s)),r--,o=Bo(r),$o(e,o,n),0!==(s=Io[o])&&(r-=Qo[o],qo(e,r,s)))}while(a<e.last_lit);$o(e,256,t)},as=function(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)os(e,o,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],os(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,os(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,s,a,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,m=t.stat_desc.max_length,p=0;for(o=0;o<=Vo;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)>m&&(o=m,p++),c[2*r+1]=o,r>l||(e.bl_count[o]++,s=0,r>=f&&(s=h[r-f]),a=c[2*r],e.opt_len+=a*(o+s),d&&(e.static_len+=a*(u[2*r+1]+s)));if(0!==p){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,p-=2}while(p>0);for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>l||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),ts(o,l,e.bl_count)},cs=function(e,t,n){var r,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<c&&i===s||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4))},ls=function(e,t,n){var r,i,o=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<c&&i===s)){if(a<l)do{$o(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&($o(e,i,e.bl_tree),a--),$o(e,16,e.bl_tree),qo(e,a-3,2)):a<=10?($o(e,17,e.bl_tree),qo(e,a-3,3)):($o(e,18,e.bl_tree),qo(e,a-11,7));a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4)}},us=!1,ds=function(e,t,n,r){qo(e,0+(r?1:0),3),function(e,t,n,r){rs(e),r&&(Ao(e,n),Ao(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n}(e,t,n,!0)},hs=function(e,t,n,r){var i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Yo;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),as(e,e.l_desc),as(e,e.d_desc),s=function(e){var t;for(cs(e,e.dyn_ltree,e.l_desc.max_code),cs(e,e.dyn_dtree,e.d_desc.max_code),as(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*No[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?ds(e,t,n,r):4===e.strategy||o===i?(qo(e,2+(r?1:0),3),ss(e,Ho,Fo)):(qo(e,4+(r?1:0),3),function(e,t,n,r){var i;for(qo(e,t-257,5),qo(e,n-1,5),qo(e,r-4,4),i=0;i<r;i++)qo(e,e.bl_tree[2*No[i]+1],3);ls(e,e.dyn_ltree,t-1),ls(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),ss(e,e.dyn_ltree,e.dyn_dtree)),ns(e),r&&rs(e)},fs={_tr_init:function(e){us||(!function(){var e,t,n,r,i,o=new Array(16);for(n=0,r=0;r<28;r++)for(_o[r]=n,e=0;e<1<<Ko[r];e++)Eo[n++]=r;for(Eo[n-1]=r,i=0,r=0;r<16;r++)for(Qo[r]=i,e=0;e<1<<Io[r];e++)zo[i++]=r;for(i>>=7;r<Po;r++)for(Qo[r]=i<<7,e=0;e<1<<Io[r]-7;e++)zo[256+i++]=r;for(t=0;t<=Vo;t++)o[t]=0;for(e=0;e<=143;)Ho[2*e+1]=8,e++,o[8]++;for(;e<=255;)Ho[2*e+1]=9,e++,o[9]++;for(;e<=279;)Ho[2*e+1]=7,e++,o[7]++;for(;e<=287;)Ho[2*e+1]=8,e++,o[8]++;for(ts(Ho,287,o),e=0;e<Po;e++)Fo[2*e+1]=5,Fo[2*e]=es(e,5);jo=new Oo(Ho,Ko,257,Ro,Vo),Jo=new Oo(Fo,Io,0,Po,Vo),Uo=new Oo(new Array(0),Mo,0,19,7)}(),us=!0),e.l_desc=new Do(e.dyn_ltree,jo),e.d_desc=new Do(e.dyn_dtree,Jo),e.bl_desc=new Do(e.bl_tree,Uo),e.bi_buf=0,e.bi_valid=0,ns(e)},_tr_stored_block:ds,_tr_flush_block:hs,_tr_tally:function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Eo[n]+Yo+1)]++,e.dyn_dtree[2*Bo(t)]++),e.last_lit===e.lit_bufsize-1},_tr_align:function(e){qo(e,2,3),$o(e,256,Ho),function(e){16===e.bi_valid?(Ao(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},ms=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0},ps=new Uint32Array(function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),ys=function(e,t,n,r){var i=ps,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return-1^e},bs={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vs={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},gs=fs._tr_init,Zs=fs._tr_stored_block,Xs=fs._tr_flush_block,ws=fs._tr_tally,Ls=fs._tr_align,xs=vs.Z_NO_FLUSH,Gs=vs.Z_PARTIAL_FLUSH,ks=vs.Z_FULL_FLUSH,Ss=vs.Z_FINISH,Ws=vs.Z_BLOCK,Cs=vs.Z_OK,Ts=vs.Z_STREAM_END,Ys=vs.Z_STREAM_ERROR,Rs=vs.Z_DATA_ERROR,Ps=vs.Z_BUF_ERROR,Vs=vs.Z_DEFAULT_COMPRESSION,Ks=vs.Z_FILTERED,Is=vs.Z_HUFFMAN_ONLY,Ms=vs.Z_RLE,Ns=vs.Z_FIXED,Hs=vs.Z_DEFAULT_STRATEGY,Fs=vs.Z_UNKNOWN,zs=vs.Z_DEFLATED,Es=258,_s=262,js=103,Js=113,Us=666,Qs=function(e,t){return e.msg=bs[t],t},Os=function(e){return(e<<1)-(e>4?9:0)},Ds=function(e){for(var t=e.length;--t>=0;)e[t]=0},Bs=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},As=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},qs=function(e,t){Xs(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,As(e.strm)},$s=function(e,t){e.pending_buf[e.pending++]=t},ea=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},ta=function(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-_s?e.strstart-(e.w_size-_s):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+Es,f=l[o+s-1],m=l[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(l[(n=t)+s]===m&&l[n+s-1]===f&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=Es-(h-o),o=h-Es,r>s){if(e.match_start=t,s=r,r>=a)break;f=l[o+s-1],m=l[o+s]}}}while((t=d[t&u])>c&&0!=--i);return s<=e.lookahead?s:e.lookahead},na=function(e){var t,n,r,i,o,s,a,c,l,u,d=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-_s)){e.window.set(e.window.subarray(d,d+d),0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=d?r-d:0}while(--n);t=n=d;do{r=e.prev[--t],e.prev[t]=r>=d?r-d:0}while(--n);i+=d}if(0===e.strm.avail_in)break;if(s=e.strm,a=e.window,c=e.strstart+e.lookahead,l=i,u=void 0,(u=s.avail_in)>l&&(u=l),n=0===u?0:(s.avail_in-=u,a.set(s.input.subarray(s.next_in,s.next_in+u),c),1===s.state.wrap?s.adler=ms(s.adler,a,u,c):2===s.state.wrap&&(s.adler=ys(s.adler,a,u,c)),s.next_in+=u,s.total_in+=u,u),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Bs(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Bs(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<_s&&0!==e.strm.avail_in)},ra=function(e,t){for(var n,r;;){if(e.lookahead<_s){if(na(e),e.lookahead<_s&&t===xs)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Bs(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-_s&&(e.match_length=ta(e,n)),e.match_length>=3)if(r=ws(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Bs(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Bs(e,e.ins_h,e.window[e.strstart+1]);else r=ws(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(qs(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Ss?(qs(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(qs(e,!1),0===e.strm.avail_out)?1:2},ia=function(e,t){for(var n,r,i;;){if(e.lookahead<_s){if(na(e),e.lookahead<_s&&t===xs)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Bs(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-_s&&(e.match_length=ta(e,n),e.match_length<=5&&(e.strategy===Ks||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=ws(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Bs(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(qs(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=ws(e,0,e.window[e.strstart-1]))&&qs(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=ws(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Ss?(qs(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(qs(e,!1),0===e.strm.avail_out)?1:2};function oa(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var sa=[new oa(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(na(e),0===e.lookahead&&t===xs)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,qs(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-_s&&(qs(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ss?(qs(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(qs(e,!1),e.strm.avail_out),1)})),new oa(4,4,8,4,ra),new oa(4,5,16,8,ra),new oa(4,6,32,32,ra),new oa(4,4,16,16,ia),new oa(8,16,32,32,ia),new oa(8,16,128,128,ia),new oa(8,32,128,256,ia),new oa(32,128,258,1024,ia),new oa(32,258,258,4096,ia)];function aa(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=zs,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ds(this.dyn_ltree),Ds(this.dyn_dtree),Ds(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ds(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ds(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var ca=function(e){if(!e||!e.state)return Qs(e,Ys);e.total_in=e.total_out=0,e.data_type=Fs;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:Js,e.adler=2===t.wrap?0:1,t.last_flush=xs,gs(t),Cs},la=function(e){var t,n=ca(e);return n===Cs&&((t=e.state).window_size=2*t.w_size,Ds(t.head),t.max_lazy_match=sa[t.level].max_lazy,t.good_match=sa[t.level].good_length,t.nice_match=sa[t.level].nice_length,t.max_chain_length=sa[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},ua=function(e,t,n,r,i,o){if(!e)return Ys;var s=1;if(t===Vs&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==zs||r<8||r>15||t<0||t>9||o<0||o>Ns)return Qs(e,Ys);8===r&&(r=9);var a=new aa;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,la(e)},da={deflateInit:function(e,t){return ua(e,t,zs,15,8,Hs)},deflateInit2:ua,deflateReset:la,deflateResetKeep:ca,deflateSetHeader:function(e,t){return e&&e.state?2!==e.state.wrap?Ys:(e.state.gzhead=t,Cs):Ys},deflate:function(e,t){var n,r;if(!e||!e.state||t>Ws||t<0)return e?Qs(e,Ys):Ys;var i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===Us&&t!==Ss)return Qs(e,0===e.avail_out?Ps:Ys);i.strm=e;var o=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,$s(i,31),$s(i,139),$s(i,8),i.gzhead?($s(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),$s(i,255&i.gzhead.time),$s(i,i.gzhead.time>>8&255),$s(i,i.gzhead.time>>16&255),$s(i,i.gzhead.time>>24&255),$s(i,9===i.level?2:i.strategy>=Is||i.level<2?4:0),$s(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&($s(i,255&i.gzhead.extra.length),$s(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=ys(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):($s(i,0),$s(i,0),$s(i,0),$s(i,0),$s(i,0),$s(i,9===i.level?2:i.strategy>=Is||i.level<2?4:0),$s(i,3),i.status=Js);else{var s=zs+(i.w_bits-8<<4)<<8;s|=(i.strategy>=Is||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=Js,ea(i,s),0!==i.strstart&&(ea(i,e.adler>>>16),ea(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=ys(e.adler,i.pending_buf,i.pending-n,n)),As(e),n=i.pending,i.pending!==i.pending_buf_size));)$s(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=ys(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ys(e.adler,i.pending_buf,i.pending-n,n)),As(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,$s(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=ys(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ys(e.adler,i.pending_buf,i.pending-n,n)),As(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,$s(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=ys(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=js)}else i.status=js;if(i.status===js&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&As(e),i.pending+2<=i.pending_buf_size&&($s(i,255&e.adler),$s(i,e.adler>>8&255),e.adler=0,i.status=Js)):i.status=Js),0!==i.pending){if(As(e),0===e.avail_out)return i.last_flush=-1,Cs}else if(0===e.avail_in&&Os(t)<=Os(o)&&t!==Ss)return Qs(e,Ps);if(i.status===Us&&0!==e.avail_in)return Qs(e,Ps);if(0!==e.avail_in||0!==i.lookahead||t!==xs&&i.status!==Us){var a=i.strategy===Is?function(e,t){for(var n;;){if(0===e.lookahead&&(na(e),0===e.lookahead)){if(t===xs)return 1;break}if(e.match_length=0,n=ws(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(qs(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ss?(qs(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(qs(e,!1),0===e.strm.avail_out)?1:2}(i,t):i.strategy===Ms?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=Es){if(na(e),e.lookahead<=Es&&t===xs)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+Es;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=Es-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=ws(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=ws(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(qs(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Ss?(qs(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(qs(e,!1),0===e.strm.avail_out)?1:2}(i,t):sa[i.level].func(i,t);if(3!==a&&4!==a||(i.status=Us),1===a||3===a)return 0===e.avail_out&&(i.last_flush=-1),Cs;if(2===a&&(t===Gs?Ls(i):t!==Ws&&(Zs(i,0,0,!1),t===ks&&(Ds(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),As(e),0===e.avail_out))return i.last_flush=-1,Cs}return t!==Ss?Cs:i.wrap<=0?Ts:(2===i.wrap?($s(i,255&e.adler),$s(i,e.adler>>8&255),$s(i,e.adler>>16&255),$s(i,e.adler>>24&255),$s(i,255&e.total_in),$s(i,e.total_in>>8&255),$s(i,e.total_in>>16&255),$s(i,e.total_in>>24&255)):(ea(i,e.adler>>>16),ea(i,65535&e.adler)),As(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Cs:Ts)},deflateEnd:function(e){if(!e||!e.state)return Ys;var t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==js&&t!==Js&&t!==Us?Qs(e,Ys):(e.state=null,t===Js?Qs(e,Rs):Cs)},deflateSetDictionary:function(e,t){var n=t.length;if(!e||!e.state)return Ys;var r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return Ys;if(1===i&&(e.adler=ms(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Ds(r.head),r.strstart=0,r.block_start=0,r.insert=0);var o=new Uint8Array(r.w_size);o.set(t.subarray(n-r.w_size,n),0),t=o,n=r.w_size}var s=e.avail_in,a=e.next_in,c=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,na(r);r.lookahead>=3;){var l=r.strstart,u=r.lookahead-2;do{r.ins_h=Bs(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++}while(--u);r.strstart=l,r.lookahead=2,na(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=c,e.avail_in=s,r.wrap=i,Cs},deflateInfo:"pako deflate (from Nodeca project)"},ha=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},fa=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==r(n))throw new TypeError(n+"must be non-object");for(var i in n)ha(n,i)&&(e[i]=n[i])}}return e},ma=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),o=0,s=0,a=e.length;o<a;o++){var c=e[o];i.set(c,s),s+=c.length}return i},pa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){pa=!1}for(var ya=new Uint8Array(256),ba=0;ba<256;ba++)ya[ba]=ba>=252?6:ba>=248?5:ba>=240?4:ba>=224?3:ba>=192?2:1;ya[254]=ya[254]=1;var va=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},ga=function(e,t){var n,r,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var o=new Array(2*i);for(r=0,n=0;n<i;){var s=e[n++];if(s<128)o[r++]=s;else{var a=ya[s];if(a>4)o[r++]=65533,n+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&n<i;)s=s<<6|63&e[n++],a--;a>1?o[r++]=65533:s<65536?o[r++]=s:(s-=65536,o[r++]=55296|s>>10&1023,o[r++]=56320|1023&s)}}}return function(e,t){if(t<65534&&e.subarray&&pa)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}(o,r)},Za=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+ya[e[n]]>t?n:t};var Xa=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},wa=Object.prototype.toString,La=vs.Z_NO_FLUSH,xa=vs.Z_SYNC_FLUSH,Ga=vs.Z_FULL_FLUSH,ka=vs.Z_FINISH,Sa=vs.Z_OK,Wa=vs.Z_STREAM_END,Ca=vs.Z_DEFAULT_COMPRESSION,Ta=vs.Z_DEFAULT_STRATEGY,Ya=vs.Z_DEFLATED;function Ra(e){this.options=fa({level:Ca,method:Ya,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ta},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xa,this.strm.avail_out=0;var n=da.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Sa)throw new Error(bs[n]);if(t.header&&da.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?va(t.dictionary):"[object ArrayBuffer]"===wa.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=da.deflateSetDictionary(this.strm,r))!==Sa)throw new Error(bs[n]);this._dict_set=!0}}function Pa(e,t){var n=new Ra(t);if(n.push(e,!0),n.err)throw n.msg||bs[n.err];return n.result}Ra.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?ka:La,"string"==typeof e?i.input=va(e):"[object ArrayBuffer]"===wa.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(r===xa||r===Ga)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if((n=da.deflate(i,r))===Wa)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),n=da.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Sa;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},Ra.prototype.onData=function(e){this.chunks.push(e)},Ra.prototype.onEnd=function(e){e===Sa&&(this.result=ma(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Va={Deflate:Ra,deflate:Pa,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Pa(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Pa(e,t)},constants:vs},Ka=function(e,t){var n,r,i,o,s,a,c,l,u,d,h,f,m,p,y,b,v,g,Z,X,w,L,x,G,k=e.state;n=e.next_in,x=e.input,r=n+(e.avail_in-5),i=e.next_out,G=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),a=k.dmax,c=k.wsize,l=k.whave,u=k.wnext,d=k.window,h=k.hold,f=k.bits,m=k.lencode,p=k.distcode,y=(1<<k.lenbits)-1,b=(1<<k.distbits)-1;e:do{f<15&&(h+=x[n++]<<f,f+=8,h+=x[n++]<<f,f+=8),v=m[h&y];t:for(;;){if(h>>>=g=v>>>24,f-=g,0===(g=v>>>16&255))G[i++]=65535&v;else{if(!(16&g)){if(0==(64&g)){v=m[(65535&v)+(h&(1<<g)-1)];continue t}if(32&g){k.mode=12;break e}e.msg="invalid literal/length code",k.mode=30;break e}Z=65535&v,(g&=15)&&(f<g&&(h+=x[n++]<<f,f+=8),Z+=h&(1<<g)-1,h>>>=g,f-=g),f<15&&(h+=x[n++]<<f,f+=8,h+=x[n++]<<f,f+=8),v=p[h&b];n:for(;;){if(h>>>=g=v>>>24,f-=g,!(16&(g=v>>>16&255))){if(0==(64&g)){v=p[(65535&v)+(h&(1<<g)-1)];continue n}e.msg="invalid distance code",k.mode=30;break e}if(X=65535&v,f<(g&=15)&&(h+=x[n++]<<f,(f+=8)<g&&(h+=x[n++]<<f,f+=8)),(X+=h&(1<<g)-1)>a){e.msg="invalid distance too far back",k.mode=30;break e}if(h>>>=g,f-=g,X>(g=i-o)){if((g=X-g)>l&&k.sane){e.msg="invalid distance too far back",k.mode=30;break e}if(w=0,L=d,0===u){if(w+=c-g,g<Z){Z-=g;do{G[i++]=d[w++]}while(--g);w=i-X,L=G}}else if(u<g){if(w+=c+u-g,(g-=u)<Z){Z-=g;do{G[i++]=d[w++]}while(--g);if(w=0,u<Z){Z-=g=u;do{G[i++]=d[w++]}while(--g);w=i-X,L=G}}}else if(w+=u-g,g<Z){Z-=g;do{G[i++]=d[w++]}while(--g);w=i-X,L=G}for(;Z>2;)G[i++]=L[w++],G[i++]=L[w++],G[i++]=L[w++],Z-=3;Z&&(G[i++]=L[w++],Z>1&&(G[i++]=L[w++]))}else{w=i-X;do{G[i++]=G[w++],G[i++]=G[w++],G[i++]=G[w++],Z-=3}while(Z>2);Z&&(G[i++]=G[w++],Z>1&&(G[i++]=G[w++]))}break}}break}}while(n<r&&i<s);n-=Z=f>>3,h&=(1<<(f-=Z<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),k.hold=h,k.bits=f},Ia=15,Ma=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Na=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ha=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Fa=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),za=function(e,t,n,r,i,o,s,a){var c,l,u,d,h,f,m,p,y,b=a.bits,v=0,g=0,Z=0,X=0,w=0,L=0,x=0,G=0,k=0,S=0,W=null,C=0,T=new Uint16Array(16),Y=new Uint16Array(16),R=null,P=0;for(v=0;v<=Ia;v++)T[v]=0;for(g=0;g<r;g++)T[t[n+g]]++;for(w=b,X=Ia;X>=1&&0===T[X];X--);if(w>X&&(w=X),0===X)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(Z=1;Z<X&&0===T[Z];Z++);for(w<Z&&(w=Z),G=1,v=1;v<=Ia;v++)if(G<<=1,(G-=T[v])<0)return-1;if(G>0&&(0===e||1!==X))return-1;for(Y[1]=0,v=1;v<Ia;v++)Y[v+1]=Y[v]+T[v];for(g=0;g<r;g++)0!==t[n+g]&&(s[Y[t[n+g]]++]=g);if(0===e?(W=R=s,f=19):1===e?(W=Ma,C-=257,R=Na,P-=257,f=256):(W=Ha,R=Fa,f=-1),S=0,g=0,v=Z,h=o,L=w,x=0,u=-1,d=(k=1<<w)-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){m=v-x,s[g]<f?(p=0,y=s[g]):s[g]>f?(p=R[P+s[g]],y=W[C+s[g]]):(p=96,y=0),c=1<<v-x,Z=l=1<<L;do{i[h+(S>>x)+(l-=c)]=m<<24|p<<16|y|0}while(0!==l);for(c=1<<v-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,g++,0==--T[v]){if(v===X)break;v=t[n+s[g]]}if(v>w&&(S&d)!==u){for(0===x&&(x=w),h+=Z,G=1<<(L=v-x);L+x<X&&!((G-=T[L+x])<=0);)L++,G<<=1;if(k+=1<<L,1===e&&k>852||2===e&&k>592)return 1;i[u=S&d]=w<<24|L<<16|h-o|0}}return 0!==S&&(i[h+S]=v-x<<24|64<<16|0),a.bits=w,0},Ea=vs.Z_FINISH,_a=vs.Z_BLOCK,ja=vs.Z_TREES,Ja=vs.Z_OK,Ua=vs.Z_STREAM_END,Qa=vs.Z_NEED_DICT,Oa=vs.Z_STREAM_ERROR,Da=vs.Z_DATA_ERROR,Ba=vs.Z_MEM_ERROR,Aa=vs.Z_BUF_ERROR,qa=vs.Z_DEFLATED,$a=12,ec=30,tc=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function nc(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var rc,ic,oc=function(e){if(!e||!e.state)return Oa;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Ja},sc=function(e){if(!e||!e.state)return Oa;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,oc(e)},ac=function(e,t){var n;if(!e||!e.state)return Oa;var r=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Oa:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,sc(e))},cc=function(e,t){if(!e)return Oa;var n=new nc;e.state=n,n.window=null;var r=ac(e,t);return r!==Ja&&(e.state=null),r},lc=!0,uc=function(e){if(lc){rc=new Int32Array(512),ic=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(za(1,e.lens,0,288,rc,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;za(2,e.lens,0,32,ic,0,e.work,{bits:5}),lc=!1}e.lencode=rc,e.lenbits=9,e.distcode=ic,e.distbits=5},dc=function(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},hc=function(e,t){var n,r,i,o,s,a,c,l,u,d,h,f,m,p,y,b,v,g,Z,X,w,L,x,G,k=0,S=new Uint8Array(4),W=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Oa;(n=e.state).mode===$a&&(n.mode=13),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,u=n.bits,d=a,h=c,L=Ja;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(2&n.wrap&&35615===l){n.check=0,S[0]=255&l,S[1]=l>>>8&255,n.check=ys(n.check,S,2,0),l=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=ec;break}if((15&l)!==qa){e.msg="unknown compression method",n.mode=ec;break}if(u-=4,w=8+(15&(l>>>=4)),0===n.wbits)n.wbits=w;else if(w>n.wbits){e.msg="invalid window size",n.mode=ec;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&l?10:$a,l=0,u=0;break;case 2:for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(n.flags=l,(255&n.flags)!==qa){e.msg="unknown compression method",n.mode=ec;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=ec;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=ys(n.check,S,2,0)),l=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,n.check=ys(n.check,S,4,0)),l=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=ys(n.check,S,2,0)),l=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(S[0]=255&l,S[1]=l>>>8&255,n.check=ys(n.check,S,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>a&&(f=a),f&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+f),w)),512&n.flags&&(n.check=ys(n.check,r,f,o)),a-=f,o+=f,n.length-=f),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break e;f=0;do{w=r[o+f++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&f<a);if(512&n.flags&&(n.check=ys(n.check,r,f,o)),a-=f,o+=f,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break e;f=0;do{w=r[o+f++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&f<a);if(512&n.flags&&(n.check=ys(n.check,r,f,o)),a-=f,o+=f,w)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=ec;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=$a;break;case 10:for(;u<32;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}e.adler=n.check=tc(l),l=0,u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=u,Qa;e.adler=n.check=1,n.mode=$a;case $a:if(t===_a||t===ja)break e;case 13:if(n.last){l>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}switch(n.last=1&l,u-=1,3&(l>>>=1)){case 0:n.mode=14;break;case 1:if(uc(n),n.mode=20,t===ja){l>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=ec}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=ec;break}if(n.length=65535&l,l=0,u=0,n.mode=15,t===ja)break e;case 15:n.mode=16;case 16:if(f=n.length){if(f>a&&(f=a),f>c&&(f=c),0===f)break e;i.set(r.subarray(o,o+f),s),a-=f,o+=f,c-=f,s+=f,n.length-=f;break}n.mode=$a;break;case 17:for(;u<14;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=ec;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.lens[W[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[W[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},L=za(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,L){e.msg="invalid code lengths set",n.mode=ec;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;b=(k=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&k,!((y=k>>>24)<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(v<16)l>>>=y,u-=y,n.lens[n.have++]=v;else{if(16===v){for(G=y+2;u<G;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(l>>>=y,u-=y,0===n.have){e.msg="invalid bit length repeat",n.mode=ec;break}w=n.lens[n.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===v){for(G=y+3;u<G;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}u-=y,w=0,f=3+(7&(l>>>=y)),l>>>=3,u-=3}else{for(G=y+7;u<G;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}u-=y,w=0,f=11+(127&(l>>>=y)),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=ec;break}for(;f--;)n.lens[n.have++]=w}}if(n.mode===ec)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=ec;break}if(n.lenbits=9,x={bits:n.lenbits},L=za(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,L){e.msg="invalid literal/lengths set",n.mode=ec;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},L=za(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,L){e.msg="invalid distances set",n.mode=ec;break}if(n.mode=20,t===ja)break e;case 20:n.mode=21;case 21:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=u,Ka(e,h),s=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,l=n.hold,u=n.bits,n.mode===$a&&(n.back=-1);break}for(n.back=0;b=(k=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&k,!((y=k>>>24)<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(b&&0==(240&b)){for(g=y,Z=b,X=v;b=(k=n.lencode[X+((l&(1<<g+Z)-1)>>g)])>>>16&255,v=65535&k,!(g+(y=k>>>24)<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}l>>>=g,u-=g,n.back+=g}if(l>>>=y,u-=y,n.back+=y,n.length=v,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=$a;break}if(64&b){e.msg="invalid literal/length code",n.mode=ec;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(G=n.extra;u<G;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;b=(k=n.distcode[l&(1<<n.distbits)-1])>>>16&255,v=65535&k,!((y=k>>>24)<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(0==(240&b)){for(g=y,Z=b,X=v;b=(k=n.distcode[X+((l&(1<<g+Z)-1)>>g)])>>>16&255,v=65535&k,!(g+(y=k>>>24)<=u);){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}l>>>=g,u-=g,n.back+=g}if(l>>>=y,u-=y,n.back+=y,64&b){e.msg="invalid distance code",n.mode=ec;break}n.offset=v,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(G=n.extra;u<G;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=ec;break}n.mode=25;case 25:if(0===c)break e;if(f=h-c,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=ec;break}f>n.wnext?(f-=n.wnext,m=n.wsize-f):m=n.wnext-f,f>n.length&&(f=n.length),p=n.window}else p=i,m=s-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{i[s++]=p[m++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===c)break e;i[s++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===a)break e;a--,l|=r[o++]<<u,u+=8}if(h-=c,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?ys(n.check,i,h,s-h):ms(n.check,i,h,s-h)),h=c,(n.flags?l:tc(l))!==n.check){e.msg="incorrect data check",n.mode=ec;break}l=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===a)break e;a--,l+=r[o++]<<u,u+=8}if(l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=ec;break}l=0,u=0}n.mode=29;case 29:L=Ua;break e;case ec:L=Da;break e;case 31:return Ba;default:return Oa}return e.next_out=s,e.avail_out=c,e.next_in=o,e.avail_in=a,n.hold=l,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<ec&&(n.mode<27||t!==Ea))&&dc(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?ys(n.check,i,h,e.next_out-h):ms(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===$a?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===h||t===Ea)&&L===Ja&&(L=Aa),L},fc={inflateReset:sc,inflateReset2:ac,inflateResetKeep:oc,inflateInit:function(e){return cc(e,15)},inflateInit2:cc,inflate:hc,inflateEnd:function(e){if(!e||!e.state)return Oa;var t=e.state;return t.window&&(t.window=null),e.state=null,Ja},inflateGetHeader:function(e,t){if(!e||!e.state)return Oa;var n=e.state;return 0==(2&n.wrap)?Oa:(n.head=t,t.done=!1,Ja)},inflateSetDictionary:function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?Oa:11===n.mode&&ms(1,t,r,0)!==n.check?Da:dc(e,t,r,r)?(n.mode=31,Ba):(n.havedict=1,Ja):Oa},inflateInfo:"pako inflate (from Nodeca project)"};var mc=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},pc=Object.prototype.toString,yc=vs.Z_NO_FLUSH,bc=vs.Z_FINISH,vc=vs.Z_OK,gc=vs.Z_STREAM_END,Zc=vs.Z_NEED_DICT,Xc=vs.Z_STREAM_ERROR,wc=vs.Z_DATA_ERROR,Lc=vs.Z_MEM_ERROR;function xc(e){this.options=fa({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xa,this.strm.avail_out=0;var n=fc.inflateInit2(this.strm,t.windowBits);if(n!==vc)throw new Error(bs[n]);if(this.header=new mc,fc.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=va(t.dictionary):"[object ArrayBuffer]"===pc.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=fc.inflateSetDictionary(this.strm,t.dictionary))!==vc))throw new Error(bs[n])}function Gc(e,t){var n=new xc(t);if(n.push(e),n.err)throw n.msg||bs[n.err];return n.result}xc.prototype.push=function(e,t){var n,r,i,o=this.strm,s=this.options.chunkSize,a=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?bc:yc,"[object ArrayBuffer]"===pc.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(s),o.next_out=0,o.avail_out=s),(n=fc.inflate(o,r))===Zc&&a&&((n=fc.inflateSetDictionary(o,a))===vc?n=fc.inflate(o,r):n===wc&&(n=Zc));o.avail_in>0&&n===gc&&o.state.wrap>0&&0!==e[o.next_in];)fc.inflateReset(o),n=fc.inflate(o,r);switch(n){case Xc:case wc:case Zc:case Lc:return this.onEnd(n),this.ended=!0,!1}if(i=o.avail_out,o.next_out&&(0===o.avail_out||n===gc))if("string"===this.options.to){var c=Za(o.output,o.next_out),l=o.next_out-c,u=ga(o.output,c);o.next_out=l,o.avail_out=s-l,l&&o.output.set(o.output.subarray(c,c+l),0),this.onData(u)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(n!==vc||0!==i){if(n===gc)return n=fc.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===o.avail_in)break}}return!0},xc.prototype.onData=function(e){this.chunks.push(e)},xc.prototype.onEnd=function(e){e===vc&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ma(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var kc={Inflate:xc,inflate:Gc,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Gc(e,t)},ungzip:Gc,constants:vs},Sc={Deflate:Va.Deflate,deflate:Va.deflate,deflateRaw:Va.deflateRaw,gzip:Va.gzip,Inflate:kc.Inflate,inflate:kc.inflate,inflateRaw:kc.inflateRaw,ungzip:kc.ungzip,constants:vs};function Wc(e,t,n){var r=void 0===t?null:t,i=function(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),i=0,o=n.length;i<o;++i)r[i]=n.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(e,void 0!==n&&n),o=i.indexOf("\n",10)+1,s=i.substring(o)+(r?"\/\/# sourceMappingURL="+r:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var Cc,Tc,Yc,Rc,Pc=(Cc="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgQ29ycG9yYXRpb24gMjAyMgogKiBCdW5kbGUgb2YgQGNyb3F1ZXQvY3JvcXVldAogKiBEYXRlOiAyMDIyLTEyLTE5CiAqIFZlcnNpb246IDEuMS4wLTE1CiAqLwoKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9LHQoZSl9ZnVuY3Rpb24gZSh0LGUscixuLGEsaSxvKXt0cnl7dmFyIHM9dFtpXShvKSxjPXMudmFsdWV9Y2F0Y2godCl7cmV0dXJuIHZvaWQgcih0KX1zLmRvbmU/ZShjKTpQcm9taXNlLnJlc29sdmUoYykudGhlbihuLGEpfWZ1bmN0aW9uIHIodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9dGhpcyxuPWFyZ3VtZW50cztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGEsaSl7dmFyIG89dC5hcHBseShyLG4pO2Z1bmN0aW9uIHModCl7ZShvLGEsaSxzLGMsIm5leHQiLHQpfWZ1bmN0aW9uIGModCl7ZShvLGEsaSxzLGMsInRocm93Iix0KX1zKHZvaWQgMCl9KSl9fWZ1bmN0aW9uIG4odCxlKXsobnVsbD09ZXx8ZT50Lmxlbmd0aCkmJihlPXQubGVuZ3RoKTtmb3IodmFyIHI9MCxuPW5ldyBBcnJheShlKTtyPGU7cisrKW5bcl09dFtyXTtyZXR1cm4gbn1mdW5jdGlvbiBhKHQsZSl7dmFyIHI9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnRbU3ltYm9sLml0ZXJhdG9yXXx8dFsiQEBpdGVyYXRvciJdO2lmKCFyKXtpZihBcnJheS5pc0FycmF5KHQpfHwocj1mdW5jdGlvbih0LGUpe2lmKHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4gbih0LGUpO3ZhciByPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KS5zbGljZSg4LC0xKTtyZXR1cm4iT2JqZWN0Ij09PXImJnQuY29uc3RydWN0b3ImJihyPXQuY29uc3RydWN0b3IubmFtZSksIk1hcCI9PT1yfHwiU2V0Ij09PXI/QXJyYXkuZnJvbSh0KToiQXJndW1lbnRzIj09PXJ8fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KHIpP24odCxlKTp2b2lkIDB9fSh0KSl8fGUmJnQmJiJudW1iZXIiPT10eXBlb2YgdC5sZW5ndGgpe3ImJih0PXIpO3ZhciBhPTAsaT1mdW5jdGlvbigpe307cmV0dXJue3M6aSxuOmZ1bmN0aW9uKCl7cmV0dXJuIGE+PXQubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTp0W2ErK119fSxlOmZ1bmN0aW9uKHQpe3Rocm93IHR9LGY6aX19dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpfXZhciBvLHM9ITAsYz0hMTtyZXR1cm57czpmdW5jdGlvbigpe3I9ci5jYWxsKHQpfSxuOmZ1bmN0aW9uKCl7dmFyIHQ9ci5uZXh0KCk7cmV0dXJuIHM9dC5kb25lLHR9LGU6ZnVuY3Rpb24odCl7Yz0hMCxvPXR9LGY6ZnVuY3Rpb24oKXt0cnl7c3x8bnVsbD09ci5yZXR1cm58fHIucmV0dXJuKCl9ZmluYWxseXtpZihjKXRocm93IG99fX19dmFyIGk9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp7fTshZnVuY3Rpb24oZSl7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHIsbj1PYmplY3QucHJvdG90eXBlLGE9bi5oYXNPd25Qcm9wZXJ0eSxpPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LG89aS5pdGVyYXRvcnx8IkBAaXRlcmF0b3IiLHM9aS5hc3luY0l0ZXJhdG9yfHwiQEBhc3luY0l0ZXJhdG9yIixjPWkudG9TdHJpbmdUYWd8fCJAQHRvU3RyaW5nVGFnIjtmdW5jdGlvbiBoKHQsZSxyKXtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pLHRbZV19dHJ5e2goe30sIiIpfWNhdGNoKHQpe2g9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0W2VdPXJ9fWZ1bmN0aW9uIGwodCxlLHIsbil7dmFyIGE9ZSYmZS5wcm90b3R5cGUgaW5zdGFuY2VvZiB2P2U6dixpPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLG89bmV3IFIobnx8W10pO3JldHVybiBpLl9pbnZva2U9ZnVuY3Rpb24odCxlLHIpe3ZhciBuPWY7cmV0dXJuIGZ1bmN0aW9uKGEsaSl7aWYobj09PV8pdGhyb3cgbmV3IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7aWYobj09PXApe2lmKCJ0aHJvdyI9PT1hKXRocm93IGk7cmV0dXJuIEwoKX1mb3Ioci5tZXRob2Q9YSxyLmFyZz1pOzspe3ZhciBvPXIuZGVsZWdhdGU7aWYobyl7dmFyIHM9RShvLHIpO2lmKHMpe2lmKHM9PT1nKWNvbnRpbnVlO3JldHVybiBzfX1pZigibmV4dCI9PT1yLm1ldGhvZClyLnNlbnQ9ci5fc2VudD1yLmFyZztlbHNlIGlmKCJ0aHJvdyI9PT1yLm1ldGhvZCl7aWYobj09PWYpdGhyb3cgbj1wLHIuYXJnO3IuZGlzcGF0Y2hFeGNlcHRpb24oci5hcmcpfWVsc2UicmV0dXJuIj09PXIubWV0aG9kJiZyLmFicnVwdCgicmV0dXJuIixyLmFyZyk7bj1fO3ZhciBjPXUodCxlLHIpO2lmKCJub3JtYWwiPT09Yy50eXBlKXtpZihuPXIuZG9uZT9wOmQsYy5hcmc9PT1nKWNvbnRpbnVlO3JldHVybnt2YWx1ZTpjLmFyZyxkb25lOnIuZG9uZX19InRocm93Ij09PWMudHlwZSYmKG49cCxyLm1ldGhvZD0idGhyb3ciLHIuYXJnPWMuYXJnKX19fSh0LHIsbyksaX1mdW5jdGlvbiB1KHQsZSxyKXt0cnl7cmV0dXJue3R5cGU6Im5vcm1hbCIsYXJnOnQuY2FsbChlLHIpfX1jYXRjaCh0KXtyZXR1cm57dHlwZToidGhyb3ciLGFyZzp0fX19ZS53cmFwPWw7dmFyIGY9InN1c3BlbmRlZFN0YXJ0IixkPSJzdXNwZW5kZWRZaWVsZCIsXz0iZXhlY3V0aW5nIixwPSJjb21wbGV0ZWQiLGc9e307ZnVuY3Rpb24gdigpe31mdW5jdGlvbiB5KCl7fWZ1bmN0aW9uIHcoKXt9dmFyIG09e307aChtLG8sKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSk7dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mLHg9YiYmYihiKEQoW10pKSk7eCYmeCE9PW4mJmEuY2FsbCh4LG8pJiYobT14KTt2YXIgaz13LnByb3RvdHlwZT12LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG0pO2Z1bmN0aW9uIHoodCl7WyJuZXh0IiwidGhyb3ciLCJyZXR1cm4iXS5mb3JFYWNoKChmdW5jdGlvbihlKXtoKHQsZSwoZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ludm9rZShlLHQpfSkpfSkpfWZ1bmN0aW9uIEEoZSxyKXtmdW5jdGlvbiBuKGksbyxzLGMpe3ZhciBoPXUoZVtpXSxlLG8pO2lmKCJ0aHJvdyIhPT1oLnR5cGUpe3ZhciBsPWguYXJnLGY9bC52YWx1ZTtyZXR1cm4gZiYmIm9iamVjdCI9PT10KGYpJiZhLmNhbGwoZiwiX19hd2FpdCIpP3IucmVzb2x2ZShmLl9fYXdhaXQpLnRoZW4oKGZ1bmN0aW9uKHQpe24oIm5leHQiLHQscyxjKX0pLChmdW5jdGlvbih0KXtuKCJ0aHJvdyIsdCxzLGMpfSkpOnIucmVzb2x2ZShmKS50aGVuKChmdW5jdGlvbih0KXtsLnZhbHVlPXQscyhsKX0pLChmdW5jdGlvbih0KXtyZXR1cm4gbigidGhyb3ciLHQscyxjKX0pKX1jKGguYXJnKX12YXIgaTt0aGlzLl9pbnZva2U9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBhKCl7cmV0dXJuIG5ldyByKChmdW5jdGlvbihyLGEpe24odCxlLHIsYSl9KSl9cmV0dXJuIGk9aT9pLnRoZW4oYSxhKTphKCl9fWZ1bmN0aW9uIEUodCxlKXt2YXIgbj10Lml0ZXJhdG9yW2UubWV0aG9kXTtpZihuPT09cil7aWYoZS5kZWxlZ2F0ZT1udWxsLCJ0aHJvdyI9PT1lLm1ldGhvZCl7aWYodC5pdGVyYXRvci5yZXR1cm4mJihlLm1ldGhvZD0icmV0dXJuIixlLmFyZz1yLEUodCxlKSwidGhyb3ciPT09ZS5tZXRob2QpKXJldHVybiBnO2UubWV0aG9kPSJ0aHJvdyIsZS5hcmc9bmV3IFR5cGVFcnJvcigiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZCIpfXJldHVybiBnfXZhciBhPXUobix0Lml0ZXJhdG9yLGUuYXJnKTtpZigidGhyb3ciPT09YS50eXBlKXJldHVybiBlLm1ldGhvZD0idGhyb3ciLGUuYXJnPWEuYXJnLGUuZGVsZWdhdGU9bnVsbCxnO3ZhciBpPWEuYXJnO3JldHVybiBpP2kuZG9uZT8oZVt0LnJlc3VsdE5hbWVdPWkudmFsdWUsZS5uZXh0PXQubmV4dExvYywicmV0dXJuIiE9PWUubWV0aG9kJiYoZS5tZXRob2Q9Im5leHQiLGUuYXJnPXIpLGUuZGVsZWdhdGU9bnVsbCxnKTppOihlLm1ldGhvZD0idGhyb3ciLGUuYXJnPW5ldyBUeXBlRXJyb3IoIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0IiksZS5kZWxlZ2F0ZT1udWxsLGcpfWZ1bmN0aW9uIFModCl7dmFyIGU9e3RyeUxvYzp0WzBdfTsxIGluIHQmJihlLmNhdGNoTG9jPXRbMV0pLDIgaW4gdCYmKGUuZmluYWxseUxvYz10WzJdLGUuYWZ0ZXJMb2M9dFszXSksdGhpcy50cnlFbnRyaWVzLnB1c2goZSl9ZnVuY3Rpb24gQih0KXt2YXIgZT10LmNvbXBsZXRpb258fHt9O2UudHlwZT0ibm9ybWFsIixkZWxldGUgZS5hcmcsdC5jb21wbGV0aW9uPWV9ZnVuY3Rpb24gUih0KXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6InJvb3QifV0sdC5mb3JFYWNoKFMsdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gRCh0KXtpZih0KXt2YXIgZT10W29dO2lmKGUpcmV0dXJuIGUuY2FsbCh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdC5uZXh0KXJldHVybiB0O2lmKCFpc05hTih0Lmxlbmd0aCkpe3ZhciBuPS0xLGk9ZnVuY3Rpb24gZSgpe2Zvcig7KytuPHQubGVuZ3RoOylpZihhLmNhbGwodCxuKSlyZXR1cm4gZS52YWx1ZT10W25dLGUuZG9uZT0hMSxlO3JldHVybiBlLnZhbHVlPXIsZS5kb25lPSEwLGV9O3JldHVybiBpLm5leHQ9aX19cmV0dXJue25leHQ6TH19ZnVuY3Rpb24gTCgpe3JldHVybnt2YWx1ZTpyLGRvbmU6ITB9fXJldHVybiB5LnByb3RvdHlwZT13LGgoaywiY29uc3RydWN0b3IiLHcpLGgodywiY29uc3RydWN0b3IiLHkpLHkuZGlzcGxheU5hbWU9aCh3LGMsIkdlbmVyYXRvckZ1bmN0aW9uIiksZS5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yO3JldHVybiEhZSYmKGU9PT15fHwiR2VuZXJhdG9yRnVuY3Rpb24iPT09KGUuZGlzcGxheU5hbWV8fGUubmFtZSkpfSxlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCx3KToodC5fX3Byb3RvX189dyxoKHQsYywiR2VuZXJhdG9yRnVuY3Rpb24iKSksdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShrKSx0fSxlLmF3cmFwPWZ1bmN0aW9uKHQpe3JldHVybntfX2F3YWl0OnR9fSx6KEEucHJvdG90eXBlKSxoKEEucHJvdG90eXBlLHMsKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSksZS5Bc3luY0l0ZXJhdG9yPUEsZS5hc3luYz1mdW5jdGlvbih0LHIsbixhLGkpe3ZvaWQgMD09PWkmJihpPVByb21pc2UpO3ZhciBvPW5ldyBBKGwodCxyLG4sYSksaSk7cmV0dXJuIGUuaXNHZW5lcmF0b3JGdW5jdGlvbihyKT9vOm8ubmV4dCgpLnRoZW4oKGZ1bmN0aW9uKHQpe3JldHVybiB0LmRvbmU/dC52YWx1ZTpvLm5leHQoKX0pKX0seihrKSxoKGssYywiR2VuZXJhdG9yIiksaChrLG8sKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSksaChrLCJ0b1N0cmluZyIsKGZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgR2VuZXJhdG9yXSJ9KSksZS5rZXlzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgciBpbiB0KWUucHVzaChyKTtyZXR1cm4gZS5yZXZlcnNlKCksZnVuY3Rpb24gcigpe2Zvcig7ZS5sZW5ndGg7KXt2YXIgbj1lLnBvcCgpO2lmKG4gaW4gdClyZXR1cm4gci52YWx1ZT1uLHIuZG9uZT0hMSxyfXJldHVybiByLmRvbmU9ITAscn19LGUudmFsdWVzPUQsUi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlIscmVzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9cix0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLmFyZz1yLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKEIpLCF0KWZvcih2YXIgZSBpbiB0aGlzKSJ0Ij09PWUuY2hhckF0KDApJiZhLmNhbGwodGhpcyxlKSYmIWlzTmFOKCtlLnNsaWNlKDEpKSYmKHRoaXNbZV09cil9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIHQ9dGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4gdGhpcy5ydmFsfSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbih0KXtpZih0aGlzLmRvbmUpdGhyb3cgdDt2YXIgZT10aGlzO2Z1bmN0aW9uIG4obixhKXtyZXR1cm4gcy50eXBlPSJ0aHJvdyIscy5hcmc9dCxlLm5leHQ9bixhJiYoZS5tZXRob2Q9Im5leHQiLGUuYXJnPXIpLCEhYX1mb3IodmFyIGk9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2k+PTA7LS1pKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbaV0scz1vLmNvbXBsZXRpb247aWYoInJvb3QiPT09by50cnlMb2MpcmV0dXJuIG4oImVuZCIpO2lmKG8udHJ5TG9jPD10aGlzLnByZXYpe3ZhciBjPWEuY2FsbChvLCJjYXRjaExvYyIpLGg9YS5jYWxsKG8sImZpbmFsbHlMb2MiKTtpZihjJiZoKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gbihvLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiBuKG8uZmluYWxseUxvYyl9ZWxzZSBpZihjKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gbihvLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFoKXRocm93IG5ldyBFcnJvcigidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHkiKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiBuKG8uZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBuPXRoaXMudHJ5RW50cmllc1tyXTtpZihuLnRyeUxvYzw9dGhpcy5wcmV2JiZhLmNhbGwobiwiZmluYWxseUxvYyIpJiZ0aGlzLnByZXY8bi5maW5hbGx5TG9jKXt2YXIgaT1uO2JyZWFrfX1pJiYoImJyZWFrIj09PXR8fCJjb250aW51ZSI9PT10KSYmaS50cnlMb2M8PWUmJmU8PWkuZmluYWxseUxvYyYmKGk9bnVsbCk7dmFyIG89aT9pLmNvbXBsZXRpb246e307cmV0dXJuIG8udHlwZT10LG8uYXJnPWUsaT8odGhpcy5tZXRob2Q9Im5leHQiLHRoaXMubmV4dD1pLmZpbmFsbHlMb2MsZyk6dGhpcy5jb21wbGV0ZShvKX0sY29tcGxldGU6ZnVuY3Rpb24odCxlKXtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiJicmVhayI9PT10LnR5cGV8fCJjb250aW51ZSI9PT10LnR5cGU/dGhpcy5uZXh0PXQuYXJnOiJyZXR1cm4iPT09dC50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9dC5hcmcsdGhpcy5tZXRob2Q9InJldHVybiIsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PXQudHlwZSYmZSYmKHRoaXMubmV4dD1lKSxnfSxmaW5pc2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW2VdO2lmKHIuZmluYWxseUxvYz09PXQpcmV0dXJuIHRoaXMuY29tcGxldGUoci5jb21wbGV0aW9uLHIuYWZ0ZXJMb2MpLEIociksZ319LGNhdGNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLnRyeUxvYz09PXQpe3ZhciBuPXIuY29tcGxldGlvbjtpZigidGhyb3ciPT09bi50eXBlKXt2YXIgYT1uLmFyZztCKHIpfXJldHVybiBhfX10aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6RCh0KSxyZXN1bHROYW1lOmUsbmV4dExvYzpufSwibmV4dCI9PT10aGlzLm1ldGhvZCYmKHRoaXMuYXJnPXIpLGd9fSxlfShlLmV4cG9ydHMpO3RyeXtnbG9iYWxUaGlzLnJlZ2VuZXJhdG9yUnVudGltZT1yfWNhdGNoKGUpeyJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgZ2xvYmFsVGhpcz8idW5kZWZpbmVkIjp0KGdsb2JhbFRoaXMpKT9nbG9iYWxUaGlzLnJlZ2VuZXJhdG9yUnVudGltZT1yOkZ1bmN0aW9uKCJyIiwicmVnZW5lcmF0b3JSdW50aW1lID0gciIpKHIpfX0oe2V4cG9ydHM6e319KTt2YXIgbz17ZXhwb3J0czp7fX07KGZ1bmN0aW9uKGUpe3ZhciByPTQsbj0wLGE9MSxpPTI7ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGU9dC5sZW5ndGg7LS1lPj0wOyl0W2VdPTB9dmFyIHM9MCxjPTEsaD0yLGw9Myx1PTI1OCxmPTI5LGQ9MjU2LF89ZCsxK2YscD0zMCxnPTE5LHY9MipfKzEseT0xNSx3PTE2LG09NyxiPTI1Nix4PTE2LGs9MTcsej0xOCxBPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDBdKSxFPW5ldyBVaW50OEFycmF5KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXSksUz1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN10pLEI9bmV3IFVpbnQ4QXJyYXkoWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdKSxSPTUxMixEPW5ldyBBcnJheSgyKihfKzIpKTtvKEQpO3ZhciBMPW5ldyBBcnJheSgyKnApO28oTCk7dmFyIFU9bmV3IEFycmF5KFIpO28oVSk7dmFyIEM9bmV3IEFycmF5KHUtbCsxKTtvKEMpO3ZhciBPPW5ldyBBcnJheShmKTtvKE8pO3ZhciBULEYsSCxaPW5ldyBBcnJheShwKTtmdW5jdGlvbiBNKHQsZSxyLG4sYSl7dGhpcy5zdGF0aWNfdHJlZT10LHRoaXMuZXh0cmFfYml0cz1lLHRoaXMuZXh0cmFfYmFzZT1yLHRoaXMuZWxlbXM9bix0aGlzLm1heF9sZW5ndGg9YSx0aGlzLmhhc19zdHJlZT10JiZ0Lmxlbmd0aH1mdW5jdGlvbiBJKHQsZSl7dGhpcy5keW5fdHJlZT10LHRoaXMubWF4X2NvZGU9MCx0aGlzLnN0YXRfZGVzYz1lfW8oWik7dmFyIE49ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MjU2P1VbdF06VVsyNTYrKHQ+Pj43KV19LFA9ZnVuY3Rpb24odCxlKXt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTV9LGo9ZnVuY3Rpb24odCxlLHIpe3QuYmlfdmFsaWQ+dy1yPyh0LmJpX2J1Znw9ZTw8dC5iaV92YWxpZCY2NTUzNSxQKHQsdC5iaV9idWYpLHQuYmlfYnVmPWU+PnctdC5iaV92YWxpZCx0LmJpX3ZhbGlkKz1yLXcpOih0LmJpX2J1Znw9ZTw8dC5iaV92YWxpZCY2NTUzNSx0LmJpX3ZhbGlkKz1yKX0sSz1mdW5jdGlvbih0LGUscil7aih0LHJbMiplXSxyWzIqZSsxXSl9LFg9ZnVuY3Rpb24odCxlKXt2YXIgcj0wO2Rve3J8PTEmdCx0Pj4+PTEscjw8PTF9d2hpbGUoLS1lPjApO3JldHVybiByPj4+MX0scT1mdW5jdGlvbih0KXsxNj09PXQuYmlfdmFsaWQ/KFAodCx0LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTApOnQuYmlfdmFsaWQ+PTgmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmdC5iaV9idWYsdC5iaV9idWY+Pj04LHQuYmlfdmFsaWQtPTgpfSxHPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbixhLGksbyxzLGM9ZS5keW5fdHJlZSxoPWUubWF4X2NvZGUsbD1lLnN0YXRfZGVzYy5zdGF0aWNfdHJlZSx1PWUuc3RhdF9kZXNjLmhhc19zdHJlZSxmPWUuc3RhdF9kZXNjLmV4dHJhX2JpdHMsZD1lLnN0YXRfZGVzYy5leHRyYV9iYXNlLF89ZS5zdGF0X2Rlc2MubWF4X2xlbmd0aCxwPTA7Zm9yKGk9MDtpPD15O2krKyl0LmJsX2NvdW50W2ldPTA7Zm9yKGNbMip0LmhlYXBbdC5oZWFwX21heF0rMV09MCxyPXQuaGVhcF9tYXgrMTtyPHY7cisrKShpPWNbMipjWzIqKG49dC5oZWFwW3JdKSsxXSsxXSsxKT5fJiYoaT1fLHArKyksY1syKm4rMV09aSxuPmh8fCh0LmJsX2NvdW50W2ldKyssbz0wLG4+PWQmJihvPWZbbi1kXSkscz1jWzIqbl0sdC5vcHRfbGVuKz1zKihpK28pLHUmJih0LnN0YXRpY19sZW4rPXMqKGxbMipuKzFdK28pKSk7aWYoMCE9PXApe2Rve2ZvcihpPV8tMTswPT09dC5ibF9jb3VudFtpXTspaS0tO3QuYmxfY291bnRbaV0tLSx0LmJsX2NvdW50W2krMV0rPTIsdC5ibF9jb3VudFtfXS0tLHAtPTJ9d2hpbGUocD4wKTtmb3IoaT1fOzAhPT1pO2ktLSlmb3Iobj10LmJsX2NvdW50W2ldOzAhPT1uOykoYT10LmhlYXBbLS1yXSk+aHx8KGNbMiphKzFdIT09aSYmKHQub3B0X2xlbis9KGktY1syKmErMV0pKmNbMiphXSxjWzIqYSsxXT1pKSxuLS0pfX0sVz1mdW5jdGlvbih0LGUscil7dmFyIG4sYSxpPW5ldyBBcnJheSh5KzEpLG89MDtmb3Iobj0xO248PXk7bisrKWlbbl09bz1vK3Jbbi0xXTw8MTtmb3IoYT0wO2E8PWU7YSsrKXt2YXIgcz10WzIqYSsxXTswIT09cyYmKHRbMiphXT1YKGlbc10rKyxzKSl9fSxZPWZ1bmN0aW9uKCl7dmFyIHQsZSxyLG4sYSxpPW5ldyBBcnJheSh5KzEpO2ZvcihyPTAsbj0wO248Zi0xO24rKylmb3IoT1tuXT1yLHQ9MDt0PDE8PEFbbl07dCsrKUNbcisrXT1uO2ZvcihDW3ItMV09bixhPTAsbj0wO248MTY7bisrKWZvcihaW25dPWEsdD0wO3Q8MTw8RVtuXTt0KyspVVthKytdPW47Zm9yKGE+Pj03O248cDtuKyspZm9yKFpbbl09YTw8Nyx0PTA7dDwxPDxFW25dLTc7dCsrKVVbMjU2K2ErK109bjtmb3IoZT0wO2U8PXk7ZSsrKWlbZV09MDtmb3IodD0wO3Q8PTE0MzspRFsyKnQrMV09OCx0KyssaVs4XSsrO2Zvcig7dDw9MjU1OylEWzIqdCsxXT05LHQrKyxpWzldKys7Zm9yKDt0PD0yNzk7KURbMip0KzFdPTcsdCsrLGlbN10rKztmb3IoO3Q8PTI4NzspRFsyKnQrMV09OCx0KyssaVs4XSsrO2ZvcihXKEQsXysxLGkpLHQ9MDt0PHA7dCsrKUxbMip0KzFdPTUsTFsyKnRdPVgodCw1KTtUPW5ldyBNKEQsQSxkKzEsXyx5KSxGPW5ldyBNKEwsRSwwLHAseSksSD1uZXcgTShuZXcgQXJyYXkoMCksUywwLGcsbSl9LFY9ZnVuY3Rpb24odCl7dmFyIGU7Zm9yKGU9MDtlPF87ZSsrKXQuZHluX2x0cmVlWzIqZV09MDtmb3IoZT0wO2U8cDtlKyspdC5keW5fZHRyZWVbMiplXT0wO2ZvcihlPTA7ZTxnO2UrKyl0LmJsX3RyZWVbMiplXT0wO3QuZHluX2x0cmVlWzIqYl09MSx0Lm9wdF9sZW49dC5zdGF0aWNfbGVuPTAsdC5sYXN0X2xpdD10Lm1hdGNoZXM9MH0sJD1mdW5jdGlvbih0KXt0LmJpX3ZhbGlkPjg/UCh0LHQuYmlfYnVmKTp0LmJpX3ZhbGlkPjAmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT10LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTB9LFE9ZnVuY3Rpb24odCxlLHIsbil7JCh0KSxuJiYoUCh0LHIpLFAodCx+cikpLHQucGVuZGluZ19idWYuc2V0KHQud2luZG93LnN1YmFycmF5KGUsZStyKSx0LnBlbmRpbmcpLHQucGVuZGluZys9cn0sSj1mdW5jdGlvbih0LGUscixuKXt2YXIgYT0yKmUsaT0yKnI7cmV0dXJuIHRbYV08dFtpXXx8dFthXT09PXRbaV0mJm5bZV08PW5bcl19LHR0PWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG49dC5oZWFwW3JdLGE9cjw8MTthPD10LmhlYXBfbGVuJiYoYTx0LmhlYXBfbGVuJiZKKGUsdC5oZWFwW2ErMV0sdC5oZWFwW2FdLHQuZGVwdGgpJiZhKyssIUooZSxuLHQuaGVhcFthXSx0LmRlcHRoKSk7KXQuaGVhcFtyXT10LmhlYXBbYV0scj1hLGE8PD0xO3QuaGVhcFtyXT1ufSxldD1mdW5jdGlvbih0LGUscil7dmFyIG4sYSxpLG8scz0wO2lmKDAhPT10Lmxhc3RfbGl0KWRve249dC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqc108PDh8dC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqcysxXSxhPXQucGVuZGluZ19idWZbdC5sX2J1ZitzXSxzKyssMD09PW4/Syh0LGEsZSk6KGk9Q1thXSxLKHQsaStkKzEsZSksMCE9PShvPUFbaV0pJiYoYS09T1tpXSxqKHQsYSxvKSksbi0tLGk9TihuKSxLKHQsaSxyKSwwIT09KG89RVtpXSkmJihuLT1aW2ldLGoodCxuLG8pKSl9d2hpbGUoczx0Lmxhc3RfbGl0KTtLKHQsYixlKX0scnQ9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGEsaT1lLmR5bl90cmVlLG89ZS5zdGF0X2Rlc2Muc3RhdGljX3RyZWUscz1lLnN0YXRfZGVzYy5oYXNfc3RyZWUsYz1lLnN0YXRfZGVzYy5lbGVtcyxoPS0xO2Zvcih0LmhlYXBfbGVuPTAsdC5oZWFwX21heD12LHI9MDtyPGM7cisrKTAhPT1pWzIqcl0/KHQuaGVhcFsrK3QuaGVhcF9sZW5dPWg9cix0LmRlcHRoW3JdPTApOmlbMipyKzFdPTA7Zm9yKDt0LmhlYXBfbGVuPDI7KWlbMiooYT10LmhlYXBbKyt0LmhlYXBfbGVuXT1oPDI/KytoOjApXT0xLHQuZGVwdGhbYV09MCx0Lm9wdF9sZW4tLSxzJiYodC5zdGF0aWNfbGVuLT1vWzIqYSsxXSk7Zm9yKGUubWF4X2NvZGU9aCxyPXQuaGVhcF9sZW4+PjE7cj49MTtyLS0pdHQodCxpLHIpO2E9Yztkb3tyPXQuaGVhcFsxXSx0LmhlYXBbMV09dC5oZWFwW3QuaGVhcF9sZW4tLV0sdHQodCxpLDEpLG49dC5oZWFwWzFdLHQuaGVhcFstLXQuaGVhcF9tYXhdPXIsdC5oZWFwWy0tdC5oZWFwX21heF09bixpWzIqYV09aVsyKnJdK2lbMipuXSx0LmRlcHRoW2FdPSh0LmRlcHRoW3JdPj10LmRlcHRoW25dP3QuZGVwdGhbcl06dC5kZXB0aFtuXSkrMSxpWzIqcisxXT1pWzIqbisxXT1hLHQuaGVhcFsxXT1hKyssdHQodCxpLDEpfXdoaWxlKHQuaGVhcF9sZW4+PTIpO3QuaGVhcFstLXQuaGVhcF9tYXhdPXQuaGVhcFsxXSxHKHQsZSksVyhpLGgsdC5ibF9jb3VudCl9LG50PWZ1bmN0aW9uKHQsZSxyKXt2YXIgbixhLGk9LTEsbz1lWzFdLHM9MCxjPTcsaD00O2ZvcigwPT09byYmKGM9MTM4LGg9MyksZVsyKihyKzEpKzFdPTY1NTM1LG49MDtuPD1yO24rKylhPW8sbz1lWzIqKG4rMSkrMV0sKytzPGMmJmE9PT1vfHwoczxoP3QuYmxfdHJlZVsyKmFdKz1zOjAhPT1hPyhhIT09aSYmdC5ibF90cmVlWzIqYV0rKyx0LmJsX3RyZWVbMip4XSsrKTpzPD0xMD90LmJsX3RyZWVbMiprXSsrOnQuYmxfdHJlZVsyKnpdKysscz0wLGk9YSwwPT09bz8oYz0xMzgsaD0zKTphPT09bz8oYz02LGg9Myk6KGM9NyxoPTQpKX0sYXQ9ZnVuY3Rpb24odCxlLHIpe3ZhciBuLGEsaT0tMSxvPWVbMV0scz0wLGM9NyxoPTQ7Zm9yKDA9PT1vJiYoYz0xMzgsaD0zKSxuPTA7bjw9cjtuKyspaWYoYT1vLG89ZVsyKihuKzEpKzFdLCEoKytzPGMmJmE9PT1vKSl7aWYoczxoKWRve0sodCxhLHQuYmxfdHJlZSl9d2hpbGUoMCE9LS1zKTtlbHNlIDAhPT1hPyhhIT09aSYmKEsodCxhLHQuYmxfdHJlZSkscy0tKSxLKHQseCx0LmJsX3RyZWUpLGoodCxzLTMsMikpOnM8PTEwPyhLKHQsayx0LmJsX3RyZWUpLGoodCxzLTMsMykpOihLKHQseix0LmJsX3RyZWUpLGoodCxzLTExLDcpKTtzPTAsaT1hLDA9PT1vPyhjPTEzOCxoPTMpOmE9PT1vPyhjPTYsaD0zKTooYz03LGg9NCl9fSxpdD1mdW5jdGlvbih0KXt2YXIgZTtmb3IobnQodCx0LmR5bl9sdHJlZSx0LmxfZGVzYy5tYXhfY29kZSksbnQodCx0LmR5bl9kdHJlZSx0LmRfZGVzYy5tYXhfY29kZSkscnQodCx0LmJsX2Rlc2MpLGU9Zy0xO2U+PTMmJjA9PT10LmJsX3RyZWVbMipCW2VdKzFdO2UtLSk7cmV0dXJuIHQub3B0X2xlbis9MyooZSsxKSs1KzUrNCxlfSxvdD1mdW5jdGlvbih0LGUscixuKXt2YXIgYTtmb3Ioaih0LGUtMjU3LDUpLGoodCxyLTEsNSksaih0LG4tNCw0KSxhPTA7YTxuO2ErKylqKHQsdC5ibF90cmVlWzIqQlthXSsxXSwzKTthdCh0LHQuZHluX2x0cmVlLGUtMSksYXQodCx0LmR5bl9kdHJlZSxyLTEpfSxzdD1mdW5jdGlvbih0KXt2YXIgZSxyPTQwOTM2MjQ0NDc7Zm9yKGU9MDtlPD0zMTtlKysscj4+Pj0xKWlmKDEmciYmMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIG47aWYoMCE9PXQuZHluX2x0cmVlWzE4XXx8MCE9PXQuZHluX2x0cmVlWzIwXXx8MCE9PXQuZHluX2x0cmVlWzI2XSlyZXR1cm4gYTtmb3IoZT0zMjtlPGQ7ZSsrKWlmKDAhPT10LmR5bl9sdHJlZVsyKmVdKXJldHVybiBhO3JldHVybiBufSxjdD0hMSxodD1mdW5jdGlvbih0LGUscixuKXtqKHQsKHM8PDEpKyhuPzE6MCksMyksUSh0LGUsciwhMCl9LGx0PWZ1bmN0aW9uKHQsZSxuLGEpe3ZhciBvLHMsbD0wO3QubGV2ZWw+MD8odC5zdHJtLmRhdGFfdHlwZT09PWkmJih0LnN0cm0uZGF0YV90eXBlPXN0KHQpKSxydCh0LHQubF9kZXNjKSxydCh0LHQuZF9kZXNjKSxsPWl0KHQpLG89dC5vcHRfbGVuKzMrNz4+PjMsKHM9dC5zdGF0aWNfbGVuKzMrNz4+PjMpPD1vJiYobz1zKSk6bz1zPW4rNSxuKzQ8PW8mJi0xIT09ZT9odCh0LGUsbixhKTp0LnN0cmF0ZWd5PT09cnx8cz09PW8/KGoodCwoYzw8MSkrKGE/MTowKSwzKSxldCh0LEQsTCkpOihqKHQsKGg8PDEpKyhhPzE6MCksMyksb3QodCx0LmxfZGVzYy5tYXhfY29kZSsxLHQuZF9kZXNjLm1heF9jb2RlKzEsbCsxKSxldCh0LHQuZHluX2x0cmVlLHQuZHluX2R0cmVlKSksVih0KSxhJiYkKHQpfSx1dD17X3RyX2luaXQ6ZnVuY3Rpb24odCl7Y3R8fChZKCksY3Q9ITApLHQubF9kZXNjPW5ldyBJKHQuZHluX2x0cmVlLFQpLHQuZF9kZXNjPW5ldyBJKHQuZHluX2R0cmVlLEYpLHQuYmxfZGVzYz1uZXcgSSh0LmJsX3RyZWUsSCksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTAsVih0KX0sX3RyX3N0b3JlZF9ibG9jazpodCxfdHJfZmx1c2hfYmxvY2s6bHQsX3RyX3RhbGx5OmZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdF09ZT4+PjgmMjU1LHQucGVuZGluZ19idWZbdC5kX2J1ZisyKnQubGFzdF9saXQrMV09MjU1JmUsdC5wZW5kaW5nX2J1Zlt0LmxfYnVmK3QubGFzdF9saXRdPTI1NSZyLHQubGFzdF9saXQrKywwPT09ZT90LmR5bl9sdHJlZVsyKnJdKys6KHQubWF0Y2hlcysrLGUtLSx0LmR5bl9sdHJlZVsyKihDW3JdK2QrMSldKyssdC5keW5fZHRyZWVbMipOKGUpXSsrKSx0Lmxhc3RfbGl0PT09dC5saXRfYnVmc2l6ZS0xfSxfdHJfYWxpZ246ZnVuY3Rpb24odCl7aih0LGM8PDEsMyksSyh0LGIsRCkscSh0KX19LGZ0PWZ1bmN0aW9uKHQsZSxyLG4pe2Zvcih2YXIgYT02NTUzNSZ0fDAsaT10Pj4+MTYmNjU1MzV8MCxvPTA7MCE9PXI7KXtyLT1vPXI+MmUzPzJlMzpyO2Rve2k9aSsoYT1hK2VbbisrXXwwKXwwfXdoaWxlKC0tbyk7YSU9NjU1MjEsaSU9NjU1MjF9cmV0dXJuIGF8aTw8MTZ8MH0sZHQ9bmV3IFVpbnQzMkFycmF5KGZ1bmN0aW9uKCl7Zm9yKHZhciB0LGU9W10scj0wO3I8MjU2O3IrKyl7dD1yO2Zvcih2YXIgbj0wO248ODtuKyspdD0xJnQ/Mzk4ODI5MjM4NF50Pj4+MTp0Pj4+MTtlW3JdPXR9cmV0dXJuIGV9KCkpLF90PWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBhPWR0LGk9bityO3RePS0xO2Zvcih2YXIgbz1uO288aTtvKyspdD10Pj4+OF5hWzI1NSYodF5lW29dKV07cmV0dXJuLTFedH0scHQ9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifSxndD17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX01FTV9FUlJPUjotNCxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fSx2dD11dC5fdHJfaW5pdCx5dD11dC5fdHJfc3RvcmVkX2Jsb2NrLHd0PXV0Ll90cl9mbHVzaF9ibG9jayxtdD11dC5fdHJfdGFsbHksYnQ9dXQuX3RyX2FsaWduLHh0PWd0LlpfTk9fRkxVU0gsa3Q9Z3QuWl9QQVJUSUFMX0ZMVVNILHp0PWd0LlpfRlVMTF9GTFVTSCxBdD1ndC5aX0ZJTklTSCxFdD1ndC5aX0JMT0NLLFN0PWd0LlpfT0ssQnQ9Z3QuWl9TVFJFQU1fRU5ELFJ0PWd0LlpfU1RSRUFNX0VSUk9SLER0PWd0LlpfREFUQV9FUlJPUixMdD1ndC5aX0JVRl9FUlJPUixVdD1ndC5aX0RFRkFVTFRfQ09NUFJFU1NJT04sQ3Q9Z3QuWl9GSUxURVJFRCxPdD1ndC5aX0hVRkZNQU5fT05MWSxUdD1ndC5aX1JMRSxGdD1ndC5aX0ZJWEVELEh0PWd0LlpfREVGQVVMVF9TVFJBVEVHWSxadD1ndC5aX1VOS05PV04sTXQ9Z3QuWl9ERUZMQVRFRCxJdD05LE50PTE1LFB0PTgsanQ9Mjg2LEt0PTMwLFh0PTE5LHF0PTIqanQrMSxHdD0xNSxXdD0zLFl0PTI1OCxWdD1ZdCtXdCsxLCR0PTMyLFF0PTQyLEp0PTY5LHRlPTczLGVlPTkxLHJlPTEwMyxuZT0xMTMsYWU9NjY2LGllPTEsb2U9MixzZT0zLGNlPTQsaGU9MyxsZT1mdW5jdGlvbih0LGUpe3JldHVybiB0Lm1zZz1wdFtlXSxlfSx1ZT1mdW5jdGlvbih0KXtyZXR1cm4odDw8MSktKHQ+ND85OjApfSxmZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGg7LS1lPj0wOyl0W2VdPTB9LGRlPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4oZTw8dC5oYXNoX3NoaWZ0XnIpJnQuaGFzaF9tYXNrfSxfZT1mdW5jdGlvbih0KXt2YXIgZT10LnN0YXRlLHI9ZS5wZW5kaW5nO3I+dC5hdmFpbF9vdXQmJihyPXQuYXZhaWxfb3V0KSwwIT09ciYmKHQub3V0cHV0LnNldChlLnBlbmRpbmdfYnVmLnN1YmFycmF5KGUucGVuZGluZ19vdXQsZS5wZW5kaW5nX291dCtyKSx0Lm5leHRfb3V0KSx0Lm5leHRfb3V0Kz1yLGUucGVuZGluZ19vdXQrPXIsdC50b3RhbF9vdXQrPXIsdC5hdmFpbF9vdXQtPXIsZS5wZW5kaW5nLT1yLDA9PT1lLnBlbmRpbmcmJihlLnBlbmRpbmdfb3V0PTApKX0scGU9ZnVuY3Rpb24odCxlKXt3dCh0LHQuYmxvY2tfc3RhcnQ+PTA/dC5ibG9ja19zdGFydDotMSx0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQsZSksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0LF9lKHQuc3RybSl9LGdlPWZ1bmN0aW9uKHQsZSl7dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZX0sdmU9ZnVuY3Rpb24odCxlKXt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109MjU1JmV9LHllPWZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBhPXQuYXZhaWxfaW47cmV0dXJuIGE+biYmKGE9biksMD09PWE/MDoodC5hdmFpbF9pbi09YSxlLnNldCh0LmlucHV0LnN1YmFycmF5KHQubmV4dF9pbix0Lm5leHRfaW4rYSksciksMT09PXQuc3RhdGUud3JhcD90LmFkbGVyPWZ0KHQuYWRsZXIsZSxhLHIpOjI9PT10LnN0YXRlLndyYXAmJih0LmFkbGVyPV90KHQuYWRsZXIsZSxhLHIpKSx0Lm5leHRfaW4rPWEsdC50b3RhbF9pbis9YSxhKX0sd2U9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGE9dC5tYXhfY2hhaW5fbGVuZ3RoLGk9dC5zdHJzdGFydCxvPXQucHJldl9sZW5ndGgscz10Lm5pY2VfbWF0Y2gsYz10LnN0cnN0YXJ0PnQud19zaXplLVZ0P3Quc3Ryc3RhcnQtKHQud19zaXplLVZ0KTowLGg9dC53aW5kb3csbD10LndfbWFzayx1PXQucHJldixmPXQuc3Ryc3RhcnQrWXQsZD1oW2krby0xXSxfPWhbaStvXTt0LnByZXZfbGVuZ3RoPj10Lmdvb2RfbWF0Y2gmJihhPj49Mikscz50Lmxvb2thaGVhZCYmKHM9dC5sb29rYWhlYWQpO2Rve2lmKGhbKHI9ZSkrb109PT1fJiZoW3Irby0xXT09PWQmJmhbcl09PT1oW2ldJiZoWysrcl09PT1oW2krMV0pe2krPTIscisrO2Rve313aGlsZShoWysraV09PT1oWysrcl0mJmhbKytpXT09PWhbKytyXSYmaFsrK2ldPT09aFsrK3JdJiZoWysraV09PT1oWysrcl0mJmhbKytpXT09PWhbKytyXSYmaFsrK2ldPT09aFsrK3JdJiZoWysraV09PT1oWysrcl0mJmhbKytpXT09PWhbKytyXSYmaTxmKTtpZihuPVl0LShmLWkpLGk9Zi1ZdCxuPm8pe2lmKHQubWF0Y2hfc3RhcnQ9ZSxvPW4sbj49cylicmVhaztkPWhbaStvLTFdLF89aFtpK29dfX19d2hpbGUoKGU9dVtlJmxdKT5jJiYwIT0tLWEpO3JldHVybiBvPD10Lmxvb2thaGVhZD9vOnQubG9va2FoZWFkfSxtZT1mdW5jdGlvbih0KXt2YXIgZSxyLG4sYSxpLG89dC53X3NpemU7ZG97aWYoYT10LndpbmRvd19zaXplLXQubG9va2FoZWFkLXQuc3Ryc3RhcnQsdC5zdHJzdGFydD49bysoby1WdCkpe3Qud2luZG93LnNldCh0LndpbmRvdy5zdWJhcnJheShvLG8rbyksMCksdC5tYXRjaF9zdGFydC09byx0LnN0cnN0YXJ0LT1vLHQuYmxvY2tfc3RhcnQtPW8sZT1yPXQuaGFzaF9zaXplO2Rve249dC5oZWFkWy0tZV0sdC5oZWFkW2VdPW4+PW8/bi1vOjB9d2hpbGUoLS1yKTtlPXI9bztkb3tuPXQucHJldlstLWVdLHQucHJldltlXT1uPj1vP24tbzowfXdoaWxlKC0tcik7YSs9b31pZigwPT09dC5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKHI9eWUodC5zdHJtLHQud2luZG93LHQuc3Ryc3RhcnQrdC5sb29rYWhlYWQsYSksdC5sb29rYWhlYWQrPXIsdC5sb29rYWhlYWQrdC5pbnNlcnQ+PVd0KWZvcihpPXQuc3Ryc3RhcnQtdC5pbnNlcnQsdC5pbnNfaD10LndpbmRvd1tpXSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1tpKzFdKTt0Lmluc2VydCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W2krV3QtMV0pLHQucHJldltpJnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPWksaSsrLHQuaW5zZXJ0LS0sISh0Lmxvb2thaGVhZCt0Lmluc2VydDxXdCkpOyk7fXdoaWxlKHQubG9va2FoZWFkPFZ0JiYwIT09dC5zdHJtLmF2YWlsX2luKX0sYmU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbjs7KXtpZih0Lmxvb2thaGVhZDxWdCl7aWYobWUodCksdC5sb29rYWhlYWQ8VnQmJmU9PT14dClyZXR1cm4gaWU7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfWlmKHI9MCx0Lmxvb2thaGVhZD49V3QmJih0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0K1d0LTFdKSxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnQpLDAhPT1yJiZ0LnN0cnN0YXJ0LXI8PXQud19zaXplLVZ0JiYodC5tYXRjaF9sZW5ndGg9d2UodCxyKSksdC5tYXRjaF9sZW5ndGg+PVd0KWlmKG49bXQodCx0LnN0cnN0YXJ0LXQubWF0Y2hfc3RhcnQsdC5tYXRjaF9sZW5ndGgtV3QpLHQubG9va2FoZWFkLT10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aDw9dC5tYXhfbGF6eV9tYXRjaCYmdC5sb29rYWhlYWQ+PVd0KXt0Lm1hdGNoX2xlbmd0aC0tO2Rve3Quc3Ryc3RhcnQrKyx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0K1d0LTFdKSxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnR9d2hpbGUoMCE9LS10Lm1hdGNoX2xlbmd0aCk7dC5zdHJzdGFydCsrfWVsc2UgdC5zdHJzdGFydCs9dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg9MCx0Lmluc19oPXQud2luZG93W3Quc3Ryc3RhcnRdLHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrMV0pO2Vsc2Ugbj1tdCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydF0pLHQubG9va2FoZWFkLS0sdC5zdHJzdGFydCsrO2lmKG4mJihwZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfXJldHVybiB0Lmluc2VydD10LnN0cnN0YXJ0PFd0LTE/dC5zdHJzdGFydDpXdC0xLGU9PT1BdD8ocGUodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/c2U6Y2UpOnQubGFzdF9saXQmJihwZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCk/aWU6b2V9LHhlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByLG4sYTs7KXtpZih0Lmxvb2thaGVhZDxWdCl7aWYobWUodCksdC5sb29rYWhlYWQ8VnQmJmU9PT14dClyZXR1cm4gaWU7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfWlmKHI9MCx0Lmxvb2thaGVhZD49V3QmJih0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0K1d0LTFdKSxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnQpLHQucHJldl9sZW5ndGg9dC5tYXRjaF9sZW5ndGgsdC5wcmV2X21hdGNoPXQubWF0Y2hfc3RhcnQsdC5tYXRjaF9sZW5ndGg9V3QtMSwwIT09ciYmdC5wcmV2X2xlbmd0aDx0Lm1heF9sYXp5X21hdGNoJiZ0LnN0cnN0YXJ0LXI8PXQud19zaXplLVZ0JiYodC5tYXRjaF9sZW5ndGg9d2UodCxyKSx0Lm1hdGNoX2xlbmd0aDw9NSYmKHQuc3RyYXRlZ3k9PT1DdHx8dC5tYXRjaF9sZW5ndGg9PT1XdCYmdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0PjQwOTYpJiYodC5tYXRjaF9sZW5ndGg9V3QtMSkpLHQucHJldl9sZW5ndGg+PVd0JiZ0Lm1hdGNoX2xlbmd0aDw9dC5wcmV2X2xlbmd0aCl7YT10LnN0cnN0YXJ0K3QubG9va2FoZWFkLVd0LG49bXQodCx0LnN0cnN0YXJ0LTEtdC5wcmV2X21hdGNoLHQucHJldl9sZW5ndGgtV3QpLHQubG9va2FoZWFkLT10LnByZXZfbGVuZ3RoLTEsdC5wcmV2X2xlbmd0aC09Mjtkb3srK3Quc3Ryc3RhcnQ8PWEmJih0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0K1d0LTFdKSxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnQpfXdoaWxlKDAhPS0tdC5wcmV2X2xlbmd0aCk7aWYodC5tYXRjaF9hdmFpbGFibGU9MCx0Lm1hdGNoX2xlbmd0aD1XdC0xLHQuc3Ryc3RhcnQrKyxuJiYocGUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1lbHNlIGlmKHQubWF0Y2hfYXZhaWxhYmxlKXtpZigobj1tdCh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSkpJiZwZSh0LCExKSx0LnN0cnN0YXJ0KyssdC5sb29rYWhlYWQtLSwwPT09dC5zdHJtLmF2YWlsX291dClyZXR1cm4gaWV9ZWxzZSB0Lm1hdGNoX2F2YWlsYWJsZT0xLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tfXJldHVybiB0Lm1hdGNoX2F2YWlsYWJsZSYmKG49bXQodCwwLHQud2luZG93W3Quc3Ryc3RhcnQtMV0pLHQubWF0Y2hfYXZhaWxhYmxlPTApLHQuaW5zZXJ0PXQuc3Ryc3RhcnQ8V3QtMT90LnN0cnN0YXJ0Old0LTEsZT09PUF0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpjZSk6dC5sYXN0X2xpdCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTpvZX0sa2U9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbixhLGksbz10LndpbmRvdzs7KXtpZih0Lmxvb2thaGVhZDw9WXQpe2lmKG1lKHQpLHQubG9va2FoZWFkPD1ZdCYmZT09PXh0KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCx0Lmxvb2thaGVhZD49V3QmJnQuc3Ryc3RhcnQ+MCYmKG49b1thPXQuc3Ryc3RhcnQtMV0pPT09b1srK2FdJiZuPT09b1srK2FdJiZuPT09b1srK2FdKXtpPXQuc3Ryc3RhcnQrWXQ7ZG97fXdoaWxlKG49PT1vWysrYV0mJm49PT1vWysrYV0mJm49PT1vWysrYV0mJm49PT1vWysrYV0mJm49PT1vWysrYV0mJm49PT1vWysrYV0mJm49PT1vWysrYV0mJm49PT1vWysrYV0mJmE8aSk7dC5tYXRjaF9sZW5ndGg9WXQtKGktYSksdC5tYXRjaF9sZW5ndGg+dC5sb29rYWhlYWQmJih0Lm1hdGNoX2xlbmd0aD10Lmxvb2thaGVhZCl9aWYodC5tYXRjaF9sZW5ndGg+PVd0PyhyPW10KHQsMSx0Lm1hdGNoX2xlbmd0aC1XdCksdC5sb29rYWhlYWQtPXQubWF0Y2hfbGVuZ3RoLHQuc3Ryc3RhcnQrPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPTApOihyPW10KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0KyspLHImJihwZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfXJldHVybiB0Lmluc2VydD0wLGU9PT1BdD8ocGUodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/c2U6Y2UpOnQubGFzdF9saXQmJihwZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCk/aWU6b2V9LHplPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByOzspe2lmKDA9PT10Lmxvb2thaGVhZCYmKG1lKHQpLDA9PT10Lmxvb2thaGVhZCkpe2lmKGU9PT14dClyZXR1cm4gaWU7YnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCxyPW10KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0KyssciYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PUF0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpjZSk6dC5sYXN0X2xpdCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTpvZX07ZnVuY3Rpb24gQWUodCxlLHIsbixhKXt0aGlzLmdvb2RfbGVuZ3RoPXQsdGhpcy5tYXhfbGF6eT1lLHRoaXMubmljZV9sZW5ndGg9cix0aGlzLm1heF9jaGFpbj1uLHRoaXMuZnVuYz1hfXZhciBFZT1bbmV3IEFlKDAsMCwwLDAsKGZ1bmN0aW9uKHQsZSl7dmFyIHI9NjU1MzU7Zm9yKHI+dC5wZW5kaW5nX2J1Zl9zaXplLTUmJihyPXQucGVuZGluZ19idWZfc2l6ZS01KTs7KXtpZih0Lmxvb2thaGVhZDw9MSl7aWYobWUodCksMD09PXQubG9va2FoZWFkJiZlPT09eHQpcmV0dXJuIGllO2lmKDA9PT10Lmxvb2thaGVhZClicmVha310LnN0cnN0YXJ0Kz10Lmxvb2thaGVhZCx0Lmxvb2thaGVhZD0wO3ZhciBuPXQuYmxvY2tfc3RhcnQrcjtpZigoMD09PXQuc3Ryc3RhcnR8fHQuc3Ryc3RhcnQ+PW4pJiYodC5sb29rYWhlYWQ9dC5zdHJzdGFydC1uLHQuc3Ryc3RhcnQ9bixwZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllO2lmKHQuc3Ryc3RhcnQtdC5ibG9ja19zdGFydD49dC53X3NpemUtVnQmJihwZSh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIGllfXJldHVybiB0Lmluc2VydD0wLGU9PT1BdD8ocGUodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/c2U6Y2UpOih0LnN0cnN0YXJ0PnQuYmxvY2tfc3RhcnQmJihwZSh0LCExKSx0LnN0cm0uYXZhaWxfb3V0KSxpZSl9KSksbmV3IEFlKDQsNCw4LDQsYmUpLG5ldyBBZSg0LDUsMTYsOCxiZSksbmV3IEFlKDQsNiwzMiwzMixiZSksbmV3IEFlKDQsNCwxNiwxNix4ZSksbmV3IEFlKDgsMTYsMzIsMzIseGUpLG5ldyBBZSg4LDE2LDEyOCwxMjgseGUpLG5ldyBBZSg4LDMyLDEyOCwyNTYseGUpLG5ldyBBZSgzMiwxMjgsMjU4LDEwMjQseGUpLG5ldyBBZSgzMiwyNTgsMjU4LDQwOTYseGUpXSxTZT1mdW5jdGlvbih0KXt0LndpbmRvd19zaXplPTIqdC53X3NpemUsZmUodC5oZWFkKSx0Lm1heF9sYXp5X21hdGNoPUVlW3QubGV2ZWxdLm1heF9sYXp5LHQuZ29vZF9tYXRjaD1FZVt0LmxldmVsXS5nb29kX2xlbmd0aCx0Lm5pY2VfbWF0Y2g9RWVbdC5sZXZlbF0ubmljZV9sZW5ndGgsdC5tYXhfY2hhaW5fbGVuZ3RoPUVlW3QubGV2ZWxdLm1heF9jaGFpbix0LnN0cnN0YXJ0PTAsdC5ibG9ja19zdGFydD0wLHQubG9va2FoZWFkPTAsdC5pbnNlcnQ9MCx0Lm1hdGNoX2xlbmd0aD10LnByZXZfbGVuZ3RoPVd0LTEsdC5tYXRjaF9hdmFpbGFibGU9MCx0Lmluc19oPTB9O2Z1bmN0aW9uIEJlKCl7dGhpcy5zdHJtPW51bGwsdGhpcy5zdGF0dXM9MCx0aGlzLnBlbmRpbmdfYnVmPW51bGwsdGhpcy5wZW5kaW5nX2J1Zl9zaXplPTAsdGhpcy5wZW5kaW5nX291dD0wLHRoaXMucGVuZGluZz0wLHRoaXMud3JhcD0wLHRoaXMuZ3poZWFkPW51bGwsdGhpcy5nemluZGV4PTAsdGhpcy5tZXRob2Q9TXQsdGhpcy5sYXN0X2ZsdXNoPS0xLHRoaXMud19zaXplPTAsdGhpcy53X2JpdHM9MCx0aGlzLndfbWFzaz0wLHRoaXMud2luZG93PW51bGwsdGhpcy53aW5kb3dfc2l6ZT0wLHRoaXMucHJldj1udWxsLHRoaXMuaGVhZD1udWxsLHRoaXMuaW5zX2g9MCx0aGlzLmhhc2hfc2l6ZT0wLHRoaXMuaGFzaF9iaXRzPTAsdGhpcy5oYXNoX21hc2s9MCx0aGlzLmhhc2hfc2hpZnQ9MCx0aGlzLmJsb2NrX3N0YXJ0PTAsdGhpcy5tYXRjaF9sZW5ndGg9MCx0aGlzLnByZXZfbWF0Y2g9MCx0aGlzLm1hdGNoX2F2YWlsYWJsZT0wLHRoaXMuc3Ryc3RhcnQ9MCx0aGlzLm1hdGNoX3N0YXJ0PTAsdGhpcy5sb29rYWhlYWQ9MCx0aGlzLnByZXZfbGVuZ3RoPTAsdGhpcy5tYXhfY2hhaW5fbGVuZ3RoPTAsdGhpcy5tYXhfbGF6eV9tYXRjaD0wLHRoaXMubGV2ZWw9MCx0aGlzLnN0cmF0ZWd5PTAsdGhpcy5nb29kX21hdGNoPTAsdGhpcy5uaWNlX21hdGNoPTAsdGhpcy5keW5fbHRyZWU9bmV3IFVpbnQxNkFycmF5KDIqcXQpLHRoaXMuZHluX2R0cmVlPW5ldyBVaW50MTZBcnJheSgyKigyKkt0KzEpKSx0aGlzLmJsX3RyZWU9bmV3IFVpbnQxNkFycmF5KDIqKDIqWHQrMSkpLGZlKHRoaXMuZHluX2x0cmVlKSxmZSh0aGlzLmR5bl9kdHJlZSksZmUodGhpcy5ibF90cmVlKSx0aGlzLmxfZGVzYz1udWxsLHRoaXMuZF9kZXNjPW51bGwsdGhpcy5ibF9kZXNjPW51bGwsdGhpcy5ibF9jb3VudD1uZXcgVWludDE2QXJyYXkoR3QrMSksdGhpcy5oZWFwPW5ldyBVaW50MTZBcnJheSgyKmp0KzEpLGZlKHRoaXMuaGVhcCksdGhpcy5oZWFwX2xlbj0wLHRoaXMuaGVhcF9tYXg9MCx0aGlzLmRlcHRoPW5ldyBVaW50MTZBcnJheSgyKmp0KzEpLGZlKHRoaXMuZGVwdGgpLHRoaXMubF9idWY9MCx0aGlzLmxpdF9idWZzaXplPTAsdGhpcy5sYXN0X2xpdD0wLHRoaXMuZF9idWY9MCx0aGlzLm9wdF9sZW49MCx0aGlzLnN0YXRpY19sZW49MCx0aGlzLm1hdGNoZXM9MCx0aGlzLmluc2VydD0wLHRoaXMuYmlfYnVmPTAsdGhpcy5iaV92YWxpZD0wfXZhciBSZT1mdW5jdGlvbih0KXtpZighdHx8IXQuc3RhdGUpcmV0dXJuIGxlKHQsUnQpO3QudG90YWxfaW49dC50b3RhbF9vdXQ9MCx0LmRhdGFfdHlwZT1adDt2YXIgZT10LnN0YXRlO3JldHVybiBlLnBlbmRpbmc9MCxlLnBlbmRpbmdfb3V0PTAsZS53cmFwPDAmJihlLndyYXA9LWUud3JhcCksZS5zdGF0dXM9ZS53cmFwP1F0Om5lLHQuYWRsZXI9Mj09PWUud3JhcD8wOjEsZS5sYXN0X2ZsdXNoPXh0LHZ0KGUpLFN0fSxEZT1mdW5jdGlvbih0KXt2YXIgZT1SZSh0KTtyZXR1cm4gZT09PVN0JiZTZSh0LnN0YXRlKSxlfSxMZT1mdW5jdGlvbih0LGUscixuLGEsaSl7aWYoIXQpcmV0dXJuIFJ0O3ZhciBvPTE7aWYoZT09PVV0JiYoZT02KSxuPDA/KG89MCxuPS1uKTpuPjE1JiYobz0yLG4tPTE2KSxhPDF8fGE+SXR8fHIhPT1NdHx8bjw4fHxuPjE1fHxlPDB8fGU+OXx8aTwwfHxpPkZ0KXJldHVybiBsZSh0LFJ0KTs4PT09biYmKG49OSk7dmFyIHM9bmV3IEJlO3JldHVybiB0LnN0YXRlPXMscy5zdHJtPXQscy53cmFwPW8scy5nemhlYWQ9bnVsbCxzLndfYml0cz1uLHMud19zaXplPTE8PHMud19iaXRzLHMud19tYXNrPXMud19zaXplLTEscy5oYXNoX2JpdHM9YSs3LHMuaGFzaF9zaXplPTE8PHMuaGFzaF9iaXRzLHMuaGFzaF9tYXNrPXMuaGFzaF9zaXplLTEscy5oYXNoX3NoaWZ0PX5+KChzLmhhc2hfYml0cytXdC0xKS9XdCkscy53aW5kb3c9bmV3IFVpbnQ4QXJyYXkoMipzLndfc2l6ZSkscy5oZWFkPW5ldyBVaW50MTZBcnJheShzLmhhc2hfc2l6ZSkscy5wcmV2PW5ldyBVaW50MTZBcnJheShzLndfc2l6ZSkscy5saXRfYnVmc2l6ZT0xPDxhKzYscy5wZW5kaW5nX2J1Zl9zaXplPTQqcy5saXRfYnVmc2l6ZSxzLnBlbmRpbmdfYnVmPW5ldyBVaW50OEFycmF5KHMucGVuZGluZ19idWZfc2l6ZSkscy5kX2J1Zj0xKnMubGl0X2J1ZnNpemUscy5sX2J1Zj0zKnMubGl0X2J1ZnNpemUscy5sZXZlbD1lLHMuc3RyYXRlZ3k9aSxzLm1ldGhvZD1yLERlKHQpfSxVZT17ZGVmbGF0ZUluaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gTGUodCxlLE10LE50LFB0LEh0KX0sZGVmbGF0ZUluaXQyOkxlLGRlZmxhdGVSZXNldDpEZSxkZWZsYXRlUmVzZXRLZWVwOlJlLGRlZmxhdGVTZXRIZWFkZXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCYmdC5zdGF0ZT8yIT09dC5zdGF0ZS53cmFwP1J0Oih0LnN0YXRlLmd6aGVhZD1lLFN0KTpSdH0sZGVmbGF0ZTpmdW5jdGlvbih0LGUpe3ZhciByLG47aWYoIXR8fCF0LnN0YXRlfHxlPkV0fHxlPDApcmV0dXJuIHQ/bGUodCxSdCk6UnQ7dmFyIGE9dC5zdGF0ZTtpZighdC5vdXRwdXR8fCF0LmlucHV0JiYwIT09dC5hdmFpbF9pbnx8YS5zdGF0dXM9PT1hZSYmZSE9PUF0KXJldHVybiBsZSh0LDA9PT10LmF2YWlsX291dD9MdDpSdCk7YS5zdHJtPXQ7dmFyIGk9YS5sYXN0X2ZsdXNoO2lmKGEubGFzdF9mbHVzaD1lLGEuc3RhdHVzPT09UXQpaWYoMj09PWEud3JhcCl0LmFkbGVyPTAsZ2UoYSwzMSksZ2UoYSwxMzkpLGdlKGEsOCksYS5nemhlYWQ/KGdlKGEsKGEuZ3poZWFkLnRleHQ/MTowKSsoYS5nemhlYWQuaGNyYz8yOjApKyhhLmd6aGVhZC5leHRyYT80OjApKyhhLmd6aGVhZC5uYW1lPzg6MCkrKGEuZ3poZWFkLmNvbW1lbnQ/MTY6MCkpLGdlKGEsMjU1JmEuZ3poZWFkLnRpbWUpLGdlKGEsYS5nemhlYWQudGltZT4+OCYyNTUpLGdlKGEsYS5nemhlYWQudGltZT4+MTYmMjU1KSxnZShhLGEuZ3poZWFkLnRpbWU+PjI0JjI1NSksZ2UoYSw5PT09YS5sZXZlbD8yOmEuc3RyYXRlZ3k+PU90fHxhLmxldmVsPDI/NDowKSxnZShhLDI1NSZhLmd6aGVhZC5vcyksYS5nemhlYWQuZXh0cmEmJmEuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGdlKGEsMjU1JmEuZ3poZWFkLmV4dHJhLmxlbmd0aCksZ2UoYSxhLmd6aGVhZC5leHRyYS5sZW5ndGg+PjgmMjU1KSksYS5nemhlYWQuaGNyYyYmKHQuYWRsZXI9X3QodC5hZGxlcixhLnBlbmRpbmdfYnVmLGEucGVuZGluZywwKSksYS5nemluZGV4PTAsYS5zdGF0dXM9SnQpOihnZShhLDApLGdlKGEsMCksZ2UoYSwwKSxnZShhLDApLGdlKGEsMCksZ2UoYSw5PT09YS5sZXZlbD8yOmEuc3RyYXRlZ3k+PU90fHxhLmxldmVsPDI/NDowKSxnZShhLGhlKSxhLnN0YXR1cz1uZSk7ZWxzZXt2YXIgbz1NdCsoYS53X2JpdHMtODw8NCk8PDg7b3w9KGEuc3RyYXRlZ3k+PU90fHxhLmxldmVsPDI/MDphLmxldmVsPDY/MTo2PT09YS5sZXZlbD8yOjMpPDw2LDAhPT1hLnN0cnN0YXJ0JiYob3w9JHQpLG8rPTMxLW8lMzEsYS5zdGF0dXM9bmUsdmUoYSxvKSwwIT09YS5zdHJzdGFydCYmKHZlKGEsdC5hZGxlcj4+PjE2KSx2ZShhLDY1NTM1JnQuYWRsZXIpKSx0LmFkbGVyPTF9aWYoYS5zdGF0dXM9PT1KdClpZihhLmd6aGVhZC5leHRyYSl7Zm9yKHI9YS5wZW5kaW5nO2EuZ3ppbmRleDwoNjU1MzUmYS5nemhlYWQuZXh0cmEubGVuZ3RoKSYmKGEucGVuZGluZyE9PWEucGVuZGluZ19idWZfc2l6ZXx8KGEuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLF9lKHQpLHI9YS5wZW5kaW5nLGEucGVuZGluZyE9PWEucGVuZGluZ19idWZfc2l6ZSkpOylnZShhLDI1NSZhLmd6aGVhZC5leHRyYVthLmd6aW5kZXhdKSxhLmd6aW5kZXgrKzthLmd6aGVhZC5oY3JjJiZhLnBlbmRpbmc+ciYmKHQuYWRsZXI9X3QodC5hZGxlcixhLnBlbmRpbmdfYnVmLGEucGVuZGluZy1yLHIpKSxhLmd6aW5kZXg9PT1hLmd6aGVhZC5leHRyYS5sZW5ndGgmJihhLmd6aW5kZXg9MCxhLnN0YXR1cz10ZSl9ZWxzZSBhLnN0YXR1cz10ZTtpZihhLnN0YXR1cz09PXRlKWlmKGEuZ3poZWFkLm5hbWUpe3I9YS5wZW5kaW5nO2Rve2lmKGEucGVuZGluZz09PWEucGVuZGluZ19idWZfc2l6ZSYmKGEuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLF9lKHQpLHI9YS5wZW5kaW5nLGEucGVuZGluZz09PWEucGVuZGluZ19idWZfc2l6ZSkpe249MTticmVha31uPWEuZ3ppbmRleDxhLmd6aGVhZC5uYW1lLmxlbmd0aD8yNTUmYS5nemhlYWQubmFtZS5jaGFyQ29kZUF0KGEuZ3ppbmRleCsrKTowLGdlKGEsbil9d2hpbGUoMCE9PW4pO2EuZ3poZWFkLmhjcmMmJmEucGVuZGluZz5yJiYodC5hZGxlcj1fdCh0LmFkbGVyLGEucGVuZGluZ19idWYsYS5wZW5kaW5nLXIscikpLDA9PT1uJiYoYS5nemluZGV4PTAsYS5zdGF0dXM9ZWUpfWVsc2UgYS5zdGF0dXM9ZWU7aWYoYS5zdGF0dXM9PT1lZSlpZihhLmd6aGVhZC5jb21tZW50KXtyPWEucGVuZGluZztkb3tpZihhLnBlbmRpbmc9PT1hLnBlbmRpbmdfYnVmX3NpemUmJihhLmd6aGVhZC5oY3JjJiZhLnBlbmRpbmc+ciYmKHQuYWRsZXI9X3QodC5hZGxlcixhLnBlbmRpbmdfYnVmLGEucGVuZGluZy1yLHIpKSxfZSh0KSxyPWEucGVuZGluZyxhLnBlbmRpbmc9PT1hLnBlbmRpbmdfYnVmX3NpemUpKXtuPTE7YnJlYWt9bj1hLmd6aW5kZXg8YS5nemhlYWQuY29tbWVudC5sZW5ndGg/MjU1JmEuZ3poZWFkLmNvbW1lbnQuY2hhckNvZGVBdChhLmd6aW5kZXgrKyk6MCxnZShhLG4pfXdoaWxlKDAhPT1uKTthLmd6aGVhZC5oY3JjJiZhLnBlbmRpbmc+ciYmKHQuYWRsZXI9X3QodC5hZGxlcixhLnBlbmRpbmdfYnVmLGEucGVuZGluZy1yLHIpKSwwPT09biYmKGEuc3RhdHVzPXJlKX1lbHNlIGEuc3RhdHVzPXJlO2lmKGEuc3RhdHVzPT09cmUmJihhLmd6aGVhZC5oY3JjPyhhLnBlbmRpbmcrMj5hLnBlbmRpbmdfYnVmX3NpemUmJl9lKHQpLGEucGVuZGluZysyPD1hLnBlbmRpbmdfYnVmX3NpemUmJihnZShhLDI1NSZ0LmFkbGVyKSxnZShhLHQuYWRsZXI+PjgmMjU1KSx0LmFkbGVyPTAsYS5zdGF0dXM9bmUpKTphLnN0YXR1cz1uZSksMCE9PWEucGVuZGluZyl7aWYoX2UodCksMD09PXQuYXZhaWxfb3V0KXJldHVybiBhLmxhc3RfZmx1c2g9LTEsU3R9ZWxzZSBpZigwPT09dC5hdmFpbF9pbiYmdWUoZSk8PXVlKGkpJiZlIT09QXQpcmV0dXJuIGxlKHQsTHQpO2lmKGEuc3RhdHVzPT09YWUmJjAhPT10LmF2YWlsX2luKXJldHVybiBsZSh0LEx0KTtpZigwIT09dC5hdmFpbF9pbnx8MCE9PWEubG9va2FoZWFkfHxlIT09eHQmJmEuc3RhdHVzIT09YWUpe3ZhciBzPWEuc3RyYXRlZ3k9PT1PdD96ZShhLGUpOmEuc3RyYXRlZ3k9PT1UdD9rZShhLGUpOkVlW2EubGV2ZWxdLmZ1bmMoYSxlKTtpZihzIT09c2UmJnMhPT1jZXx8KGEuc3RhdHVzPWFlKSxzPT09aWV8fHM9PT1zZSlyZXR1cm4gMD09PXQuYXZhaWxfb3V0JiYoYS5sYXN0X2ZsdXNoPS0xKSxTdDtpZihzPT09b2UmJihlPT09a3Q/YnQoYSk6ZSE9PUV0JiYoeXQoYSwwLDAsITEpLGU9PT16dCYmKGZlKGEuaGVhZCksMD09PWEubG9va2FoZWFkJiYoYS5zdHJzdGFydD0wLGEuYmxvY2tfc3RhcnQ9MCxhLmluc2VydD0wKSkpLF9lKHQpLDA9PT10LmF2YWlsX291dCkpcmV0dXJuIGEubGFzdF9mbHVzaD0tMSxTdH1yZXR1cm4gZSE9PUF0P1N0OmEud3JhcDw9MD9CdDooMj09PWEud3JhcD8oZ2UoYSwyNTUmdC5hZGxlciksZ2UoYSx0LmFkbGVyPj44JjI1NSksZ2UoYSx0LmFkbGVyPj4xNiYyNTUpLGdlKGEsdC5hZGxlcj4+MjQmMjU1KSxnZShhLDI1NSZ0LnRvdGFsX2luKSxnZShhLHQudG90YWxfaW4+PjgmMjU1KSxnZShhLHQudG90YWxfaW4+PjE2JjI1NSksZ2UoYSx0LnRvdGFsX2luPj4yNCYyNTUpKToodmUoYSx0LmFkbGVyPj4+MTYpLHZlKGEsNjU1MzUmdC5hZGxlcikpLF9lKHQpLGEud3JhcD4wJiYoYS53cmFwPS1hLndyYXApLDAhPT1hLnBlbmRpbmc/U3Q6QnQpfSxkZWZsYXRlRW5kOmZ1bmN0aW9uKHQpe2lmKCF0fHwhdC5zdGF0ZSlyZXR1cm4gUnQ7dmFyIGU9dC5zdGF0ZS5zdGF0dXM7cmV0dXJuIGUhPT1RdCYmZSE9PUp0JiZlIT09dGUmJmUhPT1lZSYmZSE9PXJlJiZlIT09bmUmJmUhPT1hZT9sZSh0LFJ0KToodC5zdGF0ZT1udWxsLGU9PT1uZT9sZSh0LER0KTpTdCl9LGRlZmxhdGVTZXREaWN0aW9uYXJ5OmZ1bmN0aW9uKHQsZSl7dmFyIHI9ZS5sZW5ndGg7aWYoIXR8fCF0LnN0YXRlKXJldHVybiBSdDt2YXIgbj10LnN0YXRlLGE9bi53cmFwO2lmKDI9PT1hfHwxPT09YSYmbi5zdGF0dXMhPT1RdHx8bi5sb29rYWhlYWQpcmV0dXJuIFJ0O2lmKDE9PT1hJiYodC5hZGxlcj1mdCh0LmFkbGVyLGUsciwwKSksbi53cmFwPTAscj49bi53X3NpemUpezA9PT1hJiYoZmUobi5oZWFkKSxuLnN0cnN0YXJ0PTAsbi5ibG9ja19zdGFydD0wLG4uaW5zZXJ0PTApO3ZhciBpPW5ldyBVaW50OEFycmF5KG4ud19zaXplKTtpLnNldChlLnN1YmFycmF5KHItbi53X3NpemUsciksMCksZT1pLHI9bi53X3NpemV9dmFyIG89dC5hdmFpbF9pbixzPXQubmV4dF9pbixjPXQuaW5wdXQ7Zm9yKHQuYXZhaWxfaW49cix0Lm5leHRfaW49MCx0LmlucHV0PWUsbWUobik7bi5sb29rYWhlYWQ+PVd0Oyl7dmFyIGg9bi5zdHJzdGFydCxsPW4ubG9va2FoZWFkLShXdC0xKTtkb3tuLmluc19oPWRlKG4sbi5pbnNfaCxuLndpbmRvd1toK1d0LTFdKSxuLnByZXZbaCZuLndfbWFza109bi5oZWFkW24uaW5zX2hdLG4uaGVhZFtuLmluc19oXT1oLGgrK313aGlsZSgtLWwpO24uc3Ryc3RhcnQ9aCxuLmxvb2thaGVhZD1XdC0xLG1lKG4pfXJldHVybiBuLnN0cnN0YXJ0Kz1uLmxvb2thaGVhZCxuLmJsb2NrX3N0YXJ0PW4uc3Ryc3RhcnQsbi5pbnNlcnQ9bi5sb29rYWhlYWQsbi5sb29rYWhlYWQ9MCxuLm1hdGNoX2xlbmd0aD1uLnByZXZfbGVuZ3RoPVd0LTEsbi5tYXRjaF9hdmFpbGFibGU9MCx0Lm5leHRfaW49cyx0LmlucHV0PWMsdC5hdmFpbF9pbj1vLG4ud3JhcD1hLFN0fSxkZWZsYXRlSW5mbzoicGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSJ9LENlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxPZT1mdW5jdGlvbihlKXtmb3IodmFyIHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3IubGVuZ3RoOyl7dmFyIG49ci5zaGlmdCgpO2lmKG4pe2lmKCJvYmplY3QiIT09dChuKSl0aHJvdyBuZXcgVHlwZUVycm9yKG4rIm11c3QgYmUgbm9uLW9iamVjdCIpO2Zvcih2YXIgYSBpbiBuKUNlKG4sYSkmJihlW2FdPW5bYV0pfX1yZXR1cm4gZX0sVGU9e2Fzc2lnbjpPZSxmbGF0dGVuQ2h1bmtzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9MCxuPXQubGVuZ3RoO3I8bjtyKyspZSs9dFtyXS5sZW5ndGg7Zm9yKHZhciBhPW5ldyBVaW50OEFycmF5KGUpLGk9MCxvPTAscz10Lmxlbmd0aDtpPHM7aSsrKXt2YXIgYz10W2ldO2Euc2V0KGMsbyksbys9Yy5sZW5ndGh9cmV0dXJuIGF9fSxGZT0hMDt0cnl7U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KDEpKX1jYXRjaCh0KXtGZT0hMX1mb3IodmFyIEhlPW5ldyBVaW50OEFycmF5KDI1NiksWmU9MDtaZTwyNTY7WmUrKylIZVtaZV09WmU+PTI1Mj82OlplPj0yNDg/NTpaZT49MjQwPzQ6WmU+PTIyND8zOlplPj0xOTI/MjoxO0hlWzI1NF09SGVbMjU0XT0xO3ZhciBNZT1mdW5jdGlvbih0LGUpe2lmKGU8NjU1MzQmJnQuc3ViYXJyYXkmJkZlKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdC5sZW5ndGg9PT1lP3Q6dC5zdWJhcnJheSgwLGUpKTtmb3IodmFyIHI9IiIsbj0wO248ZTtuKyspcis9U3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtyZXR1cm4gcn0sSWU9e3N0cmluZzJidWY6ZnVuY3Rpb24odCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFRleHRFbmNvZGVyJiZUZXh0RW5jb2Rlci5wcm90b3R5cGUuZW5jb2RlKXJldHVybihuZXcgVGV4dEVuY29kZXIpLmVuY29kZSh0KTt2YXIgZSxyLG4sYSxpLG89dC5sZW5ndGgscz0wO2ZvcihhPTA7YTxvO2ErKyk1NTI5Nj09KDY0NTEyJihyPXQuY2hhckNvZGVBdChhKSkpJiZhKzE8byYmNTYzMjA9PSg2NDUxMiYobj10LmNoYXJDb2RlQXQoYSsxKSkpJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxhKyspLHMrPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKGU9bmV3IFVpbnQ4QXJyYXkocyksaT0wLGE9MDtpPHM7YSsrKTU1Mjk2PT0oNjQ1MTImKHI9dC5jaGFyQ29kZUF0KGEpKSkmJmErMTxvJiY1NjMyMD09KDY0NTEyJihuPXQuY2hhckNvZGVBdChhKzEpKSkmJihyPTY1NTM2KyhyLTU1Mjk2PDwxMCkrKG4tNTYzMjApLGErKykscjwxMjg/ZVtpKytdPXI6cjwyMDQ4PyhlW2krK109MTkyfHI+Pj42LGVbaSsrXT0xMjh8NjMmcik6cjw2NTUzNj8oZVtpKytdPTIyNHxyPj4+MTIsZVtpKytdPTEyOHxyPj4+NiY2MyxlW2krK109MTI4fDYzJnIpOihlW2krK109MjQwfHI+Pj4xOCxlW2krK109MTI4fHI+Pj4xMiY2MyxlW2krK109MTI4fHI+Pj42JjYzLGVbaSsrXT0xMjh8NjMmcik7cmV0dXJuIGV9LGJ1ZjJzdHJpbmc6ZnVuY3Rpb24odCxlKXt2YXIgcixuLGE9ZXx8dC5sZW5ndGg7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFRleHREZWNvZGVyJiZUZXh0RGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlKXJldHVybihuZXcgVGV4dERlY29kZXIpLmRlY29kZSh0LnN1YmFycmF5KDAsZSkpO3ZhciBpPW5ldyBBcnJheSgyKmEpO2ZvcihuPTAscj0wO3I8YTspe3ZhciBvPXRbcisrXTtpZihvPDEyOClpW24rK109bztlbHNle3ZhciBzPUhlW29dO2lmKHM+NClpW24rK109NjU1MzMscis9cy0xO2Vsc2V7Zm9yKG8mPTI9PT1zPzMxOjM9PT1zPzE1Ojc7cz4xJiZyPGE7KW89bzw8Nnw2MyZ0W3IrK10scy0tO3M+MT9pW24rK109NjU1MzM6bzw2NTUzNj9pW24rK109bzooby09NjU1MzYsaVtuKytdPTU1Mjk2fG8+PjEwJjEwMjMsaVtuKytdPTU2MzIwfDEwMjMmbyl9fX1yZXR1cm4gTWUoaSxuKX0sdXRmOGJvcmRlcjpmdW5jdGlvbih0LGUpeyhlPWV8fHQubGVuZ3RoKT50Lmxlbmd0aCYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgcj1lLTE7cj49MCYmMTI4PT0oMTkyJnRbcl0pOylyLS07cmV0dXJuIHI8MHx8MD09PXI/ZTpyK0hlW3Rbcl1dPmU/cjplfX07ZnVuY3Rpb24gTmUoKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9IiIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfXZhciBQZT1OZSxqZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLEtlPWd0LlpfTk9fRkxVU0gsWGU9Z3QuWl9TWU5DX0ZMVVNILHFlPWd0LlpfRlVMTF9GTFVTSCxHZT1ndC5aX0ZJTklTSCxXZT1ndC5aX09LLFllPWd0LlpfU1RSRUFNX0VORCxWZT1ndC5aX0RFRkFVTFRfQ09NUFJFU1NJT04sJGU9Z3QuWl9ERUZBVUxUX1NUUkFURUdZLFFlPWd0LlpfREVGTEFURUQ7ZnVuY3Rpb24gSmUodCl7dGhpcy5vcHRpb25zPVRlLmFzc2lnbih7bGV2ZWw6VmUsbWV0aG9kOlFlLGNodW5rU2l6ZToxNjM4NCx3aW5kb3dCaXRzOjE1LG1lbUxldmVsOjgsc3RyYXRlZ3k6JGV9LHR8fHt9KTt2YXIgZT10aGlzLm9wdGlvbnM7ZS5yYXcmJmUud2luZG93Qml0cz4wP2Uud2luZG93Qml0cz0tZS53aW5kb3dCaXRzOmUuZ3ppcCYmZS53aW5kb3dCaXRzPjAmJmUud2luZG93Qml0czwxNiYmKGUud2luZG93Qml0cys9MTYpLHRoaXMuZXJyPTAsdGhpcy5tc2c9IiIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IFBlLHRoaXMuc3RybS5hdmFpbF9vdXQ9MDt2YXIgcj1VZS5kZWZsYXRlSW5pdDIodGhpcy5zdHJtLGUubGV2ZWwsZS5tZXRob2QsZS53aW5kb3dCaXRzLGUubWVtTGV2ZWwsZS5zdHJhdGVneSk7aWYociE9PVdlKXRocm93IG5ldyBFcnJvcihwdFtyXSk7aWYoZS5oZWFkZXImJlVlLmRlZmxhdGVTZXRIZWFkZXIodGhpcy5zdHJtLGUuaGVhZGVyKSxlLmRpY3Rpb25hcnkpe3ZhciBuO2lmKG49InN0cmluZyI9PXR5cGVvZiBlLmRpY3Rpb25hcnk/SWUuc3RyaW5nMmJ1ZihlLmRpY3Rpb25hcnkpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT1qZS5jYWxsKGUuZGljdGlvbmFyeSk/bmV3IFVpbnQ4QXJyYXkoZS5kaWN0aW9uYXJ5KTplLmRpY3Rpb25hcnksKHI9VWUuZGVmbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLG4pKSE9PVdlKXRocm93IG5ldyBFcnJvcihwdFtyXSk7dGhpcy5fZGljdF9zZXQ9ITB9fWZ1bmN0aW9uIHRyKHQsZSl7dmFyIHI9bmV3IEplKGUpO2lmKHIucHVzaCh0LCEwKSxyLmVycil0aHJvdyByLm1zZ3x8cHRbci5lcnJdO3JldHVybiByLnJlc3VsdH1mdW5jdGlvbiBlcih0LGUpe3JldHVybihlPWV8fHt9KS5yYXc9ITAsdHIodCxlKX1mdW5jdGlvbiBycih0LGUpe3JldHVybihlPWV8fHt9KS5nemlwPSEwLHRyKHQsZSl9SmUucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCxlKXt2YXIgcixuLGE9dGhpcy5zdHJtLGk9dGhpcy5vcHRpb25zLmNodW5rU2l6ZTtpZih0aGlzLmVuZGVkKXJldHVybiExO2ZvcihuPWU9PT1+fmU/ZTohMD09PWU/R2U6S2UsInN0cmluZyI9PXR5cGVvZiB0P2EuaW5wdXQ9SWUuc3RyaW5nMmJ1Zih0KToiW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09amUuY2FsbCh0KT9hLmlucHV0PW5ldyBVaW50OEFycmF5KHQpOmEuaW5wdXQ9dCxhLm5leHRfaW49MCxhLmF2YWlsX2luPWEuaW5wdXQubGVuZ3RoOzspaWYoMD09PWEuYXZhaWxfb3V0JiYoYS5vdXRwdXQ9bmV3IFVpbnQ4QXJyYXkoaSksYS5uZXh0X291dD0wLGEuYXZhaWxfb3V0PWkpLChuPT09WGV8fG49PT1xZSkmJmEuYXZhaWxfb3V0PD02KXRoaXMub25EYXRhKGEub3V0cHV0LnN1YmFycmF5KDAsYS5uZXh0X291dCkpLGEuYXZhaWxfb3V0PTA7ZWxzZXtpZigocj1VZS5kZWZsYXRlKGEsbikpPT09WWUpcmV0dXJuIGEubmV4dF9vdXQ+MCYmdGhpcy5vbkRhdGEoYS5vdXRwdXQuc3ViYXJyYXkoMCxhLm5leHRfb3V0KSkscj1VZS5kZWZsYXRlRW5kKHRoaXMuc3RybSksdGhpcy5vbkVuZChyKSx0aGlzLmVuZGVkPSEwLHI9PT1XZTtpZigwIT09YS5hdmFpbF9vdXQpe2lmKG4+MCYmYS5uZXh0X291dD4wKXRoaXMub25EYXRhKGEub3V0cHV0LnN1YmFycmF5KDAsYS5uZXh0X291dCkpLGEuYXZhaWxfb3V0PTA7ZWxzZSBpZigwPT09YS5hdmFpbF9pbilicmVha31lbHNlIHRoaXMub25EYXRhKGEub3V0cHV0KX1yZXR1cm4hMH0sSmUucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbih0KXt0aGlzLmNodW5rcy5wdXNoKHQpfSxKZS5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24odCl7dD09PVdlJiYodGhpcy5yZXN1bHQ9VGUuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPXQsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ307dmFyIG5yPUplLGFyPXRyLGlyPWVyLG9yPXJyLHNyPWd0LGNyPXtEZWZsYXRlOm5yLGRlZmxhdGU6YXIsZGVmbGF0ZVJhdzppcixnemlwOm9yLGNvbnN0YW50czpzcn07ZS5EZWZsYXRlPW5yLGUuY29uc3RhbnRzPXNyLGUuZGVmYXVsdD1jcixlLmRlZmxhdGU9YXIsZS5kZWZsYXRlUmF3PWlyLGUuZ3ppcD1vcixPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9KShvLmV4cG9ydHMpO3ZhciBzLGM9e2V4cG9ydHM6e319LGg9e2V4cG9ydHM6e319O2guZXhwb3J0cz0ocz1zfHxmdW5jdGlvbih0LGUpe3ZhciByO2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuY3J5cHRvJiYocj13aW5kb3cuY3J5cHRvKSwidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuY3J5cHRvJiYocj1zZWxmLmNyeXB0byksInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzJiZnbG9iYWxUaGlzLmNyeXB0byYmKHI9Z2xvYmFsVGhpcy5jcnlwdG8pLCFyJiYidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lm1zQ3J5cHRvJiYocj13aW5kb3cubXNDcnlwdG8pLCFyJiZ2b2lkIDAhPT1pJiZpLmNyeXB0byYmKHI9aS5jcnlwdG8pLCFyKXRyeXtyPXVuZGVmaW5lZH1jYXRjaCh0KXt9dmFyIG49ZnVuY3Rpb24oKXtpZihyKXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygci5nZXRSYW5kb21WYWx1ZXMpdHJ5e3JldHVybiByLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdfWNhdGNoKHQpe31pZigiZnVuY3Rpb24iPT10eXBlb2Ygci5yYW5kb21CeXRlcyl0cnl7cmV0dXJuIHIucmFuZG9tQnl0ZXMoNCkucmVhZEludDMyTEUoKX1jYXRjaCh0KXt9fXRocm93IG5ldyBFcnJvcigiTmF0aXZlIGNyeXB0byBtb2R1bGUgY291bGQgbm90IGJlIHVzZWQgdG8gZ2V0IHNlY3VyZSByYW5kb20gbnVtYmVyLiIpfSxhPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI7cmV0dXJuIHQucHJvdG90eXBlPWUscj1uZXcgdCx0LnByb3RvdHlwZT1udWxsLHJ9fSgpLG89e30scz1vLmxpYj17fSxjPXMuQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3ZhciBlPWEodGhpcyk7cmV0dXJuIHQmJmUubWl4SW4odCksZS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpJiZ0aGlzLmluaXQhPT1lLmluaXR8fChlLmluaXQ9ZnVuY3Rpb24oKXtlLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUuaW5pdC5wcm90b3R5cGU9ZSxlLiRzdXBlcj10aGlzLGV9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZXh0ZW5kKCk7cmV0dXJuIHQuaW5pdC5hcHBseSh0LGFyZ3VtZW50cyksdH0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXNbZV09dFtlXSk7dC5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9dC50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX0saD1zLldvcmRBcnJheT1jLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LHIpe3Q9dGhpcy53b3Jkcz10fHxbXSx0aGlzLnNpZ0J5dGVzPXIhPWU/cjo0KnQubGVuZ3RofSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dSkuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53b3JkcyxyPXQud29yZHMsbj10aGlzLnNpZ0J5dGVzLGE9dC5zaWdCeXRlcztpZih0aGlzLmNsYW1wKCksbiU0KWZvcih2YXIgaT0wO2k8YTtpKyspe3ZhciBvPXJbaT4+PjJdPj4+MjQtaSU0KjgmMjU1O2VbbitpPj4+Ml18PW88PDI0LShuK2kpJTQqOH1lbHNlIGZvcih2YXIgcz0wO3M8YTtzKz00KWVbbitzPj4+Ml09cltzPj4+Ml07cmV0dXJuIHRoaXMuc2lnQnl0ZXMrPWEsdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLndvcmRzLHI9dGhpcy5zaWdCeXRlcztlW3I+Pj4yXSY9NDI5NDk2NzI5NTw8MzItciU0KjgsZS5sZW5ndGg9dC5jZWlsKHIvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9Yy5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0LndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksdH0scmFuZG9tOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxyPTA7cjx0O3IrPTQpZS5wdXNoKG4oKSk7cmV0dXJuIG5ldyBoLmluaXQoZSx0KX19KSxsPW8uZW5jPXt9LHU9bC5IZXg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxhPTA7YTxyO2ErKyl7dmFyIGk9ZVthPj4+Ml0+Pj4yNC1hJTQqOCYyNTU7bi5wdXNoKChpPj4+NCkudG9TdHJpbmcoMTYpKSxuLnB1c2goKDE1JmkpLnRvU3RyaW5nKDE2KSl9cmV0dXJuIG4uam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxyPVtdLG49MDtuPGU7bis9MilyW24+Pj4zXXw9cGFyc2VJbnQodC5zdWJzdHIobiwyKSwxNik8PDI0LW4lOCo0O3JldHVybiBuZXcgaC5pbml0KHIsZS8yKX19LGY9bC5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxhPTA7YTxyO2ErKyl7dmFyIGk9ZVthPj4+Ml0+Pj4yNC1hJTQqOCYyNTU7bi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaSkpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rKylyW24+Pj4yXXw9KDI1NSZ0LmNoYXJDb2RlQXQobikpPDwyNC1uJTQqODtyZXR1cm4gbmV3IGguaW5pdChyLGUpfX0sZD1sLlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZi5zdHJpbmdpZnkodCkpKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIil9fSxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gZi5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQodCkpKX19LF89cy5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWMuZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IGguaW5pdCx0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24odCl7InN0cmluZyI9PXR5cGVvZiB0JiYodD1kLnBhcnNlKHQpKSx0aGlzLl9kYXRhLmNvbmNhdCh0KSx0aGlzLl9uRGF0YUJ5dGVzKz10LnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbihlKXt2YXIgcixuPXRoaXMuX2RhdGEsYT1uLndvcmRzLGk9bi5zaWdCeXRlcyxvPXRoaXMuYmxvY2tTaXplLHM9aS8oNCpvKSxjPShzPWU/dC5jZWlsKHMpOnQubWF4KCgwfHMpLXRoaXMuX21pbkJ1ZmZlclNpemUsMCkpKm8sbD10Lm1pbig0KmMsaSk7aWYoYyl7Zm9yKHZhciB1PTA7dTxjO3UrPW8pdGhpcy5fZG9Qcm9jZXNzQmxvY2soYSx1KTtyPWEuc3BsaWNlKDAsYyksbi5zaWdCeXRlcy09bH1yZXR1cm4gbmV3IGguaW5pdChyLGwpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWMuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCksdH0sX21pbkJ1ZmZlclNpemU6MH0pO3MuSGFzaGVyPV8uZXh0ZW5kKHtjZmc6Yy5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZCh0KSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7Xy5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9hcHBlbmQodCksdGhpcy5fcHJvY2VzcygpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHQuaW5pdChyKS5maW5hbGl6ZShlKX19LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBuZXcgcC5ITUFDLmluaXQodCxyKS5maW5hbGl6ZShlKX19fSk7dmFyIHA9by5hbGdvPXt9O3JldHVybiBvfShNYXRoKSxzKSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIuV29yZEFycmF5O2Z1bmN0aW9uIG4odCxlLG4pe2Zvcih2YXIgYT1bXSxpPTAsbz0wO288ZTtvKyspaWYobyU0KXt2YXIgcz1uW3QuY2hhckNvZGVBdChvLTEpXTw8byU0KjJ8blt0LmNoYXJDb2RlQXQobyldPj4+Ni1vJTQqMjthW2k+Pj4yXXw9czw8MjQtaSU0KjgsaSsrfXJldHVybiByLmNyZWF0ZShhLGkpfWUuZW5jLkJhc2U2ND17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQud29yZHMscj10LnNpZ0J5dGVzLG49dGhpcy5fbWFwO3QuY2xhbXAoKTtmb3IodmFyIGE9W10saT0wO2k8cjtpKz0zKWZvcih2YXIgbz0oZVtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTUpPDwxNnwoZVtpKzE+Pj4yXT4+PjI0LShpKzEpJTQqOCYyNTUpPDw4fGVbaSsyPj4+Ml0+Pj4yNC0oaSsyKSU0KjgmMjU1LHM9MDtzPDQmJmkrLjc1KnM8cjtzKyspYS5wdXNoKG4uY2hhckF0KG8+Pj42KigzLXMpJjYzKSk7dmFyIGM9bi5jaGFyQXQoNjQpO2lmKGMpZm9yKDthLmxlbmd0aCU0OylhLnB1c2goYyk7cmV0dXJuIGEuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoLHI9dGhpcy5fbWFwLGE9dGhpcy5fcmV2ZXJzZU1hcDtpZighYSl7YT10aGlzLl9yZXZlcnNlTWFwPVtdO2Zvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKWFbci5jaGFyQ29kZUF0KGkpXT1pfXZhciBvPXIuY2hhckF0KDY0KTtpZihvKXt2YXIgcz10LmluZGV4T2Yobyk7LTEhPT1zJiYoZT1zKX1yZXR1cm4gbih0LGUsYSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In19KCksdC5lbmMuQmFzZTY0fShoLmV4cG9ydHMpfShjKTt2YXIgbD1jLmV4cG9ydHMsdT17ZXhwb3J0czp7fX0sZj17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsYT1uLldvcmRBcnJheSxpPW4uSGFzaGVyLG89ci5hbGdvLHM9W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDw2NDt0Kyspc1t0XT00Mjk0OTY3Mjk2KmUuYWJzKGUuc2luKHQrMSkpfDB9KCk7dmFyIGM9by5NRDU9aS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgYS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTA7cjwxNjtyKyspe3ZhciBuPWUrcixhPXRbbl07dFtuXT0xNjcxMTkzNSYoYTw8OHxhPj4+MjQpfDQyNzgyNTUzNjAmKGE8PDI0fGE+Pj44KX12YXIgaT10aGlzLl9oYXNoLndvcmRzLG89dFtlKzBdLGM9dFtlKzFdLGQ9dFtlKzJdLF89dFtlKzNdLHA9dFtlKzRdLGc9dFtlKzVdLHY9dFtlKzZdLHk9dFtlKzddLHc9dFtlKzhdLG09dFtlKzldLGI9dFtlKzEwXSx4PXRbZSsxMV0saz10W2UrMTJdLHo9dFtlKzEzXSxBPXRbZSsxNF0sRT10W2UrMTVdLFM9aVswXSxCPWlbMV0sUj1pWzJdLEQ9aVszXTtTPWgoUyxCLFIsRCxvLDcsc1swXSksRD1oKEQsUyxCLFIsYywxMixzWzFdKSxSPWgoUixELFMsQixkLDE3LHNbMl0pLEI9aChCLFIsRCxTLF8sMjIsc1szXSksUz1oKFMsQixSLEQscCw3LHNbNF0pLEQ9aChELFMsQixSLGcsMTIsc1s1XSksUj1oKFIsRCxTLEIsdiwxNyxzWzZdKSxCPWgoQixSLEQsUyx5LDIyLHNbN10pLFM9aChTLEIsUixELHcsNyxzWzhdKSxEPWgoRCxTLEIsUixtLDEyLHNbOV0pLFI9aChSLEQsUyxCLGIsMTcsc1sxMF0pLEI9aChCLFIsRCxTLHgsMjIsc1sxMV0pLFM9aChTLEIsUixELGssNyxzWzEyXSksRD1oKEQsUyxCLFIseiwxMixzWzEzXSksUj1oKFIsRCxTLEIsQSwxNyxzWzE0XSksUz1sKFMsQj1oKEIsUixELFMsRSwyMixzWzE1XSksUixELGMsNSxzWzE2XSksRD1sKEQsUyxCLFIsdiw5LHNbMTddKSxSPWwoUixELFMsQix4LDE0LHNbMThdKSxCPWwoQixSLEQsUyxvLDIwLHNbMTldKSxTPWwoUyxCLFIsRCxnLDUsc1syMF0pLEQ9bChELFMsQixSLGIsOSxzWzIxXSksUj1sKFIsRCxTLEIsRSwxNCxzWzIyXSksQj1sKEIsUixELFMscCwyMCxzWzIzXSksUz1sKFMsQixSLEQsbSw1LHNbMjRdKSxEPWwoRCxTLEIsUixBLDksc1syNV0pLFI9bChSLEQsUyxCLF8sMTQsc1syNl0pLEI9bChCLFIsRCxTLHcsMjAsc1syN10pLFM9bChTLEIsUixELHosNSxzWzI4XSksRD1sKEQsUyxCLFIsZCw5LHNbMjldKSxSPWwoUixELFMsQix5LDE0LHNbMzBdKSxTPXUoUyxCPWwoQixSLEQsUyxrLDIwLHNbMzFdKSxSLEQsZyw0LHNbMzJdKSxEPXUoRCxTLEIsUix3LDExLHNbMzNdKSxSPXUoUixELFMsQix4LDE2LHNbMzRdKSxCPXUoQixSLEQsUyxBLDIzLHNbMzVdKSxTPXUoUyxCLFIsRCxjLDQsc1szNl0pLEQ9dShELFMsQixSLHAsMTEsc1szN10pLFI9dShSLEQsUyxCLHksMTYsc1szOF0pLEI9dShCLFIsRCxTLGIsMjMsc1szOV0pLFM9dShTLEIsUixELHosNCxzWzQwXSksRD11KEQsUyxCLFIsbywxMSxzWzQxXSksUj11KFIsRCxTLEIsXywxNixzWzQyXSksQj11KEIsUixELFMsdiwyMyxzWzQzXSksUz11KFMsQixSLEQsbSw0LHNbNDRdKSxEPXUoRCxTLEIsUixrLDExLHNbNDVdKSxSPXUoUixELFMsQixFLDE2LHNbNDZdKSxTPWYoUyxCPXUoQixSLEQsUyxkLDIzLHNbNDddKSxSLEQsbyw2LHNbNDhdKSxEPWYoRCxTLEIsUix5LDEwLHNbNDldKSxSPWYoUixELFMsQixBLDE1LHNbNTBdKSxCPWYoQixSLEQsUyxnLDIxLHNbNTFdKSxTPWYoUyxCLFIsRCxrLDYsc1s1Ml0pLEQ9ZihELFMsQixSLF8sMTAsc1s1M10pLFI9ZihSLEQsUyxCLGIsMTUsc1s1NF0pLEI9ZihCLFIsRCxTLGMsMjEsc1s1NV0pLFM9ZihTLEIsUixELHcsNixzWzU2XSksRD1mKEQsUyxCLFIsRSwxMCxzWzU3XSksUj1mKFIsRCxTLEIsdiwxNSxzWzU4XSksQj1mKEIsUixELFMseiwyMSxzWzU5XSksUz1mKFMsQixSLEQscCw2LHNbNjBdKSxEPWYoRCxTLEIsUix4LDEwLHNbNjFdKSxSPWYoUixELFMsQixkLDE1LHNbNjJdKSxCPWYoQixSLEQsUyxtLDIxLHNbNjNdKSxpWzBdPWlbMF0rU3wwLGlbMV09aVsxXStCfDAsaVsyXT1pWzJdK1J8MCxpWzNdPWlbM10rRHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEscj10LndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGE9OCp0LnNpZ0J5dGVzO3JbYT4+PjVdfD0xMjg8PDI0LWElMzI7dmFyIGk9ZS5mbG9vcihuLzQyOTQ5NjcyOTYpLG89bjtyWzE1KyhhKzY0Pj4+OTw8NCldPTE2NzExOTM1JihpPDw4fGk+Pj4yNCl8NDI3ODI1NTM2MCYoaTw8MjR8aT4+PjgpLHJbMTQrKGErNjQ+Pj45PDw0KV09MTY3MTE5MzUmKG88PDh8bz4+PjI0KXw0Mjc4MjU1MzYwJihvPDwyNHxvPj4+OCksdC5zaWdCeXRlcz00KihyLmxlbmd0aCsxKSx0aGlzLl9wcm9jZXNzKCk7Zm9yKHZhciBzPXRoaXMuX2hhc2gsYz1zLndvcmRzLGg9MDtoPDQ7aCsrKXt2YXIgbD1jW2hdO2NbaF09MTY3MTE5MzUmKGw8PDh8bD4+PjI0KXw0Mjc4MjU1MzYwJihsPDwyNHxsPj4+OCl9cmV0dXJuIHN9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9aS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO2Z1bmN0aW9uIGgodCxlLHIsbixhLGksbyl7dmFyIHM9dCsoZSZyfH5lJm4pK2ErbztyZXR1cm4oczw8aXxzPj4+MzItaSkrZX1mdW5jdGlvbiBsKHQsZSxyLG4sYSxpLG8pe3ZhciBzPXQrKGUmbnxyJn5uKSthK287cmV0dXJuKHM8PGl8cz4+PjMyLWkpK2V9ZnVuY3Rpb24gdSh0LGUscixuLGEsaSxvKXt2YXIgcz10KyhlXnJebikrYStvO3JldHVybihzPDxpfHM+Pj4zMi1pKStlfWZ1bmN0aW9uIGYodCxlLHIsbixhLGksbyl7dmFyIHM9dCsocl4oZXx+bikpK2ErbztyZXR1cm4oczw8aXxzPj4+MzItaSkrZX1yLk1ENT1pLl9jcmVhdGVIZWxwZXIoYyksci5IbWFjTUQ1PWkuX2NyZWF0ZUhtYWNIZWxwZXIoYyl9KE1hdGgpLHQuTUQ1fShoLmV4cG9ydHMpfShmKTt2YXIgZD17ZXhwb3J0czp7fX0sXz17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQscj1lLmxpYixuPXIuV29yZEFycmF5LGE9ci5IYXNoZXIsaT1lLmFsZ28sbz1bXSxzPWkuU0hBMT1hLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBuLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OCwzMjg1Mzc3NTIwXSl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLl9oYXNoLndvcmRzLG49clswXSxhPXJbMV0saT1yWzJdLHM9clszXSxjPXJbNF0saD0wO2g8ODA7aCsrKXtpZihoPDE2KW9baF09MHx0W2UraF07ZWxzZXt2YXIgbD1vW2gtM11eb1toLThdXm9baC0xNF1eb1toLTE2XTtvW2hdPWw8PDF8bD4+PjMxfXZhciB1PShuPDw1fG4+Pj4yNykrYytvW2hdO3UrPWg8MjA/MTUxODUwMDI0OSsoYSZpfH5hJnMpOmg8NDA/MTg1OTc3NTM5MysoYV5pXnMpOmg8NjA/KGEmaXxhJnN8aSZzKS0xODk0MDA3NTg4OihhXmlecyktODk5NDk3NTE0LGM9cyxzPWksaT1hPDwzMHxhPj4+MixhPW4sbj11fXJbMF09clswXStufDAsclsxXT1yWzFdK2F8MCxyWzJdPXJbMl0raXwwLHJbM109clszXStzfDAscls0XT1yWzRdK2N8MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLGU9dC53b3JkcyxyPTgqdGhpcy5fbkRhdGFCeXRlcyxuPTgqdC5zaWdCeXRlcztyZXR1cm4gZVtuPj4+NV18PTEyODw8MjQtbiUzMixlWzE0KyhuKzY0Pj4+OTw8NCldPU1hdGguZmxvb3Ioci80Mjk0OTY3Mjk2KSxlWzE1KyhuKzY0Pj4+OTw8NCldPXIsdC5zaWdCeXRlcz00KmUubGVuZ3RoLHRoaXMuX3Byb2Nlc3MoKSx0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtlLlNIQTE9YS5fY3JlYXRlSGVscGVyKHMpLGUuSG1hY1NIQTE9YS5fY3JlYXRlSG1hY0hlbHBlcihzKX0oKSx0LlNIQTF9KGguZXhwb3J0cyl9KF8pO3ZhciBwPXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGUscixuO3I9KGU9dCkubGliLkJhc2Usbj1lLmVuYy5VdGY4LGUuYWxnby5ITUFDPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsZSl7dD10aGlzLl9oYXNoZXI9bmV3IHQuaW5pdCwic3RyaW5nIj09dHlwZW9mIGUmJihlPW4ucGFyc2UoZSkpO3ZhciByPXQuYmxvY2tTaXplLGE9NCpyO2Uuc2lnQnl0ZXM+YSYmKGU9dC5maW5hbGl6ZShlKSksZS5jbGFtcCgpO2Zvcih2YXIgaT10aGlzLl9vS2V5PWUuY2xvbmUoKSxvPXRoaXMuX2lLZXk9ZS5jbG9uZSgpLHM9aS53b3JkcyxjPW8ud29yZHMsaD0wO2g8cjtoKyspc1toXV49MTU0OTU1NjgyOCxjW2hdXj05MDk1MjI0ODY7aS5zaWdCeXRlcz1vLnNpZ0J5dGVzPWEsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2hhc2hlcjt0LnJlc2V0KCksdC51cGRhdGUodGhpcy5faUtleSl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faGFzaGVyLnVwZGF0ZSh0KSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9oYXNoZXIscj1lLmZpbmFsaXplKHQpO3JldHVybiBlLnJlc2V0KCksZS5maW5hbGl6ZSh0aGlzLl9vS2V5LmNsb25lKCkuY29uY2F0KHIpKX19KX0oaC5leHBvcnRzKX0ocCksZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLG49ci5CYXNlLGE9ci5Xb3JkQXJyYXksaT1lLmFsZ28sbz1pLk1ENSxzPWkuRXZwS0RGPW4uZXh0ZW5kKHtjZmc6bi5leHRlbmQoe2tleVNpemU6NCxoYXNoZXI6byxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZCh0KX0sY29tcHV0ZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcixuPXRoaXMuY2ZnLGk9bi5oYXNoZXIuY3JlYXRlKCksbz1hLmNyZWF0ZSgpLHM9by53b3JkcyxjPW4ua2V5U2l6ZSxoPW4uaXRlcmF0aW9ucztzLmxlbmd0aDxjOyl7ciYmaS51cGRhdGUocikscj1pLnVwZGF0ZSh0KS5maW5hbGl6ZShlKSxpLnJlc2V0KCk7Zm9yKHZhciBsPTE7bDxoO2wrKylyPWkuZmluYWxpemUociksaS5yZXNldCgpO28uY29uY2F0KHIpfXJldHVybiBvLnNpZ0J5dGVzPTQqYyxvfX0pO2UuRXZwS0RGPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gcy5jcmVhdGUocikuY29tcHV0ZSh0LGUpfX0oKSx0LkV2cEtERn0oaC5leHBvcnRzKX0oZCk7dmFyIGc9e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0LmxpYi5DaXBoZXJ8fGZ1bmN0aW9uKGUpe3ZhciByPXQsbj1yLmxpYixhPW4uQmFzZSxpPW4uV29yZEFycmF5LG89bi5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtLHM9ci5lbmM7cy5VdGY4O3ZhciBjPXMuQmFzZTY0LGg9ci5hbGdvLkV2cEtERixsPW4uQ2lwaGVyPW8uZXh0ZW5kKHtjZmc6YS5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsdCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlLHIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChyKSx0aGlzLl94Zm9ybU1vZGU9dCx0aGlzLl9rZXk9ZSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7by5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXBwZW5kKHQpLHRoaXMuX3Byb2Nlc3MoKX0sZmluYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuX2FwcGVuZCh0KSx0aGlzLl9kb0ZpbmFsaXplKCl9LGtleVNpemU6NCxpdlNpemU6NCxfRU5DX1hGT1JNX01PREU6MSxfREVDX1hGT1JNX01PREU6MixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/dzp2fXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm57ZW5jcnlwdDpmdW5jdGlvbihyLG4sYSl7cmV0dXJuIHQobikuZW5jcnlwdChlLHIsbixhKX0sZGVjcnlwdDpmdW5jdGlvbihyLG4sYSl7cmV0dXJuIHQobikuZGVjcnlwdChlLHIsbixhKX19fX0oKX0pO24uU3RyZWFtQ2lwaGVyPWwuZXh0ZW5kKHtfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9jZXNzKCEwKX0sYmxvY2tTaXplOjF9KTt2YXIgdT1yLm1vZGU9e30sZj1uLkJsb2NrQ2lwaGVyTW9kZT1hLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZSh0LGUpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLl9jaXBoZXI9dCx0aGlzLl9pdj1lfX0pLGQ9dS5DQkM9ZnVuY3Rpb24oKXt2YXIgdD1mLmV4dGVuZCgpO2Z1bmN0aW9uIHIodCxyLG4pe3ZhciBhLGk9dGhpcy5faXY7aT8oYT1pLHRoaXMuX2l2PWUpOmE9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgbz0wO288bjtvKyspdFtyK29dXj1hW29dfXJldHVybiB0LkVuY3J5cHRvcj10LmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2lwaGVyLGE9bi5ibG9ja1NpemU7ci5jYWxsKHRoaXMsdCxlLGEpLG4uZW5jcnlwdEJsb2NrKHQsZSksdGhpcy5fcHJldkJsb2NrPXQuc2xpY2UoZSxlK2EpfX0pLHQuRGVjcnlwdG9yPXQuZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9jaXBoZXIsYT1uLmJsb2NrU2l6ZSxpPXQuc2xpY2UoZSxlK2EpO24uZGVjcnlwdEJsb2NrKHQsZSksci5jYWxsKHRoaXMsdCxlLGEpLHRoaXMuX3ByZXZCbG9jaz1pfX0pLHR9KCksXz0oci5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9NCplLG49ci10LnNpZ0J5dGVzJXIsYT1uPDwyNHxuPDwxNnxuPDw4fG4sbz1bXSxzPTA7czxuO3MrPTQpby5wdXNoKGEpO3ZhciBjPWkuY3JlYXRlKG8sbik7dC5jb25jYXQoYyl9LHVucGFkOmZ1bmN0aW9uKHQpe3ZhciBlPTI1NSZ0LndvcmRzW3Quc2lnQnl0ZXMtMT4+PjJdO3Quc2lnQnl0ZXMtPWV9fTtuLkJsb2NrQ2lwaGVyPWwuZXh0ZW5kKHtjZmc6bC5jZmcuZXh0ZW5kKHttb2RlOmQscGFkZGluZzpffSkscmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdDtsLnJlc2V0LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5jZmcscj1lLml2LG49ZS5tb2RlO3RoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREU/dD1uLmNyZWF0ZUVuY3J5cHRvcjoodD1uLmNyZWF0ZURlY3J5cHRvcix0aGlzLl9taW5CdWZmZXJTaXplPTEpLHRoaXMuX21vZGUmJnRoaXMuX21vZGUuX19jcmVhdG9yPT10P3RoaXMuX21vZGUuaW5pdCh0aGlzLHImJnIud29yZHMpOih0aGlzLl9tb2RlPXQuY2FsbChuLHRoaXMsciYmci53b3JkcyksdGhpcy5fbW9kZS5fX2NyZWF0b3I9dCl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX21vZGUucHJvY2Vzc0Jsb2NrKHQsZSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmNmZy5wYWRkaW5nO3JldHVybiB0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFPyhlLnBhZCh0aGlzLl9kYXRhLHRoaXMuYmxvY2tTaXplKSx0PXRoaXMuX3Byb2Nlc3MoITApKToodD10aGlzLl9wcm9jZXNzKCEwKSxlLnVucGFkKHQpKSx0fSxibG9ja1NpemU6NH0pO3ZhciBwPW4uQ2lwaGVyUGFyYW1zPWEuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQpe3RoaXMubWl4SW4odCl9LHRvU3RyaW5nOmZ1bmN0aW9uKHQpe3JldHVybih0fHx0aGlzLmZvcm1hdHRlcikuc3RyaW5naWZ5KHRoaXMpfX0pLGc9KHIuZm9ybWF0PXt9KS5PcGVuU1NMPXtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7dmFyIGU9dC5jaXBoZXJ0ZXh0LHI9dC5zYWx0O3JldHVybihyP2kuY3JlYXRlKFsxMzk4ODkzNjg0LDE3MDEwNzY4MzFdKS5jb25jYXQocikuY29uY2F0KGUpOmUpLnRvU3RyaW5nKGMpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZSxyPWMucGFyc2UodCksbj1yLndvcmRzO3JldHVybiAxMzk4ODkzNjg0PT1uWzBdJiYxNzAxMDc2ODMxPT1uWzFdJiYoZT1pLmNyZWF0ZShuLnNsaWNlKDIsNCkpLG4uc3BsaWNlKDAsNCksci5zaWdCeXRlcy09MTYpLHAuY3JlYXRlKHtjaXBoZXJ0ZXh0OnIsc2FsdDplfSl9fSx2PW4uU2VyaWFsaXphYmxlQ2lwaGVyPWEuZXh0ZW5kKHtjZmc6YS5leHRlbmQoe2Zvcm1hdDpnfSksZW5jcnlwdDpmdW5jdGlvbih0LGUscixuKXtuPXRoaXMuY2ZnLmV4dGVuZChuKTt2YXIgYT10LmNyZWF0ZUVuY3J5cHRvcihyLG4pLGk9YS5maW5hbGl6ZShlKSxvPWEuY2ZnO3JldHVybiBwLmNyZWF0ZSh7Y2lwaGVydGV4dDppLGtleTpyLGl2Om8uaXYsYWxnb3JpdGhtOnQsbW9kZTpvLm1vZGUscGFkZGluZzpvLnBhZGRpbmcsYmxvY2tTaXplOnQuYmxvY2tTaXplLGZvcm1hdHRlcjpuLmZvcm1hdH0pfSxkZWNyeXB0OmZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBuPXRoaXMuY2ZnLmV4dGVuZChuKSxlPXRoaXMuX3BhcnNlKGUsbi5mb3JtYXQpLHQuY3JlYXRlRGVjcnlwdG9yKHIsbikuZmluYWxpemUoZS5jaXBoZXJ0ZXh0KX0sX3BhcnNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P2UucGFyc2UodCx0aGlzKTp0fX0pLHk9KHIua2RmPXt9KS5PcGVuU1NMPXtleGVjdXRlOmZ1bmN0aW9uKHQsZSxyLG4pe258fChuPWkucmFuZG9tKDgpKTt2YXIgYT1oLmNyZWF0ZSh7a2V5U2l6ZTplK3J9KS5jb21wdXRlKHQsbiksbz1pLmNyZWF0ZShhLndvcmRzLnNsaWNlKGUpLDQqcik7cmV0dXJuIGEuc2lnQnl0ZXM9NCplLHAuY3JlYXRlKHtrZXk6YSxpdjpvLHNhbHQ6bn0pfX0sdz1uLlBhc3N3b3JkQmFzZWRDaXBoZXI9di5leHRlbmQoe2NmZzp2LmNmZy5leHRlbmQoe2tkZjp5fSksZW5jcnlwdDpmdW5jdGlvbih0LGUscixuKXt2YXIgYT0obj10aGlzLmNmZy5leHRlbmQobikpLmtkZi5leGVjdXRlKHIsdC5rZXlTaXplLHQuaXZTaXplKTtuLml2PWEuaXY7dmFyIGk9di5lbmNyeXB0LmNhbGwodGhpcyx0LGUsYS5rZXksbik7cmV0dXJuIGkubWl4SW4oYSksaX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtuPXRoaXMuY2ZnLmV4dGVuZChuKSxlPXRoaXMuX3BhcnNlKGUsbi5mb3JtYXQpO3ZhciBhPW4ua2RmLmV4ZWN1dGUocix0LmtleVNpemUsdC5pdlNpemUsZS5zYWx0KTtyZXR1cm4gbi5pdj1hLml2LHYuZGVjcnlwdC5jYWxsKHRoaXMsdCxlLGEua2V5LG4pfX0pfSgpfShoLmV4cG9ydHMpfShnKSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIuQmxvY2tDaXBoZXIsbj1lLmFsZ28sYT1bXSxpPVtdLG89W10scz1bXSxjPVtdLGg9W10sbD1bXSx1PVtdLGY9W10sZD1bXTshZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8MjU2O2UrKyl0W2VdPWU8MTI4P2U8PDE6ZTw8MV4yODM7dmFyIHI9MCxuPTA7Zm9yKGU9MDtlPDI1NjtlKyspe3ZhciBfPW5ebjw8MV5uPDwyXm48PDNebjw8NDtfPV8+Pj44XjI1NSZfXjk5LGFbcl09XyxpW19dPXI7dmFyIHA9dFtyXSxnPXRbcF0sdj10W2ddLHk9MjU3KnRbX11eMTY4NDMwMDgqXztvW3JdPXk8PDI0fHk+Pj44LHNbcl09eTw8MTZ8eT4+PjE2LGNbcl09eTw8OHx5Pj4+MjQsaFtyXT15LHk9MTY4NDMwMDkqdl42NTUzNypnXjI1NypwXjE2ODQzMDA4KnIsbFtfXT15PDwyNHx5Pj4+OCx1W19dPXk8PDE2fHk+Pj4xNixmW19dPXk8PDh8eT4+PjI0LGRbX109eSxyPyhyPXBedFt0W3Rbdl5wXV1dLG5ePXRbdFtuXV0pOnI9bj0xfX0oKTt2YXIgXz1bMCwxLDIsNCw4LDE2LDMyLDY0LDEyOCwyNyw1NF0scD1uLkFFUz1yLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fblJvdW5kc3x8dGhpcy5fa2V5UHJpb3JSZXNldCE9PXRoaXMuX2tleSl7Zm9yKHZhciB0PXRoaXMuX2tleVByaW9yUmVzZXQ9dGhpcy5fa2V5LGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMvNCxuPTQqKCh0aGlzLl9uUm91bmRzPXIrNikrMSksaT10aGlzLl9rZXlTY2hlZHVsZT1bXSxvPTA7bzxuO28rKylvPHI/aVtvXT1lW29dOihoPWlbby0xXSxvJXI/cj42JiZvJXI9PTQmJihoPWFbaD4+PjI0XTw8MjR8YVtoPj4+MTYmMjU1XTw8MTZ8YVtoPj4+OCYyNTVdPDw4fGFbMjU1JmhdKTooaD1hWyhoPWg8PDh8aD4+PjI0KT4+PjI0XTw8MjR8YVtoPj4+MTYmMjU1XTw8MTZ8YVtoPj4+OCYyNTVdPDw4fGFbMjU1JmhdLGhePV9bby9yfDBdPDwyNCksaVtvXT1pW28tcl1eaCk7Zm9yKHZhciBzPXRoaXMuX2ludktleVNjaGVkdWxlPVtdLGM9MDtjPG47YysrKXtpZihvPW4tYyxjJTQpdmFyIGg9aVtvXTtlbHNlIGg9aVtvLTRdO3NbY109Yzw0fHxvPD00P2g6bFthW2g+Pj4yNF1dXnVbYVtoPj4+MTYmMjU1XV1eZlthW2g+Pj44JjI1NV1dXmRbYVsyNTUmaF1dfX19LGVuY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5fa2V5U2NoZWR1bGUsbyxzLGMsaCxhKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dFtlKzFdO3RbZSsxXT10W2UrM10sdFtlKzNdPXIsdGhpcy5fZG9DcnlwdEJsb2NrKHQsZSx0aGlzLl9pbnZLZXlTY2hlZHVsZSxsLHUsZixkLGkpLHI9dFtlKzFdLHRbZSsxXT10W2UrM10sdFtlKzNdPXJ9LF9kb0NyeXB0QmxvY2s6ZnVuY3Rpb24odCxlLHIsbixhLGksbyxzKXtmb3IodmFyIGM9dGhpcy5fblJvdW5kcyxoPXRbZV1eclswXSxsPXRbZSsxXV5yWzFdLHU9dFtlKzJdXnJbMl0sZj10W2UrM11eclszXSxkPTQsXz0xO188YztfKyspe3ZhciBwPW5baD4+PjI0XV5hW2w+Pj4xNiYyNTVdXmlbdT4+PjgmMjU1XV5vWzI1NSZmXV5yW2QrK10sZz1uW2w+Pj4yNF1eYVt1Pj4+MTYmMjU1XV5pW2Y+Pj44JjI1NV1eb1syNTUmaF1ecltkKytdLHY9blt1Pj4+MjRdXmFbZj4+PjE2JjI1NV1eaVtoPj4+OCYyNTVdXm9bMjU1JmxdXnJbZCsrXSx5PW5bZj4+PjI0XV5hW2g+Pj4xNiYyNTVdXmlbbD4+PjgmMjU1XV5vWzI1NSZ1XV5yW2QrK107aD1wLGw9Zyx1PXYsZj15fXA9KHNbaD4+PjI0XTw8MjR8c1tsPj4+MTYmMjU1XTw8MTZ8c1t1Pj4+OCYyNTVdPDw4fHNbMjU1JmZdKV5yW2QrK10sZz0oc1tsPj4+MjRdPDwyNHxzW3U+Pj4xNiYyNTVdPDwxNnxzW2Y+Pj44JjI1NV08PDh8c1syNTUmaF0pXnJbZCsrXSx2PShzW3U+Pj4yNF08PDI0fHNbZj4+PjE2JjI1NV08PDE2fHNbaD4+PjgmMjU1XTw8OHxzWzI1NSZsXSlecltkKytdLHk9KHNbZj4+PjI0XTw8MjR8c1toPj4+MTYmMjU1XTw8MTZ8c1tsPj4+OCYyNTVdPDw4fHNbMjU1JnVdKV5yW2QrK10sdFtlXT1wLHRbZSsxXT1nLHRbZSsyXT12LHRbZSszXT15fSxrZXlTaXplOjh9KTtlLkFFUz1yLl9jcmVhdGVIZWxwZXIocCl9KCksdC5BRVN9KGguZXhwb3J0cyl9KHUpO3ZhciB2PXUuZXhwb3J0cyx5PXtleHBvcnRzOnt9fTshZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByPXQsbj1yLmxpYixhPW4uV29yZEFycmF5LGk9bi5IYXNoZXIsbz1yLmFsZ28scz1bXSxjPVtdOyFmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7Zm9yKHZhciByPWUuc3FydCh0KSxuPTI7bjw9cjtuKyspaWYoISh0JW4pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHIodCl7cmV0dXJuIDQyOTQ5NjcyOTYqKHQtKDB8dCkpfDB9Zm9yKHZhciBuPTIsYT0wO2E8NjQ7KXQobikmJihhPDgmJihzW2FdPXIoZS5wb3cobiwuNSkpKSxjW2FdPXIoZS5wb3cobiwxLzMpKSxhKyspLG4rK30oKTt2YXIgaD1bXSxsPW8uU0hBMjU2PWkuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGEuaW5pdChzLnNsaWNlKDApKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMuX2hhc2gud29yZHMsbj1yWzBdLGE9clsxXSxpPXJbMl0sbz1yWzNdLHM9cls0XSxsPXJbNV0sdT1yWzZdLGY9cls3XSxkPTA7ZDw2NDtkKyspe2lmKGQ8MTYpaFtkXT0wfHRbZStkXTtlbHNle3ZhciBfPWhbZC0xNV0scD0oXzw8MjV8Xz4+PjcpXihfPDwxNHxfPj4+MTgpXl8+Pj4zLGc9aFtkLTJdLHY9KGc8PDE1fGc+Pj4xNyleKGc8PDEzfGc+Pj4xOSleZz4+PjEwO2hbZF09cCtoW2QtN10rditoW2QtMTZdfXZhciB5PW4mYV5uJmleYSZpLHc9KG48PDMwfG4+Pj4yKV4objw8MTl8bj4+PjEzKV4objw8MTB8bj4+PjIyKSxtPWYrKChzPDwyNnxzPj4+NileKHM8PDIxfHM+Pj4xMSleKHM8PDd8cz4+PjI1KSkrKHMmbF5+cyZ1KStjW2RdK2hbZF07Zj11LHU9bCxsPXMscz1vK218MCxvPWksaT1hLGE9bixuPW0rKHcreSl8MH1yWzBdPXJbMF0rbnwwLHJbMV09clsxXSthfDAsclsyXT1yWzJdK2l8MCxyWzNdPXJbM10rb3wwLHJbNF09cls0XStzfDAscls1XT1yWzVdK2x8MCxyWzZdPXJbNl0rdXwwLHJbN109cls3XStmfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxyPXQud29yZHMsbj04KnRoaXMuX25EYXRhQnl0ZXMsYT04KnQuc2lnQnl0ZXM7cmV0dXJuIHJbYT4+PjVdfD0xMjg8PDI0LWElMzIsclsxNCsoYSs2ND4+Pjk8PDQpXT1lLmZsb29yKG4vNDI5NDk2NzI5NiksclsxNSsoYSs2ND4+Pjk8PDQpXT1uLHQuc2lnQnl0ZXM9NCpyLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1pLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ci5TSEEyNTY9aS5fY3JlYXRlSGVscGVyKGwpLHIuSG1hY1NIQTI1Nj1pLl9jcmVhdGVIbWFjSGVscGVyKGwpfShNYXRoKSx0LlNIQTI1Nn0oaC5leHBvcnRzKX0oeSk7dmFyIHc9eS5leHBvcnRzLG09e2V4cG9ydHM6e319OyFmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgQXJyYXlCdWZmZXIpe3ZhciBlPXQubGliLldvcmRBcnJheSxyPWUuaW5pdCxuPWUuaW5pdD1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXImJih0PW5ldyBVaW50OEFycmF5KHQpKSwodCBpbnN0YW5jZW9mIEludDhBcnJheXx8InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OENsYW1wZWRBcnJheSYmdCBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5fHx0IGluc3RhbmNlb2YgSW50MTZBcnJheXx8dCBpbnN0YW5jZW9mIFVpbnQxNkFycmF5fHx0IGluc3RhbmNlb2YgSW50MzJBcnJheXx8dCBpbnN0YW5jZW9mIFVpbnQzMkFycmF5fHx0IGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHx0IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSYmKHQ9bmV3IFVpbnQ4QXJyYXkodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCkpLHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KXtmb3IodmFyIGU9dC5ieXRlTGVuZ3RoLG49W10sYT0wO2E8ZTthKyspblthPj4+Ml18PXRbYV08PDI0LWElNCo4O3IuY2FsbCh0aGlzLG4sZSl9ZWxzZSByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07bi5wcm90b3R5cGU9ZX19KCksdC5saWIuV29yZEFycmF5fShoLmV4cG9ydHMpfShtKTt2YXIgYj1tLmV4cG9ydHMseD17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LkhtYWNTSEEyNTZ9KGguZXhwb3J0cyl9KHgpO3ZhciBrLHosQT14LmV4cG9ydHM7b25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSxuPWUuam9iLGk9ZS5jbWQscz1lLnNlcnZlcixjPWUucGF0aCxoPWUuYnVmZmVyLHU9ZS5rZXlCYXNlNjQsZj1lLmd6aXAsZD1lLnJlZmVycmVyLF89ZS5pZCxwPWUuYXBwSWQsZz1lLnBlcnNpc3RlbnRJZCx5PWUuQ1JPUVVFVF9WRVJTSU9OLG09ZS5kZWJ1Zyx4PWUud2hhdDtpZigidXBsb2FkRW5jcnlwdGVkIj09PWkpTChjKTtlbHNlIGNvbnNvbGUuZXJyb3IoIlVua25vd24gd29ya2VyIGNvbW1hbmQiLGkpO2Z1bmN0aW9uIEUodCl7dmFyIGU9RGF0ZS5ub3coKSxyPWIuY3JlYXRlKHQpLG49bC5wYXJzZSh1KSxpPUEocixuKSxvPWIucmFuZG9tKDE2KSxzPXYuZW5jcnlwdChyLG4se2l2Om99KS5jaXBoZXJ0ZXh0LGM9bmV3IEFycmF5QnVmZmVyKDQrby5zaWdCeXRlcytpLnNpZ0J5dGVzK3Muc2lnQnl0ZXMpLGg9bmV3IERhdGFWaWV3KGMpLGY9MDtoLnNldFVpbnQzMihmLDExMjk0NjgyMDksITEpLGYrPTQ7Zm9yKHZhciBkPTAscD1bbyxpLHNdO2Q8cC5sZW5ndGg7ZCsrKXt2YXIgZyx5PWEocFtkXS53b3Jkcyk7dHJ5e2Zvcih5LnMoKTshKGc9eS5uKCkpLmRvbmU7KXt2YXIgdz1nLnZhbHVlO2guc2V0SW50MzIoZix3LCExKSxmKz00fX1jYXRjaCh0KXt5LmUodCl9ZmluYWxseXt5LmYoKX19cmV0dXJuIG0mJmNvbnNvbGUubG9nKCIiLmNvbmNhdChfLCIgIikuY29uY2F0KHgsIiBlbmNyeXB0ZWQgKCIpLmNvbmNhdChjLmJ5dGVMZW5ndGgsIiBieXRlcykgaW4gIikuY29uY2F0KERhdGUubm93KCktZSwibXMiKSksY31mdW5jdGlvbiBTKHQpe3ZhciBlPURhdGUubm93KCkscj1vLmV4cG9ydHMuZGVmbGF0ZSh0LHtnemlwOiEwLGxldmVsOjF9KTtyZXR1cm4gbSYmY29uc29sZS5sb2coIiIuY29uY2F0KF8sIiAiKS5jb25jYXQoeCwiIGNvbXByZXNzZWQgKCIpLmNvbmNhdChyLmxlbmd0aCwiIGJ5dGVzKSBpbiAiKS5jb25jYXQoRGF0ZS5ub3coKS1lLCJtcyIpKSxyfWZ1bmN0aW9uIEIodCl7dmFyIGU9RGF0ZS5ub3coKSxyPXcoYi5jcmVhdGUodCkpLG49bC5zdHJpbmdpZnkocikucmVwbGFjZSgvPS9nLCIiKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpO3JldHVybiBtJiZjb25zb2xlLmxvZygiIi5jb25jYXQoXywiICIpLmNvbmNhdCh4LCIgaGFzaGVkICgiKS5jb25jYXQodC5sZW5ndGgsIiBieXRlcykgaW4gIikuY29uY2F0KERhdGUubm93KCktZSwibXMiKSksbn1mdW5jdGlvbiBSKHQpe3JldHVybiBELmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBEKCl7cmV0dXJuKEQ9cihyZWdlbmVyYXRvclJ1bnRpbWUubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcixuLGEsaSxvLGMsaCxsLHUsZjtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKHI9RGF0ZS5ub3coKSxuPSIiLmNvbmNhdChzLnVybCwiLyIpLmNvbmNhdChlKSxzLmFwaUtleSl7dC5uZXh0PTQ7YnJlYWt9cmV0dXJuIHQuYWJydXB0KCJyZXR1cm4iLHt1cmw6bix1cGxvYWRVcmw6bn0pO2Nhc2UgNDpyZXR1cm4gdC5uZXh0PTYsayhuLHtoZWFkZXJzOnsiWC1Dcm9xdWV0LUF1dGgiOnMuYXBpS2V5LCJYLUNyb3F1ZXQtQXBwIjpwLCJYLUNyb3F1ZXQtSWQiOmcsIlgtQ3JvcXVldC1TZXNzaW9uIjpfLCJYLUNyb3F1ZXQtVmVyc2lvbiI6eSwiWC1Dcm9xdWV0LVBhdGgiOm5ldyBVUkwoZCkucGF0aG5hbWV9LHJlZmVycmVyOmR9KTtjYXNlIDY6aWYoYT10LnNlbnQsaT1hLm9rLG89YS5zdGF0dXMsYz1hLnN0YXR1c1RleHQsaSl7dC5uZXh0PTEwO2JyZWFrfXRocm93IEVycm9yKCJFcnJvciBpbiBzaWduaW5nIFVSTDogIi5jb25jYXQobywiIC0gIikuY29uY2F0KGMpKTtjYXNlIDEwOnJldHVybiB0Lm5leHQ9MTIsYS5qc29uKCk7Y2FzZSAxMjppZihoPXQuc2VudCxsPWguZXJyb3IsdT1oLnJlYWQsZj1oLndyaXRlLCFsKXt0Lm5leHQ9MTg7YnJlYWt9dGhyb3cgRXJyb3IobCk7Y2FzZSAxODpyZXR1cm4gbSYmY29uc29sZS5sb2coIiIuY29uY2F0KF8sIiAiKS5jb25jYXQoeCwiIGF1dGhvcml6ZWQgaW4gIikuY29uY2F0KERhdGUubm93KCktciwibXMiKSksdC5hYnJ1cHQoInJldHVybiIse3VybDp1LHVwbG9hZFVybDpmfSk7Y2FzZSAyMDpjYXNlImVuZCI6cmV0dXJuIHQuc3RvcCgpfX0pLHQpfSkpKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEwodCl7cmV0dXJuIFUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIFUoKXtyZXR1cm4oVT1yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKChmdW5jdGlvbiB0KGUpe3ZhciByLGEsaSxvLHMsYyxsLHUsdjtyZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiB0LnByZXY9MCxyPUUoZj9TKGgpOmgpLGUuaW5jbHVkZXMoIiVIQVNIJSIpJiYoZT1lLnJlcGxhY2UoIiVIQVNIJSIsQihyKSkpLHQubmV4dD02LFIoZSk7Y2FzZSA2OnJldHVybiBhPXQuc2VudCxpPWEudXBsb2FkVXJsLG89YS51cmwscz1EYXRlLm5vdygpLHQubmV4dD0xMixrKGkse21ldGhvZDoiUFVUIixtb2RlOiJjb3JzIixoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIiwiWC1Dcm9xdWV0LUFwcCI6cCwiWC1Dcm9xdWV0LUlkIjpnLCJYLUNyb3F1ZXQtU2Vzc2lvbiI6XywiWC1Dcm9xdWV0LVZlcnNpb24iOnl9LHJlZmVycmVyOmQsYm9keTpyfSk7Y2FzZSAxMjppZihjPXQuc2VudCxsPWMub2ssdT1jLnN0YXR1cyx2PWMuc3RhdHVzVGV4dCxsKXt0Lm5leHQ9MTg7YnJlYWt9dGhyb3cgRXJyb3IoInNlcnZlciByZXR1cm5lZCAiLmNvbmNhdCh1LCIgIikuY29uY2F0KHYsIiBmb3IgUFVUICIpLmNvbmNhdChpKSk7Y2FzZSAxODptJiZjb25zb2xlLmxvZygiIi5jb25jYXQoXywiICIpLmNvbmNhdCh4LCIgdXBsb2FkZWQgKCIpLmNvbmNhdCh1LCIpIGluICIpLmNvbmNhdChEYXRlLm5vdygpLXMsIm1zICIpLmNvbmNhdChvKSkseih7am9iOm4sdXJsOm8sb2s6bCxzdGF0dXM6dSxzdGF0dXNUZXh0OnZ9KSx0Lm5leHQ9MjY7YnJlYWs7Y2FzZSAyMjp0LnByZXY9MjIsdC50MD10LmNhdGNoKDApLG0mJmNvbnNvbGUubG9nKCIiLmNvbmNhdChfLCIgdXBsb2FkIGVycm9yICIpLmNvbmNhdCh0LnQwLm1lc3NhZ2UpKSx6KHtqb2I6bixvazohMSxzdGF0dXM6LTEsc3RhdHVzVGV4dDp0LnQwLm1lc3NhZ2V9KTtjYXNlIDI2OmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCxudWxsLFtbMCwyMl1dKX0pKSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LGs9ZmV0Y2gsej1wb3N0TWVzc2FnZX0oKTsKCg==",Tc=null,Yc=!1,function(e){return Rc=Rc||Wc(Cc,Tc,Yc),new Worker(Rc,e)}),Vc=Y.CROQUET_VERSION,Kc="node"===Y.CROQUET_PLATFORM;Kc||window.location.hostname.match(/co?de?pe?n\.io/)?console.log("Croquet "+Vc):console.log("%cCroquet%c %c"+Vc,"color:#F0493E","color:inherit","color:".concat(Vc.includes("+")?"#909":"inherit"));var Ic=!Kc&&!!window.location.hostname.match(/^(.*\.)?croquet\.io$/i)&&window.location.pathname.startsWith("/dev/"),Mc=!Kc&&!!window.location.hostname.match(/^(.*\.)?croquet\.dev$/i),Nc="https://croquet.io/files/v1",Hc="https://files.croquet.io";function Fc(e){var t,n=e.lastIndexOf(":"),r=-1===n?e:e.slice(n+1),i=-1===n?"":e.slice(0,n),o=F.backend||i,s=F.reflector&&F.reflector.match(/^wss?:/);if("none"===o||s)return{apiKey:r,signServer:"none",reflector:"overridden"};if(!o&&!Kc)switch(window.location.hostname){case"croquet.dev":o="dev";break;case"staging.croquet.io":o="staging"}switch(o){case"":case"prod":t="croquet.io";break;case"staging":t="staging.croquet.io";break;case"dev":t="croquet.dev";break;default:t="".concat(o,".croquet.dev")}return{apiKey:r,signServer:"https://api.".concat(t,"/sign"),reflector:"wss://api.".concat(t,"/reflector/v").concat(1)}}var zc=Hc,Ec=null;var _c,jc=F.nocheat,Jc=200,Uc=[0],Qc=4096;var Oc=new Pc;Oc.onerror=function(e){return console.error("UploadWorker error: ".concat(e.message))};var Dc=0,Bc=new Set;function Ac(e){var t,n=C(Bc);try{var i=function(){var n=t.value;if(n.id===e){var r=n.sessionSpec;return{v:{appId:r.appId,persistentId:r.persistentId,uploadEncrypted:function(e){return n.uploadEncrypted(e)},downloadEncrypted:function(e){return n.downloadEncrypted(e)}}}}};for(n.s();!(t=n.n()).done;){var o=i();if("object"===r(o))return o.v}}catch(e){n.e(e)}finally{n.f()}return{}}function qc(e){var t,n=C(Bc);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e)return r}}catch(e){n.e(e)}finally{n.f()}return null}var $c=function(e){function t(){var e,n;s(this,t),e=F.dev||!1!==F.dev&&"localhost",n=F.dev||!1!==F.dev&&(Ic||Mc),Ec={messages:F.has("debug","messages",!1),sends:F.has("debug","sends",!1),ticks:F.has("debug","ticks",!1),pong:F.has("debug","pong",!1),snapshot:F.has("debug","snapshot",!1),session:F.has("debug","session",!1),initsnapshot:F.has("debug","initsnapshot",e),reflector:F.has("debug","reflector",n)},this.reset()}var i,a,l,u,d,h,f,m,p,y,b,v,g,Z;return c(t,[{key:"reset",value:function(){globalThis.CROQUETVM===this.vm&&delete globalThis.CROQUETVM,this.vm=null,this.session=null,this.connection=this.connection||new el(this),this.networkQueue=[],this.reflectorTime=0,this.msPerTick=this.msPerTick||0,this.tickMultiplier=this.tickMultiplier||1,this.extrapolatedTimeBase=Date.now(),this.key=this.key||null,this.tove=this.tove||null,this.viewId=this.viewId||Math.floor(Math.random()*Math.pow(36,10)).toString(36),this.timeline="",this.rejoinTimeout&&clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0,this.sendBuffer=[],this.users=0,this.usersTotal=0,this.cpuTime=0,this.triggeringCpuTime=null,this.synced=null,this.latency=0,this.latencyHistory&&(this.latencyHistory=[]),this.localTicker&&(globalThis.clearInterval(this.localTicker),delete this.localTicker),this.syncTimer&&(globalThis.clearTimeout(this.syncTimer),delete this.syncTimer),this.tuttiHistory=[],this.lastAnimationEnd=0,this.animationGapCheck=[],this.rateLimitedSendTimes=[],this.rateLimitBuffer=[],this.rateLimitSoftWarned=!1,this.rateLimitBufferWarned=!1,this.rateLimitLastLogged=0,this.payloadSizeWarned=!1,vt.removeAllSubscriptionsFor(this.viewId),vt.addSubscription(this.viewId,"__peers__",this.viewId,(function(e){return $e("users now ".concat(e.count))}),"oncePerFrameWhileSynced"),this.leaving||mt.showSyncWait(!0)}},{key:"id",get:function(){return this.vm?this.vm.id:this.sessionSpec.id}},{key:"persistentId",get:function(){return this.sessionSpec.persistentId}},{key:"versionId",get:function(){return this.sessionSpec.codeHash}},{key:"extrapolatedTime",get:function(){return Date.now()-this.extrapolatedTimeBase}},{key:"viewOnly",get:function(){return this.sessionSpec.viewOnly}},{key:"backlog",get:function(){return this.vm?this.reflectorTime-this.vm.time:0}},{key:"starvation",get:function(){return Date.now()-this.lastReceived}},{key:"lag",get:function(){return this.vm?Math.max(0,this.extrapolatedTime-this.vm.time-this.msPerTick):0}},{key:"activity",get:function(){return Date.now()-this.lastSent}},{key:"viewed",get:function(){return!(!this.session||!this.session.view)}},{key:"connected",get:function(){return this.connection.connected}},{key:"shouldLeaveWhenDisconnected",get:function(){return this.leaving||!this.canRejoinSeamlessly||0===this.sessionSpec.rejoinLimit}},{key:"canRejoinSeamlessly",get:function(){return!!this.timeline}},{key:"checkForConnection",value:function(e){this.connection.checkForConnection(e)}},{key:"dormantDisconnect",value:function(){this.connected&&this.connection.dormantDisconnect()}},{key:"initFromSessionSpec",value:(Z=o(regeneratorRuntime.mark((function e(t){var r,i,o,s,a,c,l,u,d,h,f,m,p,y,b,v,g,Z,X,w,L,x,G,k,S,W;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,i=t.optionsFromUrl,o=t.password,s=t.appId,a=t.apiKey,c=t.viewIdDebugSuffix,l=s?"".concat(s,"/").concat(r):r,c&&(this.viewId=this.viewId.replace(/_.*$/,"")+"_"+encodeURIComponent((""+c).slice(0,16)).replace(/[^a-z0-9]/gi,(function(e){return"_".concat("%"===e?"":e.charCodeAt(0).toString(16).toUpperCase())}))),u=n({},t.options),i){d=C(i);try{for(d.s();!(h=d.n()).done;)(f=h.value)in F&&(u[f]=F[f])}catch(e){d.e(e)}finally{d.f()}}for(m={},p=0,y=["hashOverride"];p<y.length;p++)(b=y[p])in F?m[b]=F[b]:b in t&&(m[b]=t[b]);return this.key=wo(o,"",{keySize:8}),e.next=10,me(l,u);case 10:return v=e.sent,e.next=13,this.verifyApiKey(a,s,v);case 13:return g=e.sent,Z=g.developerId,X=g.token,e.next=18,be(v,Z,m,Vc);case 18:return w=e.sent,L=w.id,x=w.codeHash,G=w.computedCodeHash,e.next=24,this.encrypt(L);case 24:this.tove=e.sent,Ec.session&&console.log('Croquet session "'.concat(l,'":\n        sessionId=').concat(L).concat(s?"\n        persistentId=".concat(v):"","\n        versionId=").concat(x===G?x:"".concat(x," (specified in hashOverride)\n        versionId=").concat(G," (computed)"),"\n        viewId=").concat(this.viewId)),this.eventRateLimit=t.eventRateLimit,this.eventHistoryLimit=this.eventRateLimit,this.eventMaxBundles=this.eventRateLimit,this.sessionSpec=n(n({},t),{},{options:u,name:l,id:L,persistentId:v,developerId:Z,token:X,codeHash:x,computedCodeHash:G}),k=this.getTickAndMultiplier(),S=k.msPerTick,W=k.multiplier,this.msPerTick=S,this.tickMultiplier=W,this.setUpActivityChecks();case 34:case"end":return e.stop()}}),e,this)}))),function(e){return Z.apply(this,arguments)})},{key:"establishSession",value:(g=o(regeneratorRuntime.mark((function e(){var t,n,r,i,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.sessionSpec,n=t.id,r=t.persistentId,i=t.codeHash,this.sessionSpec.snapshot={id:n,time:0,meta:{id:n,persistentId:r,codeHash:i,created:(new Date).toISOString()}},o=new Promise((function(e){return s.sessionSpec.sessionJoined=e})),this.checkForConnection(!1),Ec.session&&console.log(n,"waiting for SYNC"),e.next=7,o;case 7:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"verifyApiKey",value:(v=o(regeneratorRuntime.mark((function e(t,n,r){var i,o,s,a,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Fc(t),o=i.signServer,s=i.apiKey,"none"!==o){e.next=3;break}return e.abrupt("return",{developerId:"unknown_dev_id"});case 3:return e.prev=3,e.next=6,fetch("".concat(o,"/join?meta=login"),{method:"GET",mode:"cors",headers:{"X-Croquet-Auth":s,"X-Croquet-App":n,"X-Croquet-Id":r,"X-Croquet-Version":Vc,"X-Croquet-Path":new URL(mt.referrerURL()).pathname},referrer:mt.referrerURL(),referrerPolicy:"no-referrer-when-downgrade"});case 6:return a=e.sent,e.next=9,a.json();case 9:if(c=e.sent,l=c.error,u=c.developerId,d=c.token,!l){e.next=15;break}throw Error(l);case 15:return Ec.session&&console.log("Croquet: verified API key"),e.abrupt("return",{developerId:u,token:d});case 19:throw e.prev=19,e.t0=e.catch(3),Error('Croquet API key validation failed for "'.concat(t,'": ').concat(e.t0.message));case 22:case"end":return e.stop()}}),e,null,[[3,19]])}))),function(e,t,n){return v.apply(this,arguments)})},{key:"lastKnownTime",value:function(e){return Math.max(e.time,e.externalTime)}},{key:"takeSnapshot",value:function(){var e=this.vm.snapshot(),t=this.lastKnownTime(e),r=e.externalSeq;return e.meta=n(n({},this.sessionSpec.snapshot.meta),{},{options:this.sessionSpec.options,time:t,seq:r,date:(new globalThis.CroquetViewDate).toISOString(),host:Kc?"localhost":window.location.hostname,sdk:Vc}),delete e.meta.hash,e}},{key:"takeSnapshotHandleErrors",value:function(){var e,t,n;try{e=Ee.begin("snapshot"),n=this.takeSnapshot()}catch(e){return et("snapshot",e),null}finally{t=Ee.end("snapshot")-e}return Ec.snapshot&&console.log(this.id,"snapshot taken in ".concat(Math.ceil(t)," ms")),n}},{key:"scheduleSnapshot",value:function(){if(this.connected&&this.vm&&!this.viewOnly){var e=this.vm.time,t=e-this.vm.lastSnapshotPoll;if(t<5e3)Ec.snapshot&&console.log("not requesting snapshot poll (".concat(t,"ms since poll scheduled)"));else{var n=new Rl(e,0,"_","handlePollForSnapshot",[]);this.sendTagged(n,{debounce:5e3,msgID:"pollForSnapshot"}),Ec.snapshot&&console.log(this.id,"requesting snapshot poll via reflector")}}}},{key:"handlePollForSnapshot",value:function(e){var t=this;if(!0!==this.synced||this.viewOnly)this.triggeringCpuTime=null;else{var n,r,i,o=this.triggeringCpuTime||this.cpuTime;this.triggeringCpuTime=null,this.cpuTime=0;try{n=Ee.begin("snapshot"),r={cpuTime:o,hash:this.vm.getSummaryHash(),viewId:this.viewId}}catch(e){return void et("snapshot",e)}finally{i=Ee.end("snapshot")-n,this.cpuTime-=i}Ec.snapshot&&console.log(this.id,"Summary hashing took ".concat(Math.ceil(i),"ms")),Promise.resolve().then((function(){return t.pollForSnapshot(e,r)}))}}},{key:"pollForSnapshot",value:function(e,t){t.cpuTime+=Math.random(),Ec.snapshot&&console.log(this.id,"sending snapshot vote",t),this.sendTutti({time:e,topic:"snapshot",data:t,tallyTarget:["handleSnapshotVote"]})}},{key:"handleSnapshotVote",value:function(e){var t=this;if(!0===this.synced){var n=e.tally;Ec.snapshot&&console.log(this.id,"received snapshot votes",n);var r=this.analyzeTally(n,"cpuTime"),i=r.numberOfGroups,o=r.shouldUpload,s=r.dissidentFlag;if(i>1&&console.error(this.id,"Session diverged! Snapshots fall into ".concat(i," groups")),o){var a=this.takeSnapshotHandleErrors();a&&Promise.resolve().then((function(){return t.uploadSnapshot(a,s)}))}}else Ec.snapshot&&console.log(this.id,"Ignoring snapshot vote during sync")}},{key:"analyzeTally",value:function(e,t){var n=this,r=!1,i=null,o=[],s={},a=null;Object.keys(e).forEach((function(e,t){var r=JSON.parse(e);o.push(r);var i=r.hash;r.viewId===n.viewId&&(a=t),s[i]||(s[i]=[]),s[i].push(t)}));var c=Object.keys(s),l=c.length,u=0;l>1&&(c.sort((function(e,t){return s[t].length-s[e].length})),s[c[0]].length===s[c[1]].length&&(Ec.snapshot&&console.log(this.id,"Deciding consensus by tie-break"),c[1]<c[0]&&(u=1)));var d=c[u];if(null!==a){var h=o[a].hash,f=s[h];f.length>1&&f.sort((function(e,n){return o[e][t]-o[n][t]})),f[0]===a&&(r=!0,h!==d&&(i={groupVotes:f.length,allVotes:o.length}))}return{numberOfGroups:l,shouldUpload:r,dissidentFlag:i}}},{key:"snapshotPath",value:function(e,t,n){var r=Math.ceil(e).toString().padStart(10,"0"),i=this.sessionSpec,o=i.appId,s=i.persistentId,a=i.codeHash;return i.apiKey?"apps/".concat(o,"/snap/").concat(a,"/").concat(s,".").concat(this.id,"/").concat(r,"_").concat(t,".").concat(n):"snapshots/".concat(this.id,"/").concat(r,"_").concat(t,"-").concat(n,".snap")}},{key:"hashSnapshot",value:function(e){return e.meta.hash?e.meta.hash:(e.meta.hashPromise||(e.meta.hashPromise=new Promise((function(t){var r=n({},e);delete r.meta,ue(JSON.stringify(r)).then((function(n){e.meta.hash=n,delete e.meta.hashPromise,t(n)}))}))),e.meta.hashPromise)}},{key:"uploadServer",value:function(e){if("string"==typeof F.files){var t=F.files;return t.endsWith("/")&&(t=t.slice(0,-1)),{url:t,apiKey:null}}var n=Fc(e),r=n.apiKey,i=n.signServer;if("none"===i)throw Error("no file server configured");return{url:i,apiKey:r}}},{key:"uploadSnapshot",value:(b=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l,u,d,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:null,e.next=3,this.hashSnapshot(t);case 3:return r=Ee.begin("snapshot"),i=JSON.stringify(t),o=Ee.end("snapshot")-r,Ec.snapshot&&console.log(this.id,"snapshot stringified (".concat(i.length," bytes) in ").concat(Math.ceil(o),"ms")),s=t.meta,a=s.time,c=s.seq,l=s.hash,u=this.connection.socket,e.prev=9,e.next=12,this.uploadEncrypted({content:i,path:this.snapshotPath(a,c,l),key:this.key,gzip:!0,debug:Ec.snapshot,what:"snapshot"});case 12:if(d=e.sent,this.connection.socket===u){e.next=16;break}return console.warn(this.id,"Controller was reset while trying to upload snapshot"),e.abrupt("return",!1);case 16:return this.announceSnapshotUrl(a,c,l,d,n),e.abrupt("return",!0);case 20:return e.prev=20,e.t0=e.catch(9),console.error(this.id,"Failed to upload snapshot"),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,this,[[9,20]])}))),function(e){return b.apply(this,arguments)})},{key:"announceSnapshotUrl",value:function(e,t,n,r,i){if(Ec.snapshot){var o="time: ".concat(e,", seq: ").concat(t,", hash: ").concat(n);i&&(o+=", as dissident; "+JSON.stringify(i)),console.log(this.id,"sending snapshot url to reflector (".concat(o,"): ").concat(r))}try{this.connection.send(JSON.stringify({id:this.id,action:"SNAP",args:{time:e,seq:t,hash:n,url:r,dissident:i}}))}catch(e){console.error("ERROR while sending",e)}}},{key:"downloadEncrypted",value:(y=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l,u,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.gzip,i=t.key,o=t.debug,s=t.json,a=t.what,n.startsWith(Nc)&&(n=n.replace(Nc,Hc)),c=Date.now(),e.next=5,fetch(n,{method:"GET",mode:"cors",headers:{"X-Croquet-App":this.sessionSpec.appId,"X-Croquet-Id":this.sessionSpec.persistentId,"X-Croquet-Session":this.sessionSpec.id,"X-Croquet-Version":Vc},referrer:mt.referrerURL()});case 5:return l=e.sent,e.next=8,l.arrayBuffer();case 8:return u=e.sent,o&&console.log(this.id,"".concat(a," fetched (").concat(u.byteLength," bytes) in ").concat(-c+(c=Date.now()),"ms")),d=this.decryptBinary(u,i),o&&console.log(this.id,"".concat(a," decrypted (").concat(d.length," bytes) in ").concat(-c+(c=Date.now()),"ms")),h=r?Sc.inflate(d):d,o&&r&&console.log(this.id,"".concat(a," inflated (").concat(h.length," bytes) in ").concat(-c+(c=Date.now()),"ms")),e.abrupt("return",s?JSON.parse((new TextDecoder).decode(h)):h);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"uploadEncrypted",value:(p=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l,u,d,h,f,m,p,y,b=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.content,r=t.path,i=t.key,o=t.gzip,s=t.keep,a=t.debug,c=t.what,l="string"==typeof n?(new TextEncoder).encode(n).buffer:n,u=s?void 0:[l],d="string"==typeof i?i:yo.stringify(i),h=this.sessionSpec,f=h.apiKey,m=h.appId,p=h.persistentId,y=++Dc,e.abrupt("return",new Promise((function(e,t){var n=Kc?"addListener":"addEventListener",i=Kc?"removeListener":"removeEventListener";Oc.postMessage({job:y,cmd:"uploadEncrypted",server:b.uploadServer(f),path:r,buffer:l,keyBase64:d,gzip:o,referrer:mt.referrerURL(),id:b.id,appId:m,persistentId:p,CROQUET_VERSION:Vc,debug:a,what:c},u);try{Oc[n]("message",(function n(r){if(y===r.data.job){var o=r.data,s=o.url,a=o.ok,c=o.status,l=o.statusText;Oc[i]("message",n),a?e(s):t(Error("".concat(c,": ").concat(l)))}}))}catch(e){console.log("failed to add listener",e)}})));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"persistentPath",value:function(e){var t=this.sessionSpec,n=t.appId,r=t.persistentId;return"apps/".concat(n,"/").concat(r,"/save/").concat(e)}},{key:"pollForPersist",value:function(e,t,n,r,i){if(this.synced){if(!this.sessionSpec.appId)throw Error("Persistence API requires appId");var o={viewId:this.viewId,hash:r,ms:i+.001*Math.random()},s={persistTime:t,persistentHash:r,persistentString:n};Ec.snapshot&&console.log(this.id,"sending persistence vote for time @".concat(t),o),this.sendTutti({time:e,topic:"persist",data:o,localContext:s,tallyTarget:["handlePersistVote"]})}}},{key:"handlePersistVote",value:(m=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l,u,d,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tally,r=t.localContext,Ec.snapshot&&(i=r?"for time @".concat(r.persistTime):"that we didn't participate in",console.log(this.id,"received persistence vote ".concat(i),n)),o=this.analyzeTally(n,"ms"),s=o.numberOfGroups,a=o.shouldUpload,c=o.dissidentFlag,s>1&&console.warn(this.id,"Persistence records fall into ".concat(s," groups")),a&&r){e.next=6;break}return e.abrupt("return");case 6:return l=r.persistTime,u=r.persistentHash,d=r.persistentString,e.next=9,this.uploadEncrypted({path:this.persistentPath(u),content:d,key:this.key,gzip:!0,debug:Ec.snapshot,what:"persistent data"});case 9:h=e.sent,Ec.snapshot&&(f=c?" (as dissident; ".concat(JSON.stringify(c),")"):"",console.log(this.id,"sending persistent data url to reflector".concat(f,": ").concat(h)));try{this.connection.send(JSON.stringify({id:this.id,action:"SAVE",args:{persistTime:l,url:h,dissident:c}}))}catch(e){console.error("ERROR while sending",e)}case 12:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"convertReflectorMessage",value:function(e){var t="noop",n=[];switch(e[2].what){case"users":var r=e[2],i=r.joined,o=r.left,s=r.active,a=r.total;this.users=s,this.usersTotal=a;var c="__peers__",l={entered:i||[],exited:o||[],count:s};t="publishFromModelOnly",n=["__VM__",c,l],vt.handleEvent(this.viewId+":"+c,l);break;case"tally":var u=e[2],d=u.tuttiSeq,h=u.tuttiKey,f=u.tally,m=u.tallyTarget,p=u.missingClients;(Ec.messages||Ec.snapshot)&&p&&console.log("".concat(p," ").concat(1===p?"client":"clients"," failed to participate in tally ").concat(h||d)),t="handleTuttiResult",n=[{tuttiSeq:d,tuttiKey:h,tally:f,tallyTarget:m}]}var y=new Rl(0,0,"_",t,n);e[2]=y.asState()[2]}},{key:"handleTuttiResult",value:function(e){var t=e.tuttiSeq,n=e.tuttiKey,r=e.tally,i=e.tallyTarget,o=n?function(e){return e.tuttiKey===n}:function(e){return e.dummyTuttiSeq===t},s=this.tuttiHistory.findIndex(o),a=-1!==s&&this.tuttiHistory.splice(s,1)[0],c=null,l=null;if(a&&(c=a.payload,l=a.localContext),i){var u=w(i),d=u[0],h=u.slice(1),f=[].concat(L(h),[{tally:r,localPayload:c,localContext:l}]),m=new Rl(0,0,"_",d,f);this.vm.verifyExternal(m),m.executeOn(this.vm,!0)}}},{key:"receive",value:(f=o(regeneratorRuntime.mark((function e(t,n){var r,i,o,s,a,c,l,u,d,h,f,m,p,y,b,v,g,Z,w,x,G,k,S,W,T,Y,R,P,V,K,I,M,N,H,F,z,E,_,j,J,U,Q,O=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.lastReceived,this.lastReceived=this.connection.lastReceived,e.t0=t,e.next="SYNC"===e.t0?5:"RECV"===e.t0?87:"TICK"===e.t0?111:"INFO"===e.t0?119:"REQU"===e.t0?122:125;break;case 5:if(this.syncReceived=!0,this.clearSyncReceiptTimeout(),Bc.add(this),o=n.messages,s=n.url,a=n.persisted,c=n.time,l=n.seq,u=n.snapshotSeq,d=n.tove,h=n.reflector,f=n.flags,!d||d===this.tove){e.next=19;break}if(e.prev=10,this.decrypt(d)===this.id){e.next=13;break}throw Error("wrong sessionId in tove?!");case 13:e.next=19;break;case 15:return e.prev=15,e.t1=e.catch(10),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt session secret: ".concat(e.t1.message)),4200),e.abrupt("return");case 19:if(m=n.timeline||n.reflectorSession,this.flags=f||{},p=a?"persisted session":"snapshot",Ec.session&&console.log(this.id,"received SYNC from ".concat(h," reflector: time ").concat(c,", ").concat(o.length," messages, ").concat(p," ").concat(s||"<none>")),y=!!this.vm){if(this.networkQueue.length=0,b=!!m&&m===this.timeline,v=o[0],g=l,Z=void 0!==u?u:v?v[1]:g,Ec.messages&&console.log(this.id,"rejoin: we have #".concat(this.vm.seq," SYNC has #").concat(Z,"-#").concat(g)),w=b&&Yl(Z,this.vm.seq)&&Yl(this.vm.seq,g)&&c>=this.reflectorTime){for(x=0,v&&Yl(v[1],this.vm.seq)&&(x=this.vm.seq-v[1]+1>>>0),G=x;w&&G<o.length;G++)"string"!=typeof(k=o[G][2])&&"users"===k.what&&k.left&&k.left.includes(this.viewId)&&(Ec.session&&console.log(this.id,"reflector reports that this view has left"),w=!1);w&&x&&(Ec.messages&&console.log(this.id,"rejoin: discarding ".concat(x," messages #").concat(v[1],"-#").concat(this.vm.seq)),o.splice(0,x))}if(w){if(this.sendBuffer.length>0){S=this.sendBuffer,this.sendBuffer=[],Ec.session&&console.log(this.id,"rejoin: sending ".concat(S.length," messages buffered while disconnected")),W=C(S);try{for(W.s();!(T=W.n()).done;)(0,T.value)()}catch(e){W.e(e)}finally{W.f()}}}else Ec.session&&console.log(this.id,"cannot rejoin seamlessly; rebooting model/view"),this.leave(!0),y=!1}Y=this.networkQueue,this.networkQueue=[],R=C(o),e.prev=28,R.s();case 30:if((P=R.n()).done){e.next=48;break}if("string"==typeof(V=P.value)[2]){e.next=36;break}this.convertReflectorMessage(V),e.next=44;break;case 36:e.prev=36,V[2]=this.decryptPayload(V[2])[0],e.next=44;break;case 40:return e.prev=40,e.t2=e.catch(36),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt message: ".concat(e.t2.message)),4200),e.abrupt("return");case 44:Ec.messages&&console.log(this.id,"received in SYNC "+JSON.stringify(V)),this.networkQueue.push(V);case 46:e.next=30;break;case 48:e.next=53;break;case 50:e.prev=50,e.t3=e.catch(28),R.e(e.t3);case 53:return e.prev=53,R.f(),e.finish(53);case 56:if((i=this.networkQueue).push.apply(i,L(Y)),c>this.reflectorTime&&this.timeFromReflector(c,"reflector"),!y){e.next=62;break}return Ec.session&&console.log(this.id,"seamless rejoin successful"),this.sessionSpec.sessionJoined(),e.abrupt("return");case 62:if(this.timeline=m||"",Ec.snapshot&&s&&console.log("".concat(this.id," fetching ").concat(p," ").concat(s)),!s){e.next=75;break}return e.prev=65,e.next=68,this.downloadEncrypted({url:s,gzip:!0,key:this.key,debug:Ec.snapshot,json:!0,what:p});case 68:K=e.sent,e.next=75;break;case 71:return e.prev=71,e.t4=e.catch(65),this.connection.closeConnectionWithError("SYNC",Error("failed to fetch ".concat(p,": ").concat(e.t4.message)),4200),e.abrupt("return");case 75:if(this.connected){e.next=78;break}return console.log(this.id,"disconnected during SYNC"),e.abrupt("return");case 78:return a?this.install(K):(K&&(this.sessionSpec.snapshot=K),this.install()),Ec.session&&console.log("".concat(this.id," fast-forwarding from ").concat(Math.round(this.vm.time))),e.next=82,new Promise((function(e){O.fastForwardHandler=function(t){O.connected&&O.vm?"error"===t?e(!1):t&&O.viewId in O.vm.views&&e(!0):(console.log(O.id,"disconnected during SYNC fast-forwarding"),e(!1))},Promise.resolve().then((function(){return O.stepSession("fastForward",{budget:Jc})}))}));case 82:return I=e.sent,delete this.fastForwardHandler,I&&Ec.session&&console.log("".concat(this.id," fast-forwarded to ").concat(Math.round(this.vm.time))),I&&this.sessionSpec.sessionJoined(),e.abrupt("return");case 87:if((M=n)[1]>>>=0,"string"==typeof M[2]){e.next=95;break}Ec.messages&&console.log(this.id,"received META "+JSON.stringify(M)),this.convertReflectorMessage(M),Ec.messages&&console.log(this.id,"converted to "+JSON.stringify(M)),e.next=106;break;case 95:e.prev=95,N=this.decryptPayload(M[2]),H=X(N,3),F=H[0],z=H[1],E=H[2],M[2]=F,z===this.viewId&&this.addToStatistics(E,this.lastReceived),Ec.messages&&console.log(this.id,"received "+JSON.stringify(M)),e.next=106;break;case 102:return e.prev=102,e.t5=e.catch(95),this.connection.closeConnectionWithError("RECV",Error("failed to decrypt message: ".concat(e.t5.message)),4200),e.abrupt("return");case 106:return this.networkQueue.push(M),this.flags.rawtime&&(_=M[M.length-1]),this.timeFromReflector(M[0],"reflector",_),this.simulateIfNeeded&&Promise.resolve().then((function(){return O.simulateIfNeeded()})),e.abrupt("return");case 111:if(this.vm){e.next=113;break}return e.abrupt("return");case 113:return j="number"==typeof n?n:n.time,Ec.ticks&&(J=r&&this.lastReceived-r-this.msPerTick*this.tickMultiplier|0,console.log(this.id,"Controller received TICK ".concat(j," ").concat(Math.abs(J)<5?"on time":J<0?"early":"late"," (").concat(J," ms)"))),this.timeFromReflector(j,"reflector"),this.tickMultiplier>1&&this.multiplyTick(j),this.simulateIfNeeded&&Promise.resolve().then((function(){return O.simulateIfNeeded()})),e.abrupt("return");case 119:return U=n.msg,Q=n.options,mt.showMessage(U,Q),e.abrupt("return");case 122:return Ec.snapshot&&console.log("received REQU (snapshot request) from reflector"),this.cpuTime=12345,e.abrupt("return");case 125:console.warn("Unknown action:",t,n);case 126:case"end":return e.stop()}}),e,this,[[10,15],[28,50,53,56],[36,40],[65,71],[95,102]])}))),function(e,t){return f.apply(this,arguments)})},{key:"install",value:function(e){var t=Date.now(),n=this.sessionSpec,r=n.snapshot,i=n.initFn,o=n.options,s=X(r.modelsById?["deserializ","snapshot"]:["initializ","root model"],2),a=s[0],c=s[1];Ec.session&&console.log("".concat(this.id," ").concat(a,"ing ").concat(c));var l=new Wl(r,(function(){try{return i(o,e)}catch(e){throw et("init",e,"fatal"),e}}));if((Ec.session||Ec.snapshot&&r.modelsById)&&console.log("".concat(this.id," ").concat(c," ").concat(a,"ed in ").concat(Date.now()-t,"ms")),Ec.initsnapshot&&!r.modelsById){Ec.snapshot&&console.log("".concat(this.id," exercising snapshot and restore after init()"));var u=null;try{u=JSON.stringify(l.snapshot())}catch(e){throw et("initial snapshot",e,"fatal"),e}try{l=new Wl(JSON.parse(u),(function(){return i(o)}))}catch(e){throw et("initial snapshot resume",e,"fatal"),e}}var d=this.lastKnownTime(l);this.reflectorTime=Math.max(this.reflectorTime,d),this.setVM(l)}},{key:"setVM",value:function(e){this.vm=e,this.vm.controller=this}},{key:"sendJoin",value:function(){var e=this;this.syncReceived=!1,delete this.fastForwardHandler,this.rejoinTimeout&&(clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0),Ec.session&&console.log(this.id,"Controller sending JOIN");var t=this.getTickAndMultiplier(),n=t.tick,r=t.delay,i=this.sessionSpec,o=i.name,s=i.codeHash,a=i.appId,c=i.apiKey,l=i.persistentId,u=i.developerId,d=i.heraldUrl,h=i.rejoinLimit,f=i.autoSleep,m=i.computedCodeHash,p=i.flags,y={name:o,apiKey:Fc(c).apiKey,appId:a,persistentId:l,url:mt.referrerURL(),sdk:Vc,developerId:u,version:1,user:this.viewId,ticks:{tick:n,delay:r},dormantDelay:f,tove:this.tove,codeHash:s};d&&Object.assign(y,{heraldUrl:d}),h&&Object.assign(y,{leaveDelay:h+250}),m!==s&&Object.assign(y,{computedCodeHash:m}),p&&Object.assign(y,{flags:p}),this.connection.send(JSON.stringify({id:this.id,action:"JOIN",args:y})),this.syncReceiptTimeout=setTimeout((function(){delete e.syncReceiptTimeout,e.syncReceived||e.connection.closeConnectionWithError("join",Error("SYNC not received in time"))}),5e3)}},{key:"clearSyncReceiptTimeout",value:function(){this.syncReceiptTimeout&&(clearTimeout(this.syncReceiptTimeout),delete this.syncReceiptTimeout)}},{key:"connectionInterrupted",value:function(){var e=this;this.syncReceived&&(this.shouldLeaveWhenDisconnected?this.leave():this.rejoinTimeout||(this.rejoinTimeout=setTimeout((function(){Ec.session&&console.log(e.id,"rejoin timed out"),e.rejoinTimeout=0,e.leave()}),this.sessionSpec.rejoinLimit)))}},{key:"leave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.sessionSpec.rebootModelView;if(this.reset(),Ec.session&&console.log(this.id,"resetting ".concat(e?"(but keeping)":"and discarding"," controller")),e||Bc.delete(this),!this.sessionSpec)throw Error("do not discard sessionSpec!");t()}},{key:"encrypt",value:(h=o(regeneratorRuntime.mark((function e(t){var n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B.random(16),r=So.encrypt(t,this.key,{iv:n}),i=Co(t,this.key),o="".concat(yo.stringify(n)).concat(yo.stringify(i)).concat(r),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"deprecatedDefaultKey",get:function(){return _c||(_c=wo("THIS SHOULDN'T BE IN LOGS","",{keySize:8})),_c}},{key:"decrypt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.key,n=yo.parse(e.slice(0,24)),r=yo.parse(e.slice(24,68)),i=e.slice(68),o=So.decrypt(i,t,{iv:n}),s="";try{s=vo.stringify(o)}catch(e){}var a=Co(s,this.key);if(this.compareHmacs(r.words,a.words))return s;if(t!==this.deprecatedDefaultKey)return this.decrypt(e,this.deprecatedDefaultKey);throw Error("Decryption error")}},{key:"decryptBinary",value:function(e,t){var n,r,i,o,s,a=(new TextDecoder).decode(new Uint8Array(e,0,4));switch("string"==typeof t&&(t=yo.parse(t)),a){case"CRQ0":n=(new TextDecoder).decode(e),r=yo.parse(n.slice(4,28)),i=yo.parse(n.slice(28,72)),o=n.slice(72),s=So.decrypt(o,t,{iv:r});break;case"CRQ1":n=new Uint8Array(e),r=B.create(n.subarray(4,20)),i=B.create(n.subarray(20,52)),o=B.create(n.subarray(52)),s=So.decrypt({ciphertext:o},t,{iv:r});break;default:throw Error("".concat(this.id," unknown encryption version ").concat(a))}s.clamp();var c=Co(s,t);if(this.compareHmacs(i.words,c.words))return ne(s);if(t!==this.deprecatedDefaultKey)return this.decryptBinary(e,this.deprecatedDefaultKey);throw Error("Decryption error")}},{key:"encryptMessage",value:(d=o(regeneratorRuntime.mark((function e(t,n,r){var i,o,s,a,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.asState(),o=X(i,3),s=o[0],a=o[1],c=o[2],e.next=3,this.encryptPayload([c,n,r]);case 3:return l=e.sent,e.abrupt("return",[s,a,l]);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return d.apply(this,arguments)})},{key:"encryptPayload",value:(u=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.encrypt(JSON.stringify(t)));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"decryptPayload",value:function(e){return JSON.parse(this.decrypt(e))}},{key:"compareHmacs",value:function(e,t){for(var n=e.length===t.length,r=0;r<e.length;r++)e[r]!==t[r]&&(n=!1);return n}},{key:"sendMessage",value:function(e){var t=this;if(!this.viewOnly&&this.vm){var n=e.asState()[2].length;if(n>16384)console.warn("".concat(this.id," Message with payload of ").concat(n," bytes exceeds maximum ").concat(16384," and will not be sent to reflector."));else{!this.payloadSizeWarned&&n>Qc&&(console.log("".concat(this.id," Message with payload of ").concat(n," bytes being sent to reflector. Maximum recommended is ").concat(Qc,".")),this.payloadSizeWarned=!0);var r=Date.now(),i=this.rateLimitedSendTimes,o=this.rateLimitBuffer;if(Ee.perSecondTally({requestedMessages:1}),o.length)this.addToRateLimitBuffer(e);else{var s=0;if(i.length&&this.synced){var a=i[i.length-1],c=1e3/this.eventRateLimit-(r-a);c>1&&(s=Math.ceil(c))}s?(this.addToRateLimitBuffer(e),setTimeout((function(){return t.serviceRateLimitBuffer()}),s)):(this.recordRateLimitedSend(r),this.socketSendMessage(e),Ee.perSecondTally({sentSingleMessages:1,sentMessagesTotal:1,sentPayloadTotal:n}))}}}}},{key:"recordRateLimitedSend",value:function(e){var t=this.rateLimitedSendTimes;!this.synced&&t.length&&t[t.length-1]===e||(t.push(e),t.length>this.eventHistoryLimit&&t.shift()),!this.rateLimitSoftWarned&&t.length===this.eventHistoryLimit&&e-t[0]<1010&&(console.warn("".concat(this.id," Sends to reflector are at or above recommended limit of ").concat(this.eventHistoryLimit," within one second. Events will be bundled as necessary to keep to the limit.")),this.rateLimitSoftWarned=!0)}},{key:"addToRateLimitBuffer",value:function(e){Ee.perSecondTally({bundledMessages:1});var t=Date.now(),n=e.asState(),r=n[2].length,i=this.rateLimitBuffer;if(i.length){var o=i[i.length-1],s=o.msgStates;if(o.totalPayload<Qc)return s.push({msgState:n,bufferTime:t}),void(o.totalPayload+=r)}Ee.perSecondTally({newBundles:1}),i.push({msgStates:[{msgState:n,bufferTime:t}],totalPayload:r});var a=i.length;Ec.session&&a%5==0&&a!==this.rateLimitLastLogged&&(console.log("".concat(this.id," SEND rate-limit buffer grew to ").concat(a," event bundles (max ").concat(this.eventMaxBundles,")")),this.rateLimitLastLogged=a),a>this.eventMaxBundles?(console.error("".concat(this.id," Disconnecting after overflow of SEND rate-limit buffer.")),this.connection.closeConnectionWithError("SEND",Error("Send rate exceeded"),4200)):!this.rateLimitBufferWarned&&a>this.eventMaxBundles/2&&(console.warn("".concat(this.id," SEND rate-limit buffer is 50% full. If send rate does not drop, the app will be disconnected.")),this.rateLimitBufferWarned=!0)}},{key:"serviceRateLimitBuffer",value:function(){var e=this;if(this.connected){var t=this.rateLimitBuffer;if(t.length){var n=Date.now(),r=1e3/this.eventRateLimit,i=this.rateLimitedSendTimes;if(i.length){var o=i[i.length-1];if(r-(n-o)>0)return}var s=t.shift(),a=s.msgStates,c=s.totalPayload,l=[],u=0;if(a.forEach((function(e){l.push(e.msgState),u+=n-e.bufferTime})),1===l.length){var d=Rl.fromState(l[0],this.vm);this.socketSendMessage(d)}else{var h=new Rl(this.vm.time,0,"_","handleBundledEvents",[l]);this.socketSendMessage(h)}if(this.recordRateLimitedSend(n),Ee.perSecondTally({sentBundles:1,sentMessagesTotal:a.length,sendDelay:u,sentBundlePayload:c,sentPayloadTotal:c}),Ec.session&&this.connected){var f=t.length;f&&f%5==0&&f!==this.rateLimitLastLogged&&(console.log("".concat(this.id," SEND rate-limit buffer dropped to ").concat(f," event bundles")),this.rateLimitLastLogged=f)}t.length&&setTimeout((function(){return e.serviceRateLimitBuffer()}),r)}}}},{key:"socketSendMessage",value:(l=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s=this,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:null,e.next=3,this.encryptMessage(t,this.viewId,Date.now());case 3:if(r=e.sent,i=n?"tagged SEND ".concat(t.asState()," with tags ").concat(JSON.stringify(n)):"SEND ".concat(t.asState()),this.connected){e.next=8;break}return this.vm&&(Ec.sends&&console.log(this.id,"buffering ".concat(i)),this.sendBuffer.push((function(){return s.socketSendMessage(t,n)}))),e.abrupt("return");case 8:Ec.sends&&console.log(this.id,"sending ".concat(i)),o={id:this.id,action:"SEND",args:[].concat(L(r),[this.latency])},n&&(o.tags=n),this.lastSent=Date.now(),this.connection.send(JSON.stringify(o));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"sendTagged",value:(a=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.viewOnly){e.next=2;break}return e.abrupt("return");case 2:this.socketSendMessage(t,n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"sendTutti",value:(i=o(regeneratorRuntime.mark((function e(t){var n,r,i,o,s,a,c,l,u,d,h,f,m,p,y=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.time,r=t.topic,i=t.data,o=t.localContext,s=void 0===o?null:o,a=t.firstMessage,c=void 0===a?null:a,l=t.wantsVote,u=void 0===l||l,d=t.tallyTarget,h=void 0===d?null:d,!this.viewOnly){e.next=3;break}return e.abrupt("return");case 3:if(e.t0=c,!e.t0){e.next=8;break}return e.next=7,this.encryptMessage(c,this.viewId,Date.now());case 7:e.t0=e.sent;case 8:if(f=e.t0,m=Q(i),this.connected){e.next=13;break}return this.vm&&(Ec.sends&&console.log(this.id,'buffering "'.concat(r,'" TUTTI ').concat(m," ").concat(c&&c.asState())),this.sendBuffer.push((function(){return y.sendTutti({time:n,topic:r,data:i,localContext:s,firstMessage:c,wantsVote:u,tallyTarget:h})}))),e.abrupt("return");case 13:Ec.sends&&console.log(this.id,'sending "'.concat(r,'" TUTTI ').concat(m," ").concat(c&&c.asState())),this.lastSent=Date.now(),p="".concat(r,"@").concat(n),this.connection.send(JSON.stringify({id:this.id,action:"TUTTI",args:[n,0,m,f,u,h,p]})),this.tuttiHistory.length>100&&this.tuttiHistory.shift(),this.tuttiHistory.push({time:n,tuttiKey:p,dummyTuttiSeq:0,payload:m,localContext:s});case 20:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"sendLog",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.connected?(Ec.sends&&console.log(this.id,"sending LOG"),n.length<2&&(n=n[0]),this.connection.send(JSON.stringify({action:"LOG",args:n}))):this.vm&&(Ec.sends&&console.log(this.id,"buffering LOG"),this.sendBuffer.push((function(){return e.sendLog.apply(e,L(n))})))}},{key:"addToStatistics",value:function(e,t){this.latency=t-e,this.latencyHistory&&(this.latencyHistory.length>=100&&this.latencyHistory.shift(),this.latencyHistory.push({time:t,ms:this.latency}))}},{key:"latencies",get:function(){return this.latencyHistory||(this.latencyHistory=[]),this.latencyHistory}},{key:"getTickAndMultiplier",value:function(){var e=this.sessionSpec.options,t=X(((["number","string"].includes(r(e.tps))?e.tps:["number","string"].includes(r(this.sessionSpec.tps))?this.sessionSpec.tps:20)+"x").split("x").map((function(e){return Number.parseFloat("0"+e)})),2),n=t[0],i=t[1],o=1e3/Math.max(1/30,Math.min(60,n)),s=Math.max(1,i),a=o,c=0;return s>1&&!jc&&(a=o/s,c=Math.ceil(a*(s-1))),{msPerTick:a,multiplier:s,tick:o,delay:c}}},{key:"simulate",value:function(e){var t=this;if(!this.vm)return!0;try{var n=!0;if(this.networkQueue.length+this.vm.messages.size===0)n=this.vm.advanceTo(this.reflectorTime,e);else{for(var r=Ee.begin("simulate");n;){var i=this.networkQueue[0];if(!i)break;if(!(n=this.vm.advanceTo(i[0],e)))break;this.networkQueue.shift();var o=this.vm.scheduleExternalMessage(i);n=this.vm.advanceTo(o.time,e),this.cpuTime+=5}n&&(n=this.vm.advanceTo(this.reflectorTime,e)),this.cpuTime+=Math.max(.01,Ee.end("simulate")-r)}Ee.backlog(this.backlog);var s=this.lag,a=Math.max(200,.1*this.msPerTick),c=Math.max(2e3,.2*this.msPerTick);if("boolean"==typeof this.synced&&this.viewed&&(this.synced&&s>c||!this.synced&&s<a))!this.synced?this.syncTimer||(this.syncTimer=setTimeout((function(){delete t.syncTimer,t.connected&&t.lag<a&&t.applySyncChange(!0)}),200)):this.applySyncChange(!1);return this.synced&&n&&this.cpuTime>5e3&&(this.triggeringCpuTime=this.cpuTime,this.cpuTime=0,this.isBeingAnimated()?setTimeout((function(){return t.scheduleSnapshot()}),Math.floor(2e3*Math.random())):this.scheduleSnapshot()),n}catch(e){return et("simulate",e),this.connection.closeConnectionWithError("simulate",e),"error"}}},{key:"stepSession",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ee.stepSession(t.frameTime,!0);n&&console.log(n);var r=this.backlog,i=this.latency,o=this.starvation,s=this.activity;if("animation"===e){Ee.animationFrame(t.frameTime,{backlog:r,starvation:o,latency:i,activity:s,users:this.users});var a=Date.now();if(this.lastAnimationEnd){var c=a-this.lastAnimationEnd;if(!0===this.animationGapCheck&&c>200&&(this.animationGapCheck=[],Ec.session&&console.log("".concat(this.id," animation has stopped (too long between steps)"))),!0!==this.animationGapCheck){var l=this.animationGapCheck;l.push(c),l.length>4&&l.shift(),4===l.length&&l.reduce((function(e,t){return e+t}),0)<=400&&(this.animationGapCheck=!0,Ec.session&&console.log("".concat(this.id," animation has started")))}}this.lastAnimationEnd=a}if(this.connected){if(this.vm){var u;switch(e){case"animation":var d=t.expectedSimFPS,h=Date.now(),f=Uc.reduce((function(e,t){return e+t}),0)/Uc.length;if(!1===(u=this.simulate(h+Math.min(f,Jc)))){var m=0===d?0:1e3/d*4;this.backlog>m&&(u=this.simulate(h+Jc-f))}"error"!==u&&(Uc.push(Date.now()-h),Uc.length>4&&Uc.shift());break;case"fastForward":case"background":u=this.simulate(Date.now()+t.budget);break;default:console.warn(e)}this.fastForwardHandler&&this.fastForwardHandler(u),"error"!==u&&(Ee.begin("update"),this.processModelViewEvents("animation"===e),Ee.end("update"),this.serviceRateLimitBuffer(),"animation"===e&&(t.view&&(Ee.begin("render"),this.inViewRealm((function(){return t.view.update(t.frameTime)})),Ee.end("render")),this.lastAnimationEnd=Date.now()))}}else this.isInBackground()||this.checkForConnection(!0)}},{key:"applySyncChange",value:function(e){Ec.session&&console.log(this.id,"synced=".concat(e)),this.synced=e,mt.showSyncWait(!e),this.vm.publishFromView(this.viewId,"synced",e)}},{key:"inViewRealm",value:function(e){var t=this;return Gt(this.vm,(function(){return e(t.vm)}))}},{key:"processModelViewEvents",value:function(e){return this.vm?this.vm.processModelViewEvents(e):0}},{key:"timeFromReflector",value:function(e,t,n){e<this.reflectorTime?("controller"!==t||Ec.ticks)&&console.warn("time is ".concat(this.reflectorTime,", ignoring time ").concat(e," from ").concat(t)):("boolean"!=typeof this.synced&&(this.synced=!1),this.reflectorTime=e,this.extrapolatedTimeBase=Date.now()-e,this.vm&&Ee.backlog(this.backlog),this.tickHook&&this.tickHook(e,n))}},{key:"multiplyTick",value:function(e){var t=this;this.localTicker&&globalThis.clearInterval(this.localTicker);var n=this.msPerTick,r=this.tickMultiplier,i=1;this.localTicker=globalThis.setInterval((function(){t.timeFromReflector(Math.round(e+i*n),"controller"),Ec.ticks&&console.log(t.id,"Controller generate TICK "+t.reflectorTime,i),++i>=r&&(globalThis.clearInterval(t.localTicker),t.localTicker=0)}),n)}},{key:"startStepping",value:function(e){var t=this;window.requestAnimationFrame((function n(r){t.leaving||(t.isOutOfSight()||e(r),window.requestAnimationFrame(n))}))}},{key:"setUpActivityChecks",value:function(){var e=this,t=null;if(this.isOutOfSight=function(){return!(Kc||"hidden"!==document.visibilityState&&t)},this.isBeingAnimated=function(){var t=!0===e.animationGapCheck,n=Date.now()-e.lastAnimationEnd<200;return t&&!n&&(e.animationGapCheck=[],Ec.session&&console.log("".concat(e.id," animation has stopped (too long since last step)"))),t&&n},this.isInBackground=function(){return e.isOutOfSight()||!e.isBeingAnimated()},!Kc){new IntersectionObserver((function(e,n){return t=e[0].isIntersecting})).observe(document.body)}var n,r=this.sessionSpec.autoSleep;if(r){var i=1e3*r,o=0,s=0;n=function(){var t=Date.now();t-o<980||(o=t,e.isOutOfSight()?s?t-s>i&&(e.dormantDisconnect(),s=0):s=t:s=0)}}var a=function(){e.leaving?c&&(clearInterval(c),c=null):e.connected&&e.vm&&(n&&n(),e.isBeingAnimated()||e.connection.keepAlive(Date.now()))},c=setInterval(a,1e3);this.simulateIfNeeded=function(){if(!e.isBeingAnimated()&&(a(),e.connected)){var t=.9*e.msPerTick;r&&(t=Math.min(t,Jc));var n=e.synced?"background":"fastForward";e.stepSession(n,{budget:t})}}}},{key:"toString",value:function(){return"Controller[".concat(this.id,"]")}},{key:e,value:function(){return this.toString()}}]),t}(Symbol.toPrimitive),el=function(){function e(t){s(this,e),this.controller=t,this.socketLastSent=0,this.connectBlocked=!1,this.connectRestricted=!1,this.connectHasBeenCalled=!1,this.reconnectDelay=0,this.missingTickThreshold=1/0}return c(e,[{key:"id",get:function(){return this.controller.id}},{key:"setTick",value:function(e){this.missingTickThreshold=Math.min(3*e,45e3)}},{key:"connected",get:function(){return!(!this.socket||this.socket.readyState!==WebSocket.OPEN)}},{key:"checkForConnection",value:function(e){this.socket||this.connectHasBeenCalled||this.connectBlocked||this.connectRestricted&&!e||this.connectToReflector()}},{key:"connectToReflector",value:function(){var e=this;if(!this.socket&&!this.connectHasBeenCalled){this.connectHasBeenCalled=!0,this.connectBlocked=!1,this.connectRestricted=!1;var t=Fc(this.controller.sessionSpec.apiKey).reflector,n={},r=this.controller.sessionSpec.token;if(r&&(n.token=r),F.reflector){var i=F.reflector.toUpperCase();"CF"===i||i.match(/^[A-Z]{3}$/)?(t=Ec.reflector?"wss://croquet.network/reflector/dev/":"wss://croquet.network/reflector/",3===i.length&&(n.colo=i)):F.reflector.match(/^[-a-z0-9]+$/i)?n.region=F.reflector:t=F.reflector}if(!t.match(/^wss?:/))throw Error("Cannot interpret reflector address "+t);t.endsWith("/")||(t+="/");for(var o=new URL(t+this.id),s=0,a=Object.entries(n);s<a.length;s++){var c=X(a[s],2),l=c[0],u=c[1];o.searchParams.append(l,u)}var d=new WebSocket(o);d.onopen=function(t){var n=e.socket;n&&(n.onopen=n.onmessage=n.onerror=n.onclose=null),e.socket=d,e.connectHasBeenCalled=!1,Ec.session&&console.log(e.id,e.socket.constructor.name,"connected to",e.socket.url),e.reconnectDelay=0,Ee.connected(!0),e.controller.sendJoin()},d.onmessage=function(t){d===e.socket&&e.receive(t.data)},d.onerror=function(t){Ec.session&&console.log(e.id,d.constructor.name,"connection error"),e.connectHasBeenCalled=!1,e.controller.clearSyncReceiptTimeout()},d.onclose=function(t){e.socketClosed(t.code,t.reason)}}}},{key:"socketClosed",value:function(e,t){var n=this;this.controller.clearSyncReceiptTimeout();var r=1e3!==e&&e<4100,i=4110===e;i||1e3===e||this.reconnectDelay||setTimeout((function(){n.connected||mt.showMessage("Connection closed: ".concat(e," ").concat(t),{level:r?"error":"fatal"})}),500),Ec.session&&console.log(this.id,"".concat(this.socket?this.socket.constructor.name+" closed":"closed before opening,"," with code: ").concat(e," ").concat(t)),Ee.connected(!1),i?this.connectRestricted=!0:this.connectBlocked=!0,this.disconnected(),r&&(Ec.session&&console.log(this.id,"reconnecting in ".concat(this.reconnectDelay," ms")),this.reconnectTimeout=globalThis.setTimeout((function(){delete n.reconnectTimeout,n.connectToReflector()}),this.reconnectDelay),this.reconnectDelay=Math.min(3e4,Math.round((this.reconnectDelay+100)*(1+Math.random()))))}},{key:"disconnected",value:function(){this.socket&&(this.socket=null,this.lastReceived=0,this.socketLastSent=0,this.stalledSince=0,this.connectHasBeenCalled=!1,this.controller.connectionInterrupted())}},{key:"send",value:function(e){this.socketLastSent=Date.now(),this.socket.send(e)}},{key:"receive",value:function(e){this.lastReceived=Date.now();var t=JSON.parse(e),n=t.id,r=t.action,i=t.args;if(n)try{this.controller.receive(r,i)}catch(e){this.closeConnectionWithError("receive",e)}else if("PONG"===r){if(Ec.pong&&console.log("PONG after",Date.now()-i,"ms"),this.pongHook)try{this.pongHook(i)}catch(e){console.error(e)}}else console.warn("Unknown action",r)}},{key:"dormantDisconnect",value:function(){this.connected&&(Ec.session&&console.log(this.id,"dormant; disconnecting from reflector"),this.closeConnection(4110,"Going dormant"))}},{key:"closeConnectionWithError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;console.error(t),console.warn("closing socket"),n>=4100&&4110!==n&&(this.controller.leaving=function(){}),this.closeConnection(n,"Error in "+e)}},{key:"closeConnection",value:function(e,t){this.socket&&(this.socket.onclose=null,this.socket.close(e,t),this.socketClosed(e,t))}},{key:"PULSE",value:function(e){this.connected&&(0===this.socket.bufferedAmount?(this.send(JSON.stringify({action:"PULSE"})),this.stalledSince=0):this.stalledSince&&e-this.stalledSince>500?console.log("".concat(this.id," Reflector connection stalled: ").concat(this.socket.bufferedAmount," bytes unsent for ").concat(e-this.stalledSince," ms")):this.stalledSince=Date.now())}},{key:"keepAlive",value:function(e){0!==this.lastReceived&&(e-this.socketLastSent>25e3?this.PULSE(e):e-this.lastReceived>5e4?this.closeConnectionWithError("connection",Error("Reflector has gone away")):e-this.lastReceived>this.missingTickThreshold&&this.PULSE(e))}},{key:"PING",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.connected&&this.send(JSON.stringify({action:"PING",args:e}))}}]),e}();globalThis.setInterval((function(){var e,t=C(Bc);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.connected&&n.vm&&n.connection.keepAlive(Date.now())}}catch(e){t.e(e)}finally{t.f()}}),100);var tl=Symbol("hash"),nl=Symbol("key"),rl=Symbol("url"),il=new Map;function ol(e){return F.has("debug",e,!1)}function sl(e){return e.replace(/.*\//,"")}function al(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cl(e){return e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+3&-4,"=")}function ll(e,t){return t.replace(/[\s\S]/g,(function(t){return String.fromCharCode(t.charCodeAt(0)^e.charCodeAt(0))}))}var ul=function(){function e(t,n,r){s(this,e);var i=il.get(t);if(i)return ol("data")&&console.log("Croquet.Data: using cached handle for ".concat(t)),i;if(r.slice(-43)!==t)throw Error("Croquet Data: malformed URL");Object.defineProperty(this,tl,{value:t}),Object.defineProperty(this,nl,{value:n}),Object.defineProperty(this,rl,{value:r}),il.set(t,this),ol("data")&&console.log("Croquet.Data: created new handle for ".concat(t))}var t,n;return c(e,null,[{key:"store",value:(n=o(regeneratorRuntime.mark((function t(n,i){var o,s,a,c,l,u,d,h,f,m=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=m.length>2&&void 0!==m[2]&&m[2],"object"===r(n)&&(console.warn("Deprecated: Croquet.Data.store(sessionId, data) called without sessionId"),i=n),!Wl.hasCurrent()){t.next=4;break}throw Error("Croquet.Data.store() called from Model code");case 4:return s=Ac(n),a=s.appId,c=s.persistentId,l=s.uploadEncrypted,u=B.random(32).toString(yo),d="apps/".concat(a,"/").concat(c,"/data/%HASH%"),t.next=9,l({path:d,content:i,key:u,keep:o,debug:ol("data"),what:"shared data"});case 9:return h=t.sent,f=sl(h),t.abrupt("return",new e(f,u,h));case 12:case"end":return t.stop()}}),t)}))),function(e,t){return n.apply(this,arguments)})},{key:"fetch",value:(t=o(regeneratorRuntime.mark((function e(t,n){var i,o,s,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===r(t)&&(console.warn("Deprecated: Croquet.Data.fetch(sessionId, handle) called without sessionId"),n=t),!Wl.hasCurrent()){e.next=3;break}throw Error("Croquet.Data.fetch() called from Model code");case 3:if(i=Ac(t),o=i.downloadEncrypted,s=n&&n[tl],a=n&&n[nl],c=n&&n[rl],"string"==typeof s&&"string"==typeof a&&"string"==typeof c){e.next=9;break}throw Error("Croquet.Data.fetch() called with invalid handle");case 9:return e.abrupt("return",o({url:c,key:a,debug:ol("data"),what:"shared data"}));case 10:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"hash",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64url";"function"==typeof e&&(e=Function.prototype.toString.call(e)),"string"==typeof e?e=(new TextEncoder).encode(e):e&&e.constructor===DataView?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e&&e.constructor===ArrayBuffer?e=new Uint8Array(e):ArrayBuffer.isView(e)||(e=(new TextEncoder).encode(Q(e)));var n=$(B.create(e));switch(t){case"hex":return n.toString();case"base64":return n.toString(yo);case"base64url":return al(n.toString(yo));default:throw Error('Croquet.Data: unknown hash output "'.concat(t,'", expected "hex"/"base64"/"base64url"'))}}},{key:"fromId",value:function(e){var t,n,r,i,o=e.slice(0,1);switch(o){case"0":t=e.slice(1,44),n=e.slice(44),r="".concat(zc,"/sessiondata/").concat(t);break;case"1":t=e.slice(1,44),n=e.slice(44,87)+"=",i=e.slice(87),r="".concat(zc,"/apps/").concat(i,"/data/").concat(t);break;case"2":t=e.slice(1,44),i=ll(n=cl(e.slice(44,87)),atob(cl(e.slice(87)))),r="".concat(zc,"/apps/").concat(i,"/data/").concat(t);break;case"3":t=(r=ll(n=cl(e.slice(1,44)),atob(cl(e.slice(44))))).slice(-43);break;default:throw Error("Croquet.Data expected handle v0-v".concat("3"," got v").concat(o))}return new this(t,n,r)}},{key:"toId",value:function(e){if(!e)return"";var t=e[tl],n=e[nl],r=e[rl];if(r.slice(-43)!==t)throw Error("Croquet Data: malformed URL");var i=al(n),o=al(btoa(ll(n,r)));return"".concat("3").concat(i).concat(o)}}]),e}(),dl={cls:ul,write:function(e){return ul.toId(e)},read:function(e){return ul.fromId(e)}},hl=null,fl=null;var ml=function(e){u(n,e);var t=v(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n)}(p(Error));function pl(){if(!globalThis.CroquetViewMath){globalThis.CroquetMath.random=function(){return hl.random()},globalThis.CroquetViewMath=n({},Math);for(var e=function(){var e=X(r[t],2),n=e[0],i=e[1],o=Math[n];Math[n]=1===i.length?function(e){return hl?i(e):o(e)}:function(e,t){return hl?i(e,t):o(e,t)}},t=0,r=Object.entries(globalThis.CroquetMath);t<r.length;t++)e()}if(!globalThis.CroquetViewDate){var i=function(e,t){return a||(a=!0,console.warn(new ml("".concat(e," used in Model code")))),t},o=function e(t,n,r,o,a,c,l){var u=this instanceof e,d=[t,n,r,o,a,c,l];if(d.length=arguments.length,hl)switch(i(u?"new Date()":"Date()"),arguments.length){case 0:d.push(hl.time);break;case 1:break;default:d[0]=s.UTC.apply(s,d),d.length=1}var h=m(s,d);return u?h:""+h},s=globalThis.Date,a=!1;o.prototype=s.prototype,o.UTC=s.UTC,o.now=function(){return hl?i("Date.now()",hl.time):s.now()},o.parse=function(){return hl?i("Date.parse()",0):s.parse.apply(s,arguments)},globalThis.CroquetViewDate=s,globalThis.Date=o}}Object.defineProperty(ml.prototype,"name",{value:"CroquetWarning"});var yl={};function bl(e,t){var n=JSON.parse(atob(e.slice(1,-1))),r=n.qPara,i=n.qArgs,o=n.qFn,s=JSON.stringify(r),a=yl[s]||(yl[s]=m(Function,L(r)));return"number"==typeof o&&(i[o]=a),a.call.apply(a,[t].concat(L(i))).bind(t)}function vl(e,t){if(hl)throw Error("VirtualMachine confusion");if(!(e instanceof Wl))throw Error("not a VM: "+e);var n=hl;try{hl=e,globalThis.CROQUETVM=e,t()}finally{hl=n}}for(var gl="#__vote",Zl="#reflected",Xl="#divergence",wl=["handleModelEventInModel","handleBundledEvents","publishFromModelOnly","handlePollForSnapshot","handleTuttiResult","handleTuttiDivergence","handleSnapshotVote","handlePersistVote","handleModelEventInView","noop"],Ll={},xl=0;xl<wl.length;xl++)Ll[wl[xl]]=xl;var Gl=new WeakMap;function kl(e){Gl.set(e,null)}var Sl=function(){function e(){s(this,e)}return c(e,[{key:"random",value:function(){throw Error("Math.random() cannot be used in Model.evaluate()")}}]),e}(),Wl=function(e){function t(e,n){var r=this;s(this,t),pl(),fl={snapshot:F.has("debug","snapshot",!1),session:F.has("debug","session",!1)},kl(this),vl(this,(function(){xt(r,(function(){if(r.modelsById={},r.modelsByName={},r.messages=new mo((function(e,t){return e.before(t)})),r.subscriptions={},r.views={},r._random=function(){throw Error("You must not use random when applying state!")},r.id=e.id,r.time=0,r.seq=4294967280,r.externalTime=0,r.externalSeq=r.seq,r.futureSeq=0,r.lastSnapshotPoll=0,r.lastPersistencePoll=0,r.inPersistenceCoolOff=!1,r.persisted="",r.modelsId=0,r.controller=null,e.modelsById){for(var t=Il.newOrRecycled(r).readVM(e,"_"),i=[],o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];a in r||"meta"===a?"messages"===a?i=t.messages:r[a]=t[a]:console.warn("Ignoring property snapshot.".concat(a))}var c,l=C(i);try{for(l.s();!(c=l.n()).done;){var u=c.value;r.messages.add(u.convertIfNeeded(r))}}catch(e){l.e(e)}finally{l.f()}}else r._random=new J(e.id,{state:!0}),n(r),r.addSubscription(r,"__VM__","__peers__",r.generateJoinExit)}))}))}return c(t,[{key:"registerModel",value:function(e,t){if(hl!==this)throw Error("You can only create models from model code!");return t||(t="M"+ ++this.modelsId),this.modelsById[t]=e,t}},{key:"deregisterModel",value:function(e){if(hl!==this)throw Error("You can only destroy models from model code!");var t=this.modelsById;delete this.modelsById[e];for(var n=0,r=Object.entries(this.modelsByName);n<r.length;n++){var i=X(r[n],2),o=i[0];t===i[1]&&delete this.modelsByName[o]}this.messages.removeMany((function(t){return t.hasReceiver(e)}))}},{key:"lookUpModel",value:function(e){if("_"===e)return this;var t=this.modelsById[e];if(t)return t;var n=X(e.match(/^([^#]+)#(.*)$/),3);n[0];var r=n[1],i=n[2];return this.modelsById[r].lookUp(i)}},{key:"get",value:function(e){return this.modelsByName[e]}},{key:"set",value:function(e,t){if(hl!==this)throw Error("You can only make a model well-known from model code!");this.modelsByName[e]=t}},{key:"noop",value:function(){}},{key:"generateJoinExit",value:function(e){var t=e.entered,n=e.exited,r=e.count;if(t.length===r){var i,o=C(n=Object.keys(this.views));try{for(o.s();!(i=o.n()).done;){var s=i.value;this.views[s].extraConnections=0}}catch(e){o.e(e)}finally{o.f()}}if(0!==t.length&&0!==n.length){var a=t.filter((function(e){return n.includes(e)}));if(0!==a.length&&(t=t.filter((function(e){return!a.includes(e)})),n=n.filter((function(e){return!a.includes(e)})),0===t.length&&0===n.length))return}var c,l=C(n);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(this.views[u]){if(this.views[u].extraConnections){this.views[u].extraConnections--,fl.session&&console.log("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(u," closed extra connection"));continue}delete this.views[u],this.publishFromModelOnly(this.id,"view-exit",u)}else console.error("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(u," exited without being present - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," ").concat(u," left without being present"))}}catch(e){l.e(e)}finally{l.f()}var d,h=C(t);try{for(h.s();!(d=h.n()).done;){var f=d.value;this.views[f]?(fl.session&&console.log("".concat(this.id," @").concat(this.time,"#").concat(this.seq," view ").concat(f," opened another connection")),this.views[f].extraConnections=(this.views[f].extraConnections||0)+1):(this.views[f]={},this.publishFromModelOnly(this.id,"view-join",f))}}catch(e){h.e(e)}finally{h.f()}var m=Object.values(this.views).reduce((function(e,t){return e+1+(t.extraConnections||0)}),0);r!==m&&(console.error("@".concat(this.time,"#").concat(this.seq," view count mismatch (model: ").concat(m,", reflector: ").concat(r,") - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," connections model: ").concat(m," reflector: ").concat(r)))}},{key:"scheduleExternalMessage",value:function(e){var t=Rl.fromState(e,this);if(t.time<this.time)throw Error("past message from reflector "+e);var n=this.externalSeq+1>>>0;if(t.seq!==n)throw Error("External message error. Expected message #".concat(n," got #").concat(t.seq));return this.externalTime=t.time,this.externalSeq=t.seq,t.seq=2*t.seq+1,this.verifyExternal(t),this.messages.add(t),t}},{key:"verifyExternal",value:function(e){if("_"!==e.receiver)throw Error("invalid receiver in external message: ".concat(e));if(!(e.selector in Ll))throw Error("unexpected external message: ".concat(e.selector))}},{key:"futureSend",value:function(e,t,n,r){if(e.every)return this.futureRepeat(e.every,t,n,r);if(e<0)throw Error("attempt to send future message into the past");this.futureSeq=this.futureSeq+1>>>0;var i=new Rl(this.time+e,2*this.futureSeq,t,n,r);return this.messages.add(i),i}},{key:"futureRepeat",value:function(e,t,n,r){this.futureSend(e,this.id,"futureExecAndRepeat",[e,t,n,r])}},{key:"futureExecAndRepeat",value:function(e,t,n,r){var i=this.lookUpModel(t);if("function"==typeof i[n])try{i[n].apply(i,L(r))}catch(e){et("future message ".concat(i,".").concat(n),e)}else{var o=bl(n,i);try{o.apply(void 0,L(r))}catch(e){et("future message ".concat(i," ").concat(o),e)}}this.futureRepeat(e,t,n,r)}},{key:"future",value:function(e,t,n,r){var i=this.asQFunc(e,n);if("string"==typeof i)return this.futureSend(t,e.id,i,r);var o=this;return new Proxy(e,{get:function(n,r){if("function"==typeof e[r])return function(){if(o.lookUpModel(e.id)!==e)throw Error("future send to unregistered model");for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return o.futureSend(t,e.id,r,i)};throw Error("Tried to call "+r+"() on future of "+Object.getPrototypeOf(e).constructor.name+" which is not a function")}})}},{key:"advanceTo",value:function(e,t){if(hl)throw Error("cannot advance time from model code");for(var n,r=0;(n=this.messages.peek())&&n.time<=e;){var i=n,o=i.time,s=i.seq;if(o<this.time)throw Error("past message encountered: "+n);if(1&s&&(this.seq=this.seq+1>>>0,s/2>>>0!==this.seq))throw Error("Sequence error: expected ".concat(this.seq," got ").concat(s/2>>>0," in ").concat(n));if(this.messages.poll(),this.time=n.time,n.executeOn(this),++r>100&&(r=0,Date.now()>t))return!1}return this.time=e,!0}},{key:"asQFunc",value:function(e,t){if("string"==typeof t)return t;if("function"==typeof t){if(e[t.name]===t)return t.name;for(var n=e;null!==n;){for(var r=0,i=Object.entries(Object.getOwnPropertyDescriptors(n));r<i.length;r++){var o=X(i[r],2),s=o[0];if(o[1].value===t)return s}n=Object.getPrototypeOf(n)}qe("subscription handler is not a method of ".concat(e,": ").concat(t,"\n"),{only:"once"});var a=t.toString().match(/^\(?([a-z][a-z0-9]*)?\)? *=> *this\.([a-z][a-z0-9]*) *\( *([a-z][a-z0-9]*)? *\) *$/i);return!a||a[3]&&a[3]!==a[1]?function(e,t){"function"==typeof e&&(t=e,e={});var n=Object.keys(e).concat(["return "+t]),r=Object.values(e),i={qPara:n,qArgs:r},o=r.indexOf(t);return o>=0&&(r[o]=n[o],i.qFn=o),"{".concat(btoa(JSON.stringify(i)),"}")}(t):a[2]}return null}},{key:"addSubscription",value:function(e,t,n,r){if(hl!==this)throw Error("Cannot add a model subscription from outside model code");var i=this.asQFunc(e,r);if("string"!=typeof i)throw Error('Subscription handler for "'.concat(n,'" must be a method name'));if(i.indexOf(".")<0&&"function"!=typeof e[i]&&"{"!==i[0])throw Error('Subscriber method for "'.concat(n,'" not found: ').concat(e,".").concat(i,"()"));var o=t+":"+n,s=(e===this?"_":e.id)+"."+i;if(this.subscriptions[o]){if(-1!==this.subscriptions[o].indexOf(s))throw Error("".concat(e,".").concat(i," already subscribed to ").concat(n))}else this.subscriptions[o]=[];this.subscriptions[o].push(s)}},{key:"removeSubscription",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";if(hl!==this)throw Error("Cannot remove a model subscription from outside model code");var i=t+":"+n,o=this.subscriptions[i];if(o)if("*"===r){var s=o.filter((function(t){return X(t.split("."),1)[0]!==e.id}));0===s.length?delete this.subscriptions[i]:this.subscriptions[i]=s}else{var a=this.asQFunc(e,r);if("string"!=typeof a)throw Error('Invalid unsubscribe args for "'.concat(n,'" in ').concat(e,": ").concat(r));var c=e.id+"."+a,l=o.indexOf(c);-1!==l&&(o.splice(l,1),0===o.length&&delete this.subscriptions[i])}}},{key:"removeAllSubscriptionsFor",value:function(e){for(var t="".concat(e.id,":"),n="".concat(e.id,"."),r=0,i=Object.entries(this.subscriptions);r<i.length;r++){var o=X(i[r],2),s=o[0],a=o[1];if(s.startsWith(t))delete this.subscriptions[s];else{for(var c=a.length-1;c>=0;c--)a[c].startsWith(n)&&a.splice(c,1);0===a.size&&delete this.subscriptions[s]}}}},{key:"publishFromModel",value:function(e,t,n){if(hl!==this)throw Error("Cannot publish a model event from outside model code");var r=t.endsWith(Zl);r&&(t=t.slice(0,t.length-Zl.length));var i=e+":"+t;this.handleModelEventInModel(i,n,r),this.handleModelEventInView(i,n)}},{key:"publishFromModelOnly",value:function(e,t,n){if(hl!==this)throw Error("Cannot publish a model event from outside model code");var r=e+":"+t;this.handleModelEventInModel(r,n)}},{key:"publishFromView",value:function(e,t,n){if(hl)throw Error("Cannot publish a view event from model code");var r=e+":"+t;this.handleViewEventInModel(r,n),this.handleViewEventInView(r,n)}},{key:"handleBundledEvents",value:function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=Rl.fromState(r,this);this.verifyExternal(i),i.executeOn(this,!0)}}catch(e){n.e(e)}finally{n.f()}}},{key:"handleModelEventInModel",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(hl!==this)throw Error("handleModelEventInModel called from outside model code");if(r){if(!0!==this.controller.synced)return;var i=e+gl,o=e+Xl,s=!!vt.subscriptions[i],a=!!this.subscriptions[e],c=!!this.subscriptions[o];s&&c&&console.log("divergence subscription for ".concat(e," overridden by vote subscription"));var l,u=a?new Rl(this.time,0,"_","handleModelEventInModel",[e,t]):null;l=s?["handleModelEventInView",i]:["handleTuttiDivergence",o],Promise.resolve().then((function(){return n.controller.sendTutti({time:n.time,topic:e,data:t,firstMessage:u,wantsVote:s,tallyTarget:l})}))}else if(this.subscriptions[e]){var d,h=C(this.subscriptions[e]);try{for(h.s();!(d=h.n()).done;){var f=d.value,m=f.split("."),p=w(m),y=p[0],b=p.slice(1),v=b.join("."),g=this.lookUpModel(y);if(g)if("{"!==v[0])if(v.indexOf(".")>=0){var Z=v.indexOf("."),X=v.slice(0,Z),L=v.slice(Z+1);try{g.call(X,L,t)}catch(t){et("event ".concat(e," ").concat(g,".call(").concat(JSON.stringify(X),", ").concat(JSON.stringify(L),")"),t)}}else if("function"==typeof g[v])try{g[v](t)}catch(t){et("event ".concat(e," ").concat(g,".").concat(v,"()"),t)}else et("event ".concat(e," ").concat(g,".").concat(v,"(): method not found"));else{var x=bl(v,g);try{x(t)}catch(t){et("event ".concat(e," ").concat(g," ").concat(x),t)}}else qe("event ".concat(e," .").concat(v,"(): subscriber not found"))}}catch(e){h.e(e)}finally{h.f()}}}},{key:"handleViewEventInModel",value:function(e,t){if(this.subscriptions[e]){var n=[e];void 0!==t&&n.push(t);var r=new Rl(this.time,0,"_","handleModelEventInModel",n);this.controller.sendMessage(r)}}},{key:"handleModelEventInView",value:function(e,t){var n=this;vt.handleEvent(e,t,(function(e){return function(e){if(!hl)throw Error("VirtualMachine confusion");var t=hl;try{hl=null,e()}finally{hl=t}}((function(){return Gt(n,e,!0)}))}))}},{key:"handleViewEventInView",value:function(e,t){vt.handleEvent(e,t)}},{key:"handleTuttiDivergence",value:function(e,t){if(this.subscriptions[e])this.handleModelEventInModel(e,t);else{var n=e.split(":").slice(-1)[0];console.warn("uncaptured divergence in ".concat(n,":"),t)}}},{key:"processModelViewEvents",value:function(e){var t=this;if(hl)throw Error("cannot process view events in model code");return Gt(this,(function(){return vt.processFrameEvents(e,!!t.controller.synced)}))}},{key:"handlePollForSnapshot",value:function(){var e=this.time,t=e-this.lastSnapshotPoll;t<5e3?console.log("rejecting snapshot poll ".concat(t,"ms after previous")):(this.lastSnapshotPoll=e,this.controller.handlePollForSnapshot(e))}},{key:"handleTuttiResult",value:function(e){this.controller.handleTuttiResult(e)}},{key:"handleSnapshotVote",value:function(e){this.controller.handleSnapshotVote(e)}},{key:"handlePersistVote",value:function(e){this.controller.handlePersistVote(e)}},{key:"snapshot",value:function(){return Kl.newOrRecycled(this).snapshot(this,"_")}},{key:"getSummaryHash",value:function(){return Q((new Vl).getHash(this))}},{key:"persist",value:function(e,t){var n=Ee.begin("snapshot"),i="function"==typeof t?t.call(e):t;if("object"!==r(i))throw Error("Croquet: persistSession() can only persist objects (got ".concat(r(i),")"));var o,s,a=Q(i),c=ul.hash(a),l=Ee.end("snapshot")-n,u=this.persisted===c,d=this.time;if(fl.snapshot&&console.log("".concat(this.id," persistent data @").concat(d," collected, stringified and hashed in ").concat(Math.ceil(l),"ms").concat(u?" (unchanged, ignoring)":"")),!u)if(o=this,s={persistTime:d,persistentString:a,persistentHash:c,ms:l},Gl.set(o,s),this.persisted=c,this.inPersistenceCoolOff)fl.snapshot&&console.log("".concat(this.id," persistence poll postponed by cooloff"));else{var h=this.lastPersistencePoll?this.lastPersistencePoll+25e3-this.time:0;h>0?(fl.snapshot&&console.log("".concat(this.id," postponing persistence poll by ").concat(h,"ms")),this.futureSend(h,this.id,"triggerPersistencePoll",[]),this.inPersistenceCoolOff=!0):this.triggerPersistencePoll()}}},{key:"triggerPersistencePoll",value:function(){var e=this;this.inPersistenceCoolOff=!1,this.lastPersistencePoll=this.controller?this.time:0;var t,n=(t=this,Gl.get(t));if(n){var r=n.persistTime,i=n.persistentString,o=n.persistentHash,s=n.ms;if(kl(this),this.controller&&this.controller.synced){fl.snapshot&&console.log("".concat(this.id," asking controller to poll for persistence @").concat(r));var a=this.time;Promise.resolve().then((function(){return e.controller.pollForPersist(a,r,i,o,s)}))}}}},{key:"random",value:function(){if(hl!==this)throw Error("replicated random accessed from outside the model");return this._random()}},{key:"randomID",value:function(){if(hl!==this)throw Error("replicated random accessed from outside the model");for(var e="",t=0;t<4;t++)e+=(this._random.int32()>>>0).toString(16).padStart(8,"0");return e}},{key:"toString",value:function(){return"VirtualMachine[".concat(this.id,"]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}}],[{key:"current",value:function(){return hl||console.warn("VirtualMachine.current() called from outside the vm!"),hl}},{key:"hasCurrent",value:function(){return!!hl}},{key:"evaluate",value:function(e){if(hl)return e();pl();var t=hl;try{return hl=new Sl,e()}finally{hl=t}}}]),t}();function Cl(e,t,n){var r;if("_"===e){var i=Ll[t];"number"==typeof i&&(r=i.toString(36))}if(void 0===r&&(r="".concat(e,">").concat(t)),n.length>0){var o=Ml.newOrRecycled();r+=JSON.stringify(o.encode(n))}return r}function Tl(e,t){var n,r,i;if(1===e.length||"["===e[1]){var o=parseInt(e[0],36);n="_",r=wl[o],i=e.slice(1)}else{var s=e.indexOf(">"),a=e.indexOf("[");-1===a&&(a=e.length),n=e.slice(0,s),r=e.slice(s+1,a),i=e.slice(a)}var c=[];i&&(c=Nl.newOrRecycled(t).decode(JSON.parse(i)));return{receiver:n,selector:r,args:c}}function Yl(e,t){return(t-e|0)>=0}var Rl=function(e){function t(e,n,r,i,o){s(this,t),this.time=e,this.seq=n,this.receiver=r,this.selector=i,this.args=o}return c(t,[{key:"convertIfNeeded",value:function(e){if(this.payload){var t=Tl(this.payload,e),n=t.receiver,r=t.selector,i=t.args;delete this.payload,this.receiver=n,this.selector=r,this.args=i}return this}},{key:"before",value:function(e){return this.time!==e.time?this.time<e.time:this.isExternal()!==e.isExternal()?e.isExternal():this.isExternal()?Yl(this.externalSeq,e.externalSeq):Yl(this.internalSeq,e.internalSeq)}},{key:"hasReceiver",value:function(e){return this.receiver===e}},{key:"isExternal",value:function(){return 1&this.seq}},{key:"externalSeq",get:function(){return this.seq/2>>>0},set:function(e){this.seq=2*e+1}},{key:"internalSeq",get:function(){return this.seq/2>>>0},set:function(e){this.seq=2*e}},{key:"asState",value:function(){return[this.time,this.seq,Cl(this.receiver,this.selector,this.args)]}},{key:"executeOn",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n?function(e){return e()}:function(t){return vl(e,(function(){return xt(e,t)}))},i=this.receiver,o=this.selector,s=this.args,a=e.lookUpModel(i);if(a)if("{"===o[0]){var c=bl(o,a);r((function(){try{c.apply(void 0,L(s))}catch(e){et("".concat(t.shortString()," ").concat(c),e)}}))}else o.indexOf(".")>=0?r((function(){var e=o.indexOf("."),n=o.slice(0,e),r=o.slice(e+1);try{a.call.apply(a,[n,r].concat(L(s)))}catch(e){et("".concat(t.shortString()," ").concat(a,".call(").concat(JSON.stringify(n),", ").concat(JSON.stringify(r),")"),e)}})):"function"!=typeof a[o]?qe("".concat(this.shortString()," ").concat(a,".").concat(o,"(): method not found")):r((function(){try{a[o].apply(a,L(s))}catch(e){et("".concat(t.shortString()," ").concat(a,".").concat(o,"()"),e)}}));else qe("".concat(this.shortString()," ").concat(o,"(): receiver not found"))}},{key:"shortString",value:function(){return"".concat(this.isExternal()?"External":"Future","Message")}},{key:"toString",value:function(){var e=this.receiver,t=this.selector,n=this.args,r=this.isExternal(),i=r?this.externalSeq:this.internalSeq;return"".concat(r?"External":"Future","Message[").concat(this.time).concat(":#"[+r]).concat(i," ").concat(e,".").concat(t,"(").concat(n.map(JSON.stringify).join(", "),")]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}}],[{key:"fromState",value:function(e,n){var r=X(e,3),i=r[0],o=r[1],s=Tl(r[2],n);return new t(i,o,s.receiver,s.selector,s.args)}}]),t}(),Pl=function(){var e=new ArrayBuffer(8),t=new DataView(e);return function(e){return t.setFloat64(0,e,!0),t.getInt32(0,!0)+t.getInt32(4,!0)}}(),Vl=function(){function e(){s(this,e),this.refs=new Map,this.todo=[],this.hashers=new Map,this.addHasher("Teatime:Message",Rl),this.addHasher("Teatime:Data",dl);var t,n=C(jl.allClassTypes());try{for(n.s();!(t=n.n()).done;){var r=X(t.value,2),i=r[0],o=r[1];this.addHasher(i,o)}}catch(e){n.e(e)}finally{n.f()}}return c(e,[{key:"addHasher",value:function(e,t){var r=this,i=Object.getPrototypeOf(t)===Object.prototype?t:{cls:t,write:function(e){return n({},e)}},o=i.cls,s=i.write;this.hashers.set(o,(function(e){return r.hashStructure(e,s(e))}))}},{key:"getHash",value:function(e){this.hashState={oC:0,mC:0,nanC:0,infC:0,zC:0,nC:0,nH:0,sC:0,sL:0,fC:0};for(var t=0,n=Object.entries(e);t<n.length;t++){var r=X(n[t],2),i=r[0],o=r[1];if("controller"!==i&&"meta"!==i)if("_random"===i)this.hash(o.state(),!1);else if("messages"===i){var s=o.asArray();(this.hashState.fC=s.length)&&this.hash(s,!1)}else this.hashEntry(i,o)}return this.hashDeferred(),this.hashState}},{key:"hashDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.key,n=e.value;this.hashEntry(t,n,!1)}}},{key:"hash",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(r(e)){case"number":return void(Number.isNaN(e)?this.hashState.nanC++:Number.isFinite(e)?0===e?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=Pl(e)):this.hashState.infC++);case"string":return this.hashState.sC++,void(this.hashState.sL+=e.length);case"boolean":case"undefined":return;default:if(this.refs.has(e))return;var n=Object.prototype.toString.call(e).slice(8,-1);switch(n){case"Array":return void this.hashArray(e,t);case"ArrayBuffer":return void this.hashArray(new Uint8Array(e),!1);case"Set":case"Map":return void this.hashStructure(e,L(e));case"DataView":return void this.hashArray(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),!1);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return void this.hashArray(e,!1);case"Object":if(e instanceof jl)this.hashModel(e);else if(e.constructor===Object)this.hashObject(e,t);else{var i=this.hashers.get(e.constructor);i&&i(e)}}}}},{key:"hashModel",value:function(e){this.hashState.mC++,this.refs.set(e,!0);for(var t=0,n=Object.entries(e);t<n.length;t++){var r=X(n[t],2),i=r[0],o=r[1];"__realm"!==i&&(void 0!==o&&this.hashEntry(i,o))}}},{key:"hashObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.hashState.oC++,this.refs.set(e,!0);for(var n=0,r=Object.entries(e);n<r.length;n++){var i=X(r[n],2),o=i[0],s=i[1];void 0!==s&&this.hashEntry(o,s,t)}}},{key:"hashArray",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.refs.set(e,!0);for(var n=0;n<e.length;n++)this.hashEntry(n,e[n],t)}},{key:"hashStructure",value:function(e,t){void 0!==t&&(this.refs.set(e,!0),this.hash(t,!1))}},{key:"hashEntry",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"$"!==e[0]&&(n&&"object"===r(t)?this.todo.push({key:e,value:t}):this.hash(t))}}]),e}(),Kl=function(){function e(t){s(this,e),this.vm=t,this.nextRef=1,this.refs=new Map,this.todo=[],this.writers=new Map,this.addWriter("Teatime:Message",Rl),this.addWriter("Teatime:Data",dl);var n,r=C(jl.allClassTypes());try{for(r.s();!(n=r.n()).done;){var i=X(n.value,2),o=i[0],a=i[1];this.addWriter(o,a)}}catch(e){r.e(e)}finally{r.f()}this.okayToIgnore={};var c,l=C(jl.allClasses());try{for(l.s();!(c=l.n()).done;){var u=c.value;if(Object.prototype.hasOwnProperty.call(u,"okayToIgnore")){var d=u.okayToIgnore();if(!Array.isArray(d))throw new Error("okayToIgnore() must return an array");var h,f=C(d);try{for(f.s();!(h=f.n()).done;){var m=h.value;if("$"!==m[0])throw Error('okayToIgnore: ignored prop "'.concat(m,"\" must start with '$'"));this.okayToIgnore[m]=!0}}catch(e){f.e(e)}finally{f.f()}}}}catch(e){l.e(e)}finally{l.f()}}return c(e,[{key:"addWriter",value:function(e,t){var r=this,i=Object.getPrototypeOf(t)===Object.prototype?t:{cls:t,write:function(e){return n({},e)}},o=i.cls,s=i.write;this.writers.set(o,(function(t,n){return r.writeAs(e,t,s(t),n)}))}},{key:"snapshot",value:function(e){for(var t={_random:e._random.state(),messages:this.write(e.messages.asArray())},n=0,r=Object.entries(e);n<r.length;n++){var i=X(r[n],2),o=i[0],s=i[1];"controller"!==o&&(t[o]||this.writeInto(t,o,s,"_"))}return this.writeDeferred(),t}},{key:"writeDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.state,n=e.key,r=e.value,i=e.path;this.writeInto(t,n,r,i,!1)}}},{key:"write",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(r(e)){case"number":return Object.is(e,-0)?{$class:"NegZero"}:Number.isSafeInteger(e)?e:Number.isNaN(e)?{$class:"NaN"}:Number.isFinite(e)?this.writeFloat(e):{$class:"Infinity",$value:Math.sign(e)};case"string":case"boolean":return e;case"undefined":return{$class:"Undefined"};default:if(this.refs.has(e))return this.writeRef(e);var i=Object.prototype.toString.call(e).slice(8,-1);switch(i){case"Array":return this.writeArray(e,t,n);case"ArrayBuffer":return this.writeArrayBuffer(e);case"Set":return this.writeAs(i,e,L(e),t);case"Map":return this.writeAs(i,e,L(e).flat(),t);case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return this.writeTypedArray(i,e);case"Object":if(e instanceof jl)return this.writeModel(e,t);if(e.constructor===Object||"function"!=typeof e.constructor)return this.writeObject(e,t,n);var o=this.writers.get(e.constructor);if(o)return o(e,t);throw console.error("Croquet Snapshot: unknown class ".concat(t,":"),e),Error("Croquet Snapshot: class not registered in Model.types(): ".concat(e.constructor.name));case"Null":return e;default:throw console.error("Croquet Snapshot: unsupported property ".concat(t,":"),e),Error("Croquet Snapshot: ".concat(i,"s are not supported as model properties"))}}}},{key:"writeModel",value:function(e,t){var n={};this.refs.set(e,n);try{n.$model=jl.classToID(e.constructor)}catch(n){throw console.error("unregistered model class at ".concat(t,":"),e),n}var r,i=C(Object.keys(e).sort());try{for(i.s();!(r=i.n()).done;){var o=r.value;if("__realm"!==o){var s=e[o];this.writeInto(n,o,s,t)}}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"writeObject",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r={};this.refs.set(e,r);var i,o=C(Object.keys(e).sort());try{for(o.s();!(i=o.n()).done;){var s=i.value,a=e[s];this.writeInto(r,s,a,t,n)}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"writeArray",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];this.refs.set(e,r);for(var i=0;i<e.length;i++)this.writeInto(r,i,e[i],t,n);return r}},{key:"writeArrayBuffer",value:function(e){var t={$class:"ArrayBuffer",$value:Fl(e)};return this.refs.set(e,t),t}},{key:"writeTypedArray",value:function(e,t){var n={$class:e,$value:[this.writeArrayBuffer(t.buffer),t.byteOffset,"DataView"===e?t.byteLength:t.length]};return this.refs.set(t,n),n}},{key:"writeFloat",value:function(e){return e}},{key:"writeAs",value:function(e,t,n,i){if(void 0===n)return n;var o={$class:e};this.refs.set(t,o);var s=this.write(n,i,!1);return"object"!==r(s)||s.$class||Array.isArray(s)?o.$value=s:Object.assign(o,s),o}},{key:"writeRef",value:function(e){var t=this.refs.get(e);if("object"!==r(t))throw Error("Non-object in refs: "+e);return Array.isArray(t)&&(t.toJSON=function(){return{$id:this.$id,$class:"Array",$value:L(this)}}),{$ref:t.$id||(t.$id=this.nextRef++)}}},{key:"writeInto",value:function(e,t,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("$"!==t[0])if(o&&"object"===r(n))this.todo.push({state:e,key:t,value:n,path:i});else{var s="string"==typeof t&&t.match(/^[_a-z][_a-z0-9]*$/i),a=i+(s?".".concat(t):"[".concat(JSON.stringify(t),"]")),c=this.write(n,a);void 0!==c&&(e[t]=c)}else this.okayToIgnore[t]||(qe("snapshot: ignoring property ".concat(t," (declare as okayToIgnore to suppress warning)"),{only:"once"}),this.okayToIgnore[t]=!0)}}],[{key:"newOrRecycled",value:function(e){var t=this.reusableInstance;return t?(t.vm=e,t.nextRef=1,t.refs=new Map,t.todo=[]):t=this.reusableInstance=new this(e),t}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(e){this[this.name+"-instance"]=e}},{key:"resetInstance",value:function(){this.reusableInstance=null}}]),e}(),Il=function(){function e(t){s(this,e),this.vm=t,this.refs=new Map,this.todo=[],this.unresolved=[],this.readers=new Map,this.addReader("Teatime:Message",Rl),this.addReader("Teatime:Data",dl),this.readers.set("Undefined",(function(){})),this.readers.set("NaN",(function(){return NaN})),this.readers.set("Infinity",(function(e){return e*(1/0)})),this.readers.set("NegZero",(function(){return-0})),this.readers.set("ArrayBuffer",(function(e){return function(e){for(var t=globalThis.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}(e)})),this.readers.set("DataView",(function(e){return m(DataView,L(e))})),this.readers.set("Int8Array",(function(e){return m(Int8Array,L(e))})),this.readers.set("Uint8Array",(function(e){return m(Uint8Array,L(e))})),this.readers.set("Uint8ClampedArray",(function(e){return m(Uint8ClampedArray,L(e))})),this.readers.set("Int16Array",(function(e){return m(Int16Array,L(e))})),this.readers.set("Uint16Array",(function(e){return m(Uint16Array,L(e))})),this.readers.set("Int32Array",(function(e){return m(Int32Array,L(e))})),this.readers.set("Uint32Array",(function(e){return m(Uint32Array,L(e))})),this.readers.set("Float32Array",(function(e){return m(Float32Array,L(e))})),this.readers.set("Float64Array",(function(e){return m(Float64Array,L(e))}));var n,r=C(jl.allClassTypes());try{for(r.s();!(n=r.n()).done;){var i=X(n.value,2),o=i[0],a=i[1];this.addReader(o,a)}}catch(e){r.e(e)}finally{r.f()}}return c(e,[{key:"addReader",value:function(e,t){var n="object"===r(t)?t.read:function(e){return Object.assign(Object.create(t.prototype),e)};this.readers.set(e,n)}},{key:"readVM",value:function(e,t){if("_"!==t)throw Error("VirtualMachine must be root object");for(var n={_random:new J(null,{state:e._random})},r=0,i=Object.entries(e);r<i.length;r++){var o=X(i[r],2),s=o[0],a=o[1];n[s]||this.readInto(n,s,a,t)}return this.readDeferred(),this.resolveRefs(),n}},{key:"readDeferred",value:function(){for(;this.todo.length>0;){var e=this.todo.shift(),t=e.object,n=e.key,r=e.value,i=e.path;this.readInto(t,n,r,i,!1)}}},{key:"resolveRefs",value:function(){var e,t=C(this.unresolved);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.object,i=n.key,o=n.ref,s=n.path;if(!this.refs.has(o))throw Error("Unresolved ref: ".concat(o," at ").concat(s,"[").concat(JSON.stringify(i),"]"));r[i]=this.refs.get(o)}}catch(e){t.e(e)}finally{t.f()}}},{key:"read",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(r(e)){case"number":case"string":case"boolean":return e;default:var i=Object.prototype.toString.call(e).slice(8,-1);switch(i){case"Array":return this.readArray(e,t,n);case"Null":return null;case"Object":var o=e.$class,s=e.$model,a=e.$ref;if(a)throw Error("refs should have been handled in readInto()");return s?this.readModel(e,t):o?this.readAs(o,e,t):this.readObject(Object,e,t,n);default:throw Error("Don't know how to deserialize ".concat(i," at ").concat(t))}}}},{key:"readModel",value:function(e,t){var n=jl.instantiateClassID(e.$model,e.id);e.$id&&this.refs.set(e.$id,n);for(var r=0,i=Object.entries(e);r<i.length;r++){var o=X(i[r],2),s=o[0],a=o[1];"id"!==s&&"$"!==s[0]&&this.readInto(n,s,a,t)}return n}},{key:"readObject",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new e;t.$id&&this.refs.set(t.$id,i);for(var o=0,s=Object.entries(t);o<s.length;o++){var a=X(s[o],2),c=a[0],l=a[1];"$"!==c[0]&&this.readInto(i,c,l,n,r)}return i}},{key:"readArray",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];e.$id&&this.refs.set(e.$id,r);for(var i=0;i<e.length;i++)void 0!==e[i]&&this.readInto(r,i,e[i],t,n);return r}},{key:"readAsArray",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.$value;return e.$id&&(r.$id=e.$id),this.readArray(r,t,n)}},{key:"readAsSet",value:function(e,t){var n=new Set;e.$id&&this.refs.set(e.$id,n);var r,i=C(this.read(e.$value,t,!1));try{for(i.s();!(r=i.n()).done;){var o=r.value;n.add(o)}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"readAsMap",value:function(e,t){var n=new Map;e.$id&&this.refs.set(e.$id,n);for(var r=this.read(e.$value,t,!1),i=0;i<r.length;i+=2)n.set(r[i],r[i+1]);return n}},{key:"readAsClass",value:function(e,t,n){var r={},i=new Map;if("$value"in t)r=this.read(t.$value,n,!1);else for(var o=0,s=Object.entries(t);o<s.length;o++){var a=X(s[o],2),c=a[0],l=a[1];if("$"!==c[0]){var u=l&&l.$ref;u?this.refs.has(u)?r[c]=this.refs.get(u):(r[c]="<unresolved>",i.set(u,c)):this.readInto(r,c,l,n,!1)}}var d=this.readers.get(e)(r,n);d||"Undefined"===e||"NaN"===e||"NegZero"===e||console.warn('Reading "'.concat(e,'" returned ').concat(d," at ").concat(n)),t.$id&&this.refs.set(t.$id,d);var h,f=C(i.entries());try{for(f.s();!(h=f.n()).done;){var m=X(h.value,2),p=m[0],y=m[1];this.unresolved.push({object:d,key:y,ref:p,path:n})}}catch(e){f.e(e)}finally{f.f()}return d}},{key:"readAs",value:function(e,t,n){switch(e){case"Array":return this.readAsArray(t,n);case"Set":return this.readAsSet(t,n);case"Map":return this.readAsMap(t,n);default:return this.readAsClass(e,t,n)}}},{key:"readRef",value:function(e,t,n,r){if(!n||!n.$ref)return!1;var i=n.$ref;return this.refs.has(i)?e[t]=this.refs.get(i):(e[t]="<unresolved>",this.unresolved.push({object:e,key:t,ref:i,path:r})),!0}},{key:"readInto",value:function(e,t,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!this.readRef(e,t,n,i))if(o&&"object"===r(n))this.todo.push({object:e,key:t,value:n,path:i});else{var s="string"==typeof t&&t.match(/^[_a-z][_a-z0-9]*$/i),a=i+(s?".".concat(t):"[".concat(JSON.stringify(t),"]"));e[t]=this.read(n,a)}}}],[{key:"newOrRecycled",value:function(e){var t=this.reusableInstance;return t?(t.vm=e,t.refs=new Map,t.todo=[],t.unresolved=[]):t=this.reusableInstance=new this(e),t}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(e){this[this.name+"-instance"]=e}},{key:"resetInstance",value:function(){this.reusableInstance=null}}]),e}(),Ml=function(e){u(n,e);var t=v(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"encode",value:function(e){var t=this.writeArray(e,"$");return this.writeDeferred(),t}},{key:"writeModel",value:function(e){return{$ref:e.id}}}]),n}(Kl),Nl=function(e){u(n,e);var t=v(n);function n(){return s(this,n),t.apply(this,arguments)}return c(n,[{key:"decode",value:function(e){var t=this.readArray(e,"$");return this.readDeferred(),this.resolveRefs(),t}},{key:"resolveRefs",value:function(){var e,t=C(this.unresolved);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.object,i=n.key,o=n.ref,s=n.path;if(this.refs.has(o))r[i]=this.refs.get(o);else{var a=this.vm.lookUpModel(o);if(!a)throw Error("Unresolved ref: ".concat(o," at ").concat(s,"[").concat(JSON.stringify(i),"]"));r[i]=a}}}catch(e){t.e(e)}finally{t.f()}}}]),n}(Il);function Hl(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,o=Object.values(e).filter((function(e){var t=Object.prototype.toString.call(e).slice(8,-1);return("Object"===t||"Array"===t)&&!i.has(e)})),s=C(o);try{for(s.s();!(t=s.n()).done;){var a=t.value;i.add(a);var c=n+"."+a.constructor.name;if(r[c]){if(r[c]!==a.constructor)throw new Error("Class with name "+c+" already gathered, but new one has different identity")}else r[c]=a.constructor}}catch(e){s.e(e)}finally{s.f()}var l,u=C(o);try{for(u.s();!(l=u.n()).done;){var d=l.value;Hl(d,n,r,i)}}catch(e){u.e(e)}finally{u.f()}}function Fl(e){for(var t=new Uint8Array(e),n=t.byteLength,r="",i=0;i<n;i++)r+=String.fromCharCode(t[i]);return globalThis.btoa(r)}var zl=F.has("debug","classes",!1),El=Symbol("SECRET"),_l=new WeakSet,jl=function(e){function t(e){if(s(this,t),e!==El)throw Error("You must create ".concat(this,' using create() not "new"!'))}return c(t,[{key:"init",value:function(e){_l.delete(this)}},{key:"destroy",value:function(){Lt().unsubscribeAll(this),Lt().deregister(this)}},{key:"publish",value:function(e,t,n){this.__realm||this.__realmError(),this.__realm.publish(t,n,e)}},{key:"subscribe",value:function(e,t,n){return this.__realm||this.__realmError(),this.__realm.subscribe(this,e,t,n)}},{key:"unsubscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";this.__realm||this.__realmError(),this.__realm.unsubscribe(this,e,t,n)}},{key:"unsubscribeAll",value:function(){this.__realm||this.__realmError(),this.__realm.unsubscribeAll(this)}},{key:"__realmError",value:function(){if(!this.id)throw Error("".concat(this," has no ID, did you call super.init(options)?"))}},{key:"future",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.__realm||this.__realmError();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.__realm.future(this,e,t,r)}},{key:"random",value:function(){return Lt().random()}},{key:"now",value:function(){return Lt().now()}},{key:"beWellKnownAs",value:function(e){Lt().vm.set(e,this)}},{key:"getModel",value:function(e){return this.__realm.vm.lookUpModel(e)}},{key:"wellKnownModel",value:function(e){return this.__realm.vm.get(e)}},{key:"modelOnly",value:function(e){if(Wl.current()===this.__realm.vm)return!0;var t=Error(e||"".concat(this,".modelOnly() called from outside a model!"));throw et("view code",t),t}},{key:"sessionId",get:function(){return this.__realm.vm.id}},{key:"viewCount",get:function(){return Object.keys(this.__realm.vm.views).length}},{key:"persistSession",value:function(e){if(this!==this.wellKnownModel("modelRoot"))throw Error("persistSession() must only be called on the root model");this.__realm.vm.persist(this,e)}},{key:Symbol.toPrimitive,value:function(){var e=this.constructor[Ul]||this.constructor.name;return e.includes("Model")?e:"".concat(e,"[Model]")}}],[{key:"create",value:function(e,n,r){if(!Ol(this))throw Error('Model class "'.concat(this.name,'" not registered'));var i=Lt(),o=new this(El);return Object.defineProperty(o,"__realm",{value:i}),Object.defineProperty(o,"id",{value:i.register(o),enumerable:!0}),_l.add(o),"string"==typeof n&&(console.warn('Croquet: Model.create(..., "'.concat(n,'") with a well-known name argument is deprecated!')),o.beWellKnownAs(n),n=void 0),r&&o.beWellKnownAs(r),o.init(e,n),_l.has(o)&&(_l.delete(o),Object.getPrototypeOf(this)!==t&&console.warn("".concat(o," did not call super.init(options)"))),o}},{key:"createNoInit",value:function(e){var t=Lt(),n=new this(El);return Object.defineProperty(n,"__realm",{value:t}),Object.defineProperty(n,"id",{value:e,enumerable:!0}),n}},{key:"allowConstructors",value:function(){El=void 0,console.warn("disabling error reporting for Model constructors")}},{key:"register",value:function(e){return e||(e=this.name,console.warn("Deprecation warning: ".concat(this.name,".register(classId) called without classId. See https://croquet.io/sdk/docs/Model.html#.register"))),Il.resetInstance(),Kl.resetInstance(),Ml.resetInstance(),Nl.resetInstance(),function(e,t){var n=re(e),r=ue("".concat(t,":").concat(n));he.push(r),ae()&&r.then((function(e){ce[e].what="Class ".concat(t)}))}(this,e),function(e,t){var n=Jl[t];if(n&&n!==e)throw Error("Registering model class ".concat(e.name,' failed, id "').concat(t,'" already used by ').concat(n.name));Ol(e)?zl&&!n&&console.warn("ignoring re-exported model class ".concat(t)):(zl&&console.log("registering model class ".concat(t)),e[Ul]=t);Jl[t]=e}(this,e),this}},{key:"wellKnownModel",value:function(e){if(!Wl.hasCurrent())throw Error("static Model.wellKnownModel() called from outside model");return Wl.current().get(e)}},{key:"evaluate",value:function(e){return Wl.evaluate(e)}},{key:"types",value:function(){return{}}},{key:"okayToIgnore",value:function(){return[]}},{key:"classToID",value:function(e){return function(e){if(Ol(e))return e[Ul];var t=e.name||"ClassName";throw Error("Model class not registered, did you call ".concat(t,'.register("').concat(t,'")?'))}(e)}},{key:"classFromID",value:function(e){return Dl(e)}},{key:"allClasses",value:function(){return Ql()}},{key:"allClassTypes",value:function(){return function(){var e,t={},n=C(Ql());try{for(n.s();!(e=n.n()).done;){var r=e.value;Object.assign(t,r.types())}}catch(e){n.e(e)}finally{n.f()}return Object.entries(t)}()}},{key:"instantiateClassID",value:function(e,t){return Dl(e).createNoInit(t)}}]),t}(),Jl={},Ul=Symbol("CLASS_ID");function Ql(){return Object.values(Jl)}function Ol(e){return Object.prototype.hasOwnProperty.call(e,Ul)}function Dl(e){if(Jl[e])return Jl[e];throw Error('Model class "'.concat(e,'" in snapshot, but not registered?'))}var Bl="Croquet.Model";jl[Ul]=Bl,Jl[Bl]=jl;var Al=function(e){function t(e){s(this,t),"object"===r(e)&&"__realm"in e||console.warn("Croquet: argument to View constructor needs to be a Model");var n=Lt("");n&&n.isViewRealm()||(n=Gt(e.__realm.vm,(function(){return Lt()}),!0)),Object.defineProperty(this,"realm",{value:n}),Object.defineProperty(this,"id",{value:n.register(this),configurable:!0})}return c(t,[{key:"detach",value:function(){this.unsubscribeAll(),this.realm.deregister(this),Object.defineProperty(this,"id",{value:""})}},{key:"reattach",value:function(){Object.defineProperty(this,"id",{value:this.realm.register(this)})}},{key:"publish",value:function(e,t,n){this.realm.publish(t,n,e)}},{key:"subscribe",value:function(e,t,n){"string"==typeof n&&(n=this[n]);var r=n;(n=r.bind(this)).unbound=r;var i=t.event?t:{event:t},o=i.event,s=i.handling;this.realm.subscribe(o,this.id,n,e,s)}},{key:"unsubscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"string"==typeof n&&(n=this[n]),this.realm.unsubscribe(t,this.id,n,e)}},{key:"unsubscribeAll",value:function(){this.realm.unsubscribeAll(this.id)}},{key:"future",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.realm.future(this,e)}},{key:"random",value:function(){return Lt().random()}},{key:"now",value:function(){return this.realm.now()}},{key:"externalNow",value:function(){return this.realm.externalNow()}},{key:"extrapolatedNow",value:function(){return this.realm.extrapolatedNow()}},{key:"update",value:function(e){}},{key:"wellKnownModel",value:function(e){return this.realm.vm.get(e)}},{key:"sessionId",get:function(){return this.realm.vm.id}},{key:"session",get:function(){return this.realm.vm.controller.session}},{key:"viewId",get:function(){return this.realm.vm.controller.viewId}},{key:Symbol.toPrimitive,value:function(){var e=this.constructor.name;return e.includes("View")?e:"".concat(e,"[View]")}}],[{key:"displayStatus",value:function(e,t){return $e(e,t)}},{key:"displayWarning",value:function(e,t){return qe(e,t)}},{key:"displayError",value:function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&mt.showMessage(e,n(n({},t),{},{level:"error"}))}(e,t)}}]),t}(),ql=new(function(){function e(){s(this,e),this.ready=!1,this.isInIframe=window.top!==window,this.subscriptions={},this.enumerator=null}return c(e,[{key:"setReceiver",value:function(e){this.receiver=e,this.ready=!0}},{key:"setIframeEnumerator",value:function(e){this.enumerator=e}},{key:"on",value:function(e,t){var n=this;if(!this.receiver)throw Error("setReceiver() has not been called");if("string"==typeof t&&(t=this.receiver[t]),!t)throw Error("Messenger.on: the second argument must be a method name or a function");if(this.subscriptions[e]){if(this.findIndex(this.subscriptions[e],t)>=0)throw Error("".concat(t," is already subscribed"))}else this.subscriptions[e]=[];this.subscriptions[e].push(t),this.listener||(this.listener=function(e){return n.receive(e)},window.addEventListener("message",this.listener))}},{key:"detach",value:function(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.stopPublishingPointerMove(),this.receiver=null,this.subscriptions={},this.enumerator=null,this.ready=!1}},{key:"removeSubscription",value:function(e,t){"string"==typeof t&&(t=this.receiver[t]);var n=this.subscriptions[e];if(n){var r=this.findIndex(n,t);n.splice(r,1),0===n.length&&delete this.subscriptions[e]}}},{key:"removeAllSubscriptions",value:function(){this.subscriptions={}}},{key:"receive",value:function(e){var t=e.data,n=t.event,r=t.data,i=e.source;this.handleEvent(n,r,i)}},{key:"handleEvent",value:function(e,t,n){var r=this,i=this.subscriptions[e];i&&i.forEach((function(e){e.call(r.receiver,t,n)}))}},{key:"send",value:function(e,t,n){this.isInIframe?window.top.postMessage({event:e,data:t},"*"):n?n.postMessage({event:e,data:t},"*"):this.enumerator&&this.enumerator().forEach((function(n){n.contentWindow.postMessage({event:e,data:t},"*")}))}},{key:"findIndex",value:function(e,t){var n=t.name;return e.findIndex((function(e){var r=e.name;return n||r?n===r:t===e}))}},{key:"startPublishingPointerMove",value:function(){var e=this;this._moveHandler||(this._moveHandler=function(t){return e.send("pointerPosition",{x:t.clientX,y:t.clientY,type:t.type})},window.document.addEventListener("pointermove",this._moveHandler,!0))}},{key:"stopPublishingPointerMove",value:function(){this._moveHandler&&(window.document.removeEventListener("pointermove",this._moveHandler,!0),this._moveHandler=null)}}]),e}()),$l="node"===Y.CROQUET_PLATFORM;var eu=60,tu=function(){function e(){s(this,e)}var t,i,a;return c(e,null,[{key:"join",value:(a=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.join_impl(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),mt.showMessage(e.t0.message,{level:"fatal"}),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return a.apply(this,arguments)})},{key:"join_impl",value:(i=o(regeneratorRuntime.mark((function t(i){var s,a,c,l,u,d,h,f,m,p,y,b,v,g,Z,w,x,G,k,S,W,C,T,Y,R,P,V;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(V=function(){x.model=null,x.view&&(F.has("debug","session",!1)&&console.log(x.id,"detaching root view"),x.view.detach(),""!==x.view.id&&console.warn("Croquet: ".concat(x.view," did not call super.detach()")),x.view=null),mt.clearSessionMoniker(),ql.ready&&ql.detach()},P=function(){return(P=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(),!Z.leaving){e.next=4;break}return Z.leaving(!0),e.abrupt("return");case 4:if(!Y){e.next=6;break}return e.abrupt("return");case 6:return Y=!0,e.next=9,Z.establishSession(G);case 9:Y=!1,x.model=Z.vm.get("modelRoot"),x.id=Z.id,x.persistentId=Z.persistentId,x.versionId=Z.versionId,Z.session=x,mt.makeSessionWidgets(x.id),Z.inViewRealm((function(){F.has("debug","session",!1)&&console.log(x.id,"creating root view"),x.view=new f(x.model)}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)},R=function(){return P.apply(this,arguments)},d=function(e,t){return e===t||e.prototype instanceof t},"object"===r(i)){t.next=6;break}throw Error("Croquet: please use new Session.join( {apiKey, ...} ) API. See https://croquet.io/sdk/docs/Session.html#.join");case 6:s=0,a=Object.entries(i);case 7:if(!(s<a.length)){t.next=16;break}if(c=X(a[s],2),l=c[0],!((u=c[1])instanceof Promise)){t.next=13;break}return t.next=12,u;case 12:i[l]=t.sent;case 13:s++,t.next=7;break;case 16:if("string"==typeof i.apiKey){t.next=18;break}throw Error("Croquet: no apiKey provided in Session.join()!");case 18:if(!(i.apiKey.length>128)){t.next=20;break}throw Error("Croquet: apiKey > 128 characters in Session.join()!");case 20:if("string"==typeof i.name){t.next=22;break}throw Error("Croquet: no session name provided in Session.join()!");case 22:if(!(i.name.length>128)){t.next=24;break}throw Error("Croquet: session name > 128 characters in Session.join()!");case 24:if("function"==typeof(h=i.model)&&d(h,jl)){t.next=27;break}throw Error("Croquet: bad model class in Session.join()");case 27:if("function"==typeof(f=i.view||Al)&&d(f,Al)){t.next=30;break}throw Error("Croquet: bad view class in Session.join()");case 30:if("string"==typeof i.appId){t.next=32;break}throw Error("Croquet: no appId provided in Session.join()");case 32:if(!(!i.appId.length>128)){t.next=34;break}throw Error("Croquet: appId > 128 characters in Session.join()");case 34:if(i.appId.match(/^[a-z](-?[a-z0-9_])*(\.[a-z0-9_](-?[a-z0-9_])*)+$/i)){t.next=36;break}throw Error("Croquet: malformed appId in Session.join()");case 36:if("string"==typeof i.password&&i.password){t.next=38;break}throw Error("Croquet: no password provided in Session.join()");case 38:if((m=F.reflector||i.reflector)&&(m.includes("://")||m.match(/^[-a-z0-9]+$/i)?F.reflector=m:console.warn('Croquet: Not a valid websocket url, ignoring reflector "'.concat(m,'"'))),!$l||"manual"===i.step){t.next=42;break}throw Error("stepping must be manual in a Node.js app");case 42:if(!("rejoinLimit"in i)){t.next=47;break}if(!("number"!=typeof i.rejoinLimit||i.rejoinLimit<0||i.rejoinLimit>6e4)){t.next=45;break}throw Error("rejoinLimit range: 0-60000");case 45:t.next=48;break;case 47:i.rejoinLimit=1e3;case 48:if(!("eventRateLimit"in i)){t.next=53;break}if(!("number"!=typeof i.eventRateLimit||i.eventRateLimit<1||i.eventRateLimit>60)){t.next=51;break}throw Error("eventRateLimit range: 1-60");case 51:t.next=54;break;case 53:i.eventRateLimit=20;case 54:if(!i.heraldUrl){t.next=59;break}if(!(i.heraldUrl.length>256)){t.next=57;break}throw Error("heraldUrl can only be 256 characters");case 57:if(i.heraldUrl.startsWith("https://")){t.next=59;break}throw Error("heraldUrl needs to be https");case 59:if(!i.hashOverride){t.next=64;break}if(43===i.hashOverride.length){t.next=62;break}throw Error("hashOverride must be 43 characters");case 62:if(-1===i.hashOverride.search(/[^-_a-zA-Z0-9]/)){t.next=64;break}throw Error("hashOverride must be base64url encoded");case 64:if(i.debug&&(p=function(e){return"string"==typeof e&&(e=e.split(",")),e?Array.isArray(e)?e:[e]:[]},F.debug=[].concat(L(p(i.debug)),L(p(F.debug))).join(",")),!("autoSleep"in i)){t.next=80;break}if(y=i.autoSleep,"number"!==(b=r(y))){t.next=73;break}if(!(y<0)){t.next=71;break}throw Error("an autoSleep value must be >= 0");case 71:t.next=78;break;case 73:if("boolean"!==b){t.next=77;break}i.autoSleep=y?10:0,t.next=78;break;case 77:throw Error("autoSleep must be numeric or boolean");case 78:t.next=81;break;case 80:i.autoSleep=10;case 81:i.flags&&("string"==typeof(v=i.flags)&&(v=v.split(",")),(v=(v=v?Array.isArray(v)?v:[v]:[]).filter((function(e){return"object"!==r(e)}))).length?(i.flags={},v.forEach((function(e){return i.flags[e]=!0}))):i.flags=null),"expectedSimFPS"in i&&(eu=Math.min(i.expectedSimFPS,120)),g=["name","password","apiKey","appId","tps","autoSleep","heraldUrl","rejoinLimit","eventRateLimit","optionsFromUrl","viewIdDebugSuffix","hashOverride","flags"],iu(),Z=new $c,w=JSON.parse(JSON.stringify(n({},i.options))),t.t0=function(e){Z.stepSession("animation",{frameTime:e,view:x.view,expectedSimFPS:eu})},t.t1=function(){return e.leave(x.id)},x={id:"",persistentId:"",versionId:"",model:null,view:null,step:t.t0,leave:t.t1,get latency(){return Z.latency},get latencies(){return Z.latencies}},G={options:w,initFn:function(e,t){return h.create(e,t,"modelRoot")},rebootModelView:R};for(k=0,S=Object.entries(i);k<S.length;k++)W=X(S[k],2),C=W[0],T=W[1],g.includes(C)&&(G[C]=T);return t.next=94,Z.initFromSessionSpec(G);case 94:return Y=!1,t.next=97,R();case 97:return"manual"!==i.step&&Z.startStepping(x.step),t.abrupt("return",x);case 99:case"end":return t.stop()}}),t)}))),function(e){return i.apply(this,arguments)})},{key:"leave",value:(t=o(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=qc(t)){e.next=3;break}return e.abrupt("return",!1);case 3:if(n.reconnectTimeout&&(clearTimeout(n.reconnectTimeout),delete n.reconnectTimeout),r=new Promise((function(e){return n.leaving=e})),(i=n.connection).connected){e.next=8;break}return e.abrupt("return",!1);case 8:return i.closeConnection(1e3),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"thisSession",value:function(){var e=Wl.current();return e?e.id:""}}]),e}(),nu={};function ru(e){if(!Object.isFrozen(e)){Object.freeze(e);for(var t=0,n=Object.values(e);t<n.length;t++){var i=n[t];!i||"object"!==r(i)&&"function"!=typeof i||ru(i)}}}function iu(){Object.isFrozen(nu)||(ru(nu),function(e){var t=JSON.stringify(e,(function(e,t){return"function"==typeof t?re(t):t}));if("{}"!==t){var n=JSON.parse(t),r=ue(Q(n));he.push(r),ae()&&r.then((function(e){ce[e].what="Croquet Constants"}))}}(nu))}return e.App=mt,e.Constants=nu,e.Data=ul,e.Messenger=ql,e.Model=jl,e.Session=tu,e.View=Al,e.gatherInternalClassTypes=function(e,t){var n={};return Hl({root:e},t,n,new Set),n},e.startSession=function(){return mt.showMessage("Croquet.startSession() is deprecated, please use Croquet.Session.join()",{level:"warning",only:"once"}),tu.join.apply(tu,arguments)},Object.defineProperty(e,"__esModule",{value:!0}),e}({});

